import{w as j,A as g,C as b,a as C,I as y,W as T}from"./NavigationView-B2KVyPc0.js";import{j as e}from"./createSvgIcon-BAyG150Y.js";import{A as t}from"./AdminComponentEasyAccessSet__loadShare___mf_0_mui_mf_1_material__loadShare__-DP1_LQ8a.js";import{V as k,a as w}from"./VisibilityOff-Cds6_I-g.js";import"./AdminComponentEasyAccessSet__loadShare__react__loadShare__-BWvOyvAg.js";import"./_commonjsHelpers-CE1G-McA.js";import"./AdminComponentEasyAccessSet__mf_v__runtimeInit__mf_v__-DmMtQNcK.js";import"./hoist-non-react-statics.cjs-CIQIDtQQ.js";import"./Clear-jM7oAHDI.js";import"./AdminComponentEasyAccessSet__loadShare___mf_0_iobroker_mf_1_adapter_mf_2_react_mf_2_v5__loadShare__-ChLGBbzW.js";import"./useTheme-Cq43vfiC.js";import"./defaultTheme-BKgYrozm.js";class N extends g.ConfigGeneric{constructor(p){super(p);const u=g.ConfigGeneric.getValue(p.data,p.attr);this.state={...this.state,entries:Array.isArray(u)?u:[],confirmDeleteOpen:!1,confirmDeleteName:null}}renderItem(p,u,D){const c=this.state.entries||[],x=Array.from(new Set(c.map(o=>o.uniqueName))).filter(Boolean);this._local||(this._local={newName:"",selected:x[0]||"",showPin:!1});const l=this._local,f=()=>{const o=(l.newName||"").trim();if(!o)return;const s={uniqueName:o,headline:o,button1:"",button2:"",button3:"",button4:"",pin:0},a=[...c,s];this.setState({entries:a}),this.onChange(this.props.attr,a),l.newName="",l.selected=o},_=()=>{const o=l.selected;o&&this.setState({confirmDeleteOpen:!0,confirmDeleteName:o})},m=()=>{this.setState({confirmDeleteOpen:!1,confirmDeleteName:null})},v=()=>{const o=this.state.confirmDeleteName;if(!o){m();return}const s=c.filter(i=>i.uniqueName!==o);this.setState({entries:s,confirmDeleteOpen:!1,confirmDeleteName:null}),this.onChange(this.props.attr,s);const a=Array.from(new Set(s.map(i=>i.uniqueName))).filter(Boolean);l.selected=a[0]||"",this.setState({})};return e.jsxs(t.Box,{sx:{height:"calc(100vh - 64px)",display:"flex",p:1},children:[e.jsxs(t.Box,{sx:{width:"20%",pr:1,display:"flex",flexDirection:"column",gap:1},children:[e.jsx(t.Paper,{sx:{p:1,backgroundColor:"transparent"},elevation:0,children:e.jsxs(t.Box,{sx:{display:"flex",gap:1},children:[e.jsx(t.TextField,{"aria-label":"new-name",value:l.newName,onChange:o=>{l.newName=o.target.value,this.setState({})},variant:"standard",placeholder:this.getText("New item"),InputProps:{disableUnderline:!0,sx:{backgroundColor:"transparent",px:1}},sx:{flex:1}}),e.jsx(t.Button,{size:"small",variant:"contained",onClick:f,children:"+"})]})}),(()=>{const a=Math.max(3,x.length||0),i=(typeof window<"u"?window.innerHeight:800)-64,r=Math.floor(i*.8),n=Math.min(a*40,r);return e.jsx(t.Paper,{sx:{height:n,overflow:"auto",p:1,backgroundColor:"transparent"},elevation:0,children:x.length===0?e.jsx(t.Typography,{variant:"body2",color:"text.secondary",children:this.getText("No items")}):x.map(d=>e.jsx(t.Box,{onClick:()=>{l.selected=d,this.setState({})},sx:{p:1,borderRadius:1,cursor:"pointer",backgroundColor:l.selected===d?"action.selected":"transparent",mb:.5},children:e.jsx(t.Typography,{variant:"body2",children:d})},d))})})(),e.jsx(t.Box,{sx:{display:"flex",justifyContent:"flex-end"},children:e.jsx(t.Button,{size:"small",color:"error",variant:"outlined",onClick:_,disabled:!l.selected,children:"-"})})]}),e.jsx(b,{open:!!this.state.confirmDeleteOpen,onClose:m,onConfirm:v,title:this.getText("unlock_delete_confirm_title"),description:this.getText("unlock_delete_confirm_text")+(this.state.confirmDeleteName?`: ${this.state.confirmDeleteName}`:""),cancelText:this.getText("Cancel"),confirmText:this.getText("Delete"),ariaTitleId:"unlock-delete-confirm-title",ariaDescId:"unlock-delete-confirm-description"}),e.jsx(t.Box,{sx:{width:"80%",pl:2,borderLeft:"1px solid",borderColor:"divider"},children:e.jsx(t.Paper,{sx:{height:"100%",p:2},elevation:1,children:l.selected?e.jsx(t.Box,{children:(()=>{const o=l.selected,s=c.find(a=>a.uniqueName===o);return s?e.jsxs(e.Fragment,{children:[e.jsx(t.TextField,{fullWidth:!0,variant:"standard",label:this.getText("unlock_headline"),value:s.headline??"",onChange:a=>{const i=a.target.value,r=c.map(n=>n.uniqueName===o?{...n,headline:i}:n);this.setState({entries:r}),this.onChange(this.props.attr,r)},InputProps:{disableUnderline:!0,sx:{backgroundColor:"transparent",px:1}},sx:{mb:2}}),e.jsx(t.Box,{sx:{mt:1},children:e.jsxs(t.FormControl,{component:"fieldset",children:[e.jsx(t.Typography,{variant:"subtitle2",sx:{mb:1},children:this.getText("unlock_type")}),e.jsxs(t.RadioGroup,{row:!0,value:(s==null?void 0:s.alarmType)||"",onChange:(a,i)=>{const r=c.map(n=>n.uniqueName===o?{...n,alarmType:i}:n);this.setState({entries:r}),this.onChange(this.props.attr,r)},children:[e.jsx(t.FormControlLabel,{value:"alarm",control:e.jsx(t.Radio,{}),label:this.getText("unlock_alarm")}),e.jsx(t.FormControlLabel,{value:"unlock",control:e.jsx(t.Radio,{}),label:this.getText("unlock_unlock")})]})]})}),e.jsx(t.Box,{sx:{mt:2},children:e.jsx(t.TextField,{variant:"standard",label:this.getText("unlock_pin"),type:l.showPin?"text":"password",value:s.pin!==void 0&&s.pin!==null?String(s.pin):"",onChange:a=>{const r=a.target.value.replace(/[^0-9]/g,""),n=r?parseInt(r,10):0,d=c.map(h=>h.uniqueName===o?{...h,pin:n}:h);this.setState({entries:d}),this.onChange(this.props.attr,d)},InputProps:{disableUnderline:!0,sx:{backgroundColor:"transparent",px:1},endAdornment:e.jsx(t.InputAdornment,{position:"end",children:e.jsx(t.IconButton,{"aria-label":l.showPin?"hide-pin":"show-pin",onClick:()=>{l.showPin=!l.showPin,this.setState({})},edge:"end",size:"small",children:l.showPin?e.jsx(k,{fontSize:"small"}):e.jsx(w,{fontSize:"small"})})})}})}),s.alarmType==="alarm"&&e.jsxs(t.Box,{sx:{mt:2},children:[e.jsx(t.Box,{sx:{display:"grid",gridTemplateColumns:"1fr",gap:2},children:[1,2,3,4].map(a=>{const i=`button${a}`;return e.jsxs(t.Box,{children:[e.jsx(t.Typography,{variant:"caption",color:"text.secondary",sx:{mb:.5},children:this.getText(`unlock_button${a}_label`)}),e.jsx(t.TextField,{fullWidth:!0,variant:"standard",placeholder:this.getText(`unlock_button${a}_placeholder`),value:s[i]??"",onChange:r=>{const n=r.target.value,d=c.map(h=>h.uniqueName===o?{...h,[i]:n}:h);this.setState({entries:d}),this.onChange(this.props.attr,d)},InputProps:{disableUnderline:!0,sx:{backgroundColor:"transparent",px:1,"& input::placeholder":{color:"text.disabled"}}}})]},a)})}),e.jsx(t.Box,{sx:{mt:1},children:e.jsx(t.FormControlLabel,{control:e.jsx(t.Checkbox,{checked:!!s.approved,onChange:(a,i)=>{const r=c.map(n=>n.uniqueName===o?{...n,approved:i}:n);this.setState({entries:r}),this.onChange(this.props.attr,r)}}),label:this.getText("unlock_approved")})})]}),s.alarmType==="unlock"&&e.jsxs(t.Box,{sx:{mt:2},children:[e.jsx(t.Typography,{variant:"caption",color:"text.secondary",sx:{mb:.5},children:this.getText("unlock_setnavi_hint")}),e.jsx(t.TextField,{fullWidth:!0,variant:"standard",placeholder:this.getText("unlock_setnavi_placeholder"),value:s.setNavi??"",onChange:a=>{const i=a.target.value,r=c.map(n=>n.uniqueName===o?{...n,setNavi:i}:n);this.setState({entries:r}),this.onChange(this.props.attr,r)},InputProps:{disableUnderline:!0,sx:{backgroundColor:"transparent",px:1}}})]}),e.jsx(t.Box,{sx:{mt:2},children:e.jsxs(t.FormControl,{component:"fieldset",children:[e.jsx(t.Typography,{variant:"subtitle2",sx:{mb:1},children:this.getText("unlock_type")}),e.jsxs(t.RadioGroup,{row:!0,value:(s==null?void 0:s.alarmType)||"",onChange:(a,i)=>{const r=c.map(n=>n.uniqueName===o?{...n,alarmType:i}:n);this.setState({entries:r}),this.onChange(this.props.attr,r)},children:[e.jsx(t.FormControlLabel,{value:"alarm",control:e.jsx(t.Radio,{}),label:this.getText("unlock_alarm")}),e.jsx(t.FormControlLabel,{value:"unlock",control:e.jsx(t.Radio,{}),label:this.getText("unlock_unlock")})]})]})})]}):null})()}):e.jsxs(t.Box,{children:[e.jsx(t.Typography,{variant:"h6",children:this.getText("unlock_select_item")}),e.jsx(t.Box,{sx:{mt:2},children:e.jsx(t.Typography,{variant:"body2",color:"text.secondary",children:this.getText("unlock_select_description")})})]})})})]})}}const S=j(N),W={NavigationView:T,IconSelect:y,IconOverview:C,UnlockPage:S};export{W as default};
