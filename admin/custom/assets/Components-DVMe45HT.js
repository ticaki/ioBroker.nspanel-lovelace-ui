import{A as _,b as j,S as w,c as b,d as S,w as R,e as I,C as L,a as D,I as F,W as $}from"./NavigationView-D0HyKhIx.js";import{j as e}from"./createSvgIcon-BAyG150Y.js";import{A as t}from"./AdminComponentEasyAccessSet__loadShare___mf_0_mui_mf_1_material__loadShare__-DP1_LQ8a.js";import{V as M,a as E}from"./VisibilityOff-Cds6_I-g.js";import{R as N}from"./AdminComponentEasyAccessSet__loadShare__react__loadShare__-BWvOyvAg.js";import{A as T}from"./AdminComponentEasyAccessSet__loadShare___mf_0_iobroker_mf_1_adapter_mf_2_react_mf_2_v5__loadShare__-ChLGBbzW.js";import{T as P}from"./Tooltip-QmnnkgNQ.js";import{A as k}from"./AdminComponentEasyAccessSet__loadShare___mf_0_mui_mf_1_icons_mf_2_material__loadShare__-CmHE1aSA.js";import"./index-BCpyQc2W.js";import"./_commonjsHelpers-CE1G-McA.js";import"./AdminComponentEasyAccessSet__mf_v__runtimeInit__mf_v__-DmMtQNcK.js";import"./Clear-jM7oAHDI.js";import"./useTheme-Cq43vfiC.js";import"./defaultTheme-BKgYrozm.js";import"./Grow-DxyKUkMA.js";class B extends _.ConfigGeneric{static defaultProps={widthPercent:30};constructor(a){super(a),this.state={...this.state,available:[],selectedTopic:"",added:[],assignments:a.currentAssignments||[],pagesMap:{},alive:!1,isCollapsed:!1,isLoading:{},lastLoadTime:{},focusReceived:{},retryCount:{}}}componentWillUnmount(){if(this.props.oContext&&this.props.oContext.socket){const a=this.props.oContext.instance??"0";this.props.oContext.socket.unsubscribeState(`system.adapter.${j}.${a}.alive`,this.onAliveChanged)}}async componentDidMount(){if(super.componentDidMount(),this.props.oContext&&this.props.oContext.socket){const a=this.props.oContext.instance??"0",h=`system.adapter.${j}.${a}.alive`;try{const c=await this.props.oContext.socket.getState(h),i=!!(c!=null&&c.val);this.setState({alive:i}),await this.props.oContext.socket.subscribeState(h,this.onAliveChanged)}catch(c){console.error("[NavigationAssignmentPanel] Failed to get alive state or subscribe:",c),this.setState({alive:!1})}}await this.loadPanels(!1),await this.applyAssignmentsFromProps(this.props.currentAssignments||[])}onAliveChanged=(a,h)=>{const c=this.state.alive,i=h?!!h.val:!1;c!==i&&(this.setState({alive:i}),!c&&i&&this.state.assignments.length>0&&this.retryLoadingPagesForAssignments())};async applyAssignmentsFromProps(a){var r;const h=(a||[]).map(x=>this.state.available.find(g=>g.panelTopic===x.topic)||{panelTopic:x.topic,friendlyName:x.topic}).sort((x,v)=>x.friendlyName.localeCompare(v.friendlyName)),c=this.state.selectedAddedTopic,u=h.find(x=>x.panelTopic===c)?c:(r=h[0])==null?void 0:r.panelTopic;this.setState({assignments:a,added:h,selectedAddedTopic:u,selectedTopic:""});const o=h.map(x=>this.loadPagesForPanel(x.panelTopic,!0));await Promise.all(o)}componentDidUpdate(a){if(a.uniqueName!==this.props.uniqueName){const h=this.props.currentAssignments||[];this.props.uniqueName&&this.setState(c=>({focusReceived:{...c.focusReceived,[this.props.uniqueName]:!0}})),this.loadPanels(!1).then(()=>{this.applyAssignmentsFromProps(h)})}else if(a.currentAssignments!==this.props.currentAssignments&&this.props.currentAssignments){const h=this.props.currentAssignments||[];this.applyAssignmentsFromProps(h)}}async loadPanels(a=!0){try{let h=[];if(this.props.fetchPanels)h=await this.props.fetchPanels();else if(this.props.oContext&&this.props.oContext.socket){const c=this.props.oContext.instance??"0",i=`${j}.${c}`;try{const u=await this.props.oContext.socket.sendTo(i,w,null);Array.isArray(u)?h=u:u&&Array.isArray(u.result)&&(h=u.result)}catch(u){console.error("[NavigationAssignmentPanel] sendTo failed",{target:i,cmd:w,error:u})}}this.setState({available:h,selectedTopic:""})}catch{this.setState({available:[],selectedTopic:""})}}doAddSelected=()=>{const{selectedTopic:a,available:h,added:c}=this.state;if(!a)return;let i=h.find(r=>r.panelTopic===a);if(!i&&a===b&&(i={panelTopic:b,friendlyName:`(${T.I18n.t("all")||"All"})`}),!i||c.find(r=>r.panelTopic===i.panelTopic))return;const u=[...c,i],o=[...this.state.assignments,{topic:i.panelTopic}];this.setState({added:u,assignments:o,selectedTopic:""}),this.loadPagesForPanel(i.panelTopic),this.props.onAssign&&this.props.uniqueName&&this.props.onAssign(this.props.uniqueName,o)};doRemoveSelected=()=>{const{added:a,selectedAddedTopic:h}=this.state;if(a.length)if(h){const c=a.filter(r=>r.panelTopic!==h),i=this.state.assignments.filter(r=>r.topic!==h),u=a.findIndex(r=>r.panelTopic===h);let o;if(c.length>0){const r=c[u]??c[u-1]??c[0];o=r==null?void 0:r.panelTopic}else o=void 0;this.setState({added:c,assignments:i,selectedAddedTopic:o}),this.props.onAssign&&this.props.uniqueName&&this.props.onAssign(this.props.uniqueName,i)}else{const c=a.slice(0,-1),i=this.state.assignments.slice(0,-1),u=c.length?c[c.length-1].panelTopic:void 0;this.setState({added:c,assignments:i,selectedAddedTopic:u}),this.props.onAssign&&this.props.uniqueName&&this.props.onAssign(this.props.uniqueName,i)}};selectAdded=a=>{this.setState({selectedAddedTopic:a}),this.loadPagesForPanel(a,!0)};retryLoadingPagesForAssignments(){const a=this.state.assignments.map(h=>h.topic);for(const h of a)this.loadPagesForPanel(h,!0)}async loadPagesForPanel(a,h=!1){var x,v;if(!a)return;if(!this.state.alive){console.log(`[NavigationAssignmentPanel] Adapter not alive, skipping pages load for ${a}`);return}const c=Date.now(),i=this.state.lastLoadTime[a]||0,u=this.state.isLoading[a],o=!!this.state.pagesMap[a],r=h||!o||c-i>6e4;if(!(u||!r&&o)){this.setState(g=>({isLoading:{...g.isLoading,[a]:!0},lastLoadTime:{...g.lastLoadTime,[a]:c}}));try{let g=[],f=!1;if((x=this.props.oContext)!=null&&x.socket){const s=this.props.oContext.instance??"0",p=`${j}.${s}`,d={panelTopic:a};try{const l=new Promise((y,C)=>{setTimeout(()=>C(new Error("sendTo timeout after 2 seconds")),2e3)}),m=this.props.oContext.socket.sendTo(p,S,d),n=await Promise.race([m,l]);Array.isArray(n)?(g=n,f=!0):n&&Array.isArray(n.result)&&(g=n.result,f=!0),console.log("[NavigationAssignmentPanel] sendTo successful",{topic:a,pages:g})}catch(l){console.warn("[NavigationAssignmentPanel] sendTo failed or timed out",{target:p,cmd:S,payload:d,error:l})}}if(f&&g.length===0){const s=this.state.retryCount[a]||0,p=3,d=2e3;if(s<p){console.log(`[NavigationAssignmentPanel] Got empty array for ${a}, retrying in ${d}ms (attempt ${s+1}/${p})`),this.setState(l=>({retryCount:{...l.retryCount,[a]:s+1}})),setTimeout(()=>{this.setState(l=>({isLoading:{...l.isLoading,[a]:!1}})),this.loadPagesForPanel(a,!0)},d);return}console.log(`[NavigationAssignmentPanel] Max retries reached for ${a}, accepting empty result`),this.setState(l=>({retryCount:{...l.retryCount,[a]:0}}))}else f&&g.length>0&&this.setState(s=>({retryCount:{...s.retryCount,[a]:0}}));if(!f&&!((v=this.props.oContext)!=null&&v.socket)&&(await new Promise(s=>setTimeout(s,1e3)),this.setState(s=>({isLoading:{...s.isLoading,[a]:!1}})),!this.state.focusReceived[a]))return this.setState(s=>({focusReceived:{...s.focusReceived,[a]:!0}})),this.loadPagesForPanel(a,!0);this.setState(s=>({pagesMap:{...s.pagesMap,[a]:g},isLoading:{...s.isLoading,[a]:!1}}))}catch(g){console.error("[NavigationAssignmentPanel] loadPagesForPanel error",{topic:a,error:g}),this.setState(f=>({isLoading:{...f.isLoading,[a]:!1}}))}}}setNavigationForSelected=a=>{const{selectedAddedTopic:h,assignments:c}=this.state;if(!h)return;const i=c.findIndex(x=>x.topic===h),u=[...c],o=c[i],r={topic:h,navigation:{...o==null?void 0:o.navigation,...a}};i>=0?u[i]=r:u.push(r),this.setState({assignments:u}),this.props.onAssign&&this.props.uniqueName&&this.props.onAssign(this.props.uniqueName,u)};getNavValue=(a,h)=>{var u;if(!a)return"";const c=this.state.assignments.find(o=>o.topic===a);return((u=c==null?void 0:c.navigation)==null?void 0:u[h])||""};togglePanel=()=>{const a=this.state.isCollapsed;this.setState(h=>({isCollapsed:!h.isCollapsed})),a&&this.applyAssignmentsFromProps(this.props.currentAssignments||[])};renderItem(a,h,c){const{widthPercent:i}=this.props,{isCollapsed:u}=this.state,o=this.state.selectedAddedTopic?this.state.pagesMap[this.state.selectedAddedTopic]??[]:[];return e.jsxs(t.Box,{sx:{position:{xs:"static",md:"absolute"},right:{xs:"auto",md:0},top:{xs:"auto",md:0},height:{xs:"auto",md:"100%"},width:{xs:"100%",md:u?"10px":`${i}%`},minHeight:{xs:u?"50px":"auto",md:"auto"},transition:"width 240ms ease, min-height 240ms ease",backgroundColor:"background.default",border:{xs:"2px solid",md:"none"},borderLeft:{xs:"none",md:"2px solid"},borderTop:{xs:"none",md:"2px solid"},borderColor:"secondary.main",borderRadius:{xs:1,md:0},overflow:{xs:"hidden",md:"visible"},display:"flex",flexDirection:"column",zIndex:20,mt:{xs:2,md:0}},children:[e.jsx(t.Box,{sx:{display:{xs:"none",md:"flex"},position:"absolute",left:"-20px",top:"50%",transform:"translateY(-50%)",width:"20px",height:"60px",backgroundColor:"secondary.main",borderRadius:"4px 0 0 4px",alignItems:"center",justifyContent:"center",cursor:"pointer",zIndex:21,"&:hover":{backgroundColor:"secondary.dark"}},onClick:this.togglePanel,children:e.jsx(t.Typography,{sx:{color:"secondary.contrastText",fontSize:"14px",fontWeight:"bold",transform:"rotate(-90deg)",whiteSpace:"nowrap"},children:u?"⏶":"⏷"})}),e.jsx(t.Box,{sx:{display:{xs:"flex",md:"none"},alignItems:"center",justifyContent:"center",p:1,backgroundColor:"secondary.main",color:"secondary.contrastText",borderRadius:"4px 4px 0 0"},children:e.jsx(t.Typography,{variant:"subtitle2",sx:{fontWeight:600},children:T.I18n.t("navigation_panel")})}),e.jsxs(t.Box,{sx:{p:1,height:"100%",display:{xs:"flex",md:u?"none":"flex"},flexDirection:"column",width:{xs:"100%",md:u?"0%":"100%"},overflow:"hidden",transition:{xs:"none",md:"width 240ms ease"}},children:[e.jsx(t.Typography,{variant:"h6",sx:{mb:1,fontWeight:600,color:"primary.main",fontSize:"1rem",display:{xs:"none",md:"block"}},children:T.I18n.t("navigation_panel")}),e.jsxs(t.Box,{sx:{display:"flex",gap:1,alignItems:"center",mb:1},children:[e.jsxs(t.Select,{size:"small",variant:"standard",value:this.state.selectedTopic,onOpen:()=>{this.loadPanels()},onChange:r=>this.setState({selectedTopic:String(r.target.value)}),disabled:!this.state.alive,sx:{flex:1,backgroundColor:"transparent",minHeight:40,"& .MuiSelect-select":{backgroundColor:"transparent",display:"flex",alignItems:"center",height:40}},displayEmpty:!0,children:[e.jsx(t.MenuItem,{value:"",children:e.jsx("em",{children:"—"})}),e.jsx(t.MenuItem,{value:b,children:`(${T.I18n.t("all")||"All"})`}),this.state.available.map(r=>e.jsx(t.MenuItem,{value:r.panelTopic,children:r.friendlyName},r.panelTopic))]}),e.jsx(t.Button,{size:"small",variant:"contained",sx:{minWidth:32,padding:"4px 8px"},onClick:this.doAddSelected,disabled:!this.state.selectedTopic||!this.state.alive,children:"+"})]}),e.jsx(t.Box,{children:this.state.added.length===0?e.jsx(t.Typography,{variant:"body2",color:"text.secondary",children:T.I18n.t("No panels added")}):e.jsx("div",{style:{overflow:"auto"},children:e.jsx(t.List,{dense:!0,children:this.state.added.map(r=>{const x=r.panelTopic;return e.jsx(N.Fragment,{children:e.jsx(t.ListItem,{component:"div",children:e.jsx(t.ListItemButton,{selected:this.state.selectedAddedTopic===x,onClick:()=>this.selectAdded(x),children:e.jsx(t.ListItemText,{primary:x===b?`(${T.I18n.t("all")||"All"})`:r.friendlyName})})})},x)})})})}),e.jsx(t.Box,{sx:{display:"flex",gap:1,justifyContent:"flex-end",mt:1},children:e.jsx(t.Button,{size:"small",color:"error",variant:"contained",onClick:this.doRemoveSelected,disabled:this.state.added.length===0,sx:{minWidth:32,padding:"4px 8px"},children:"-"})}),e.jsx(t.Divider,{sx:{my:1}}),e.jsxs(t.Box,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:1,mt:1},children:[e.jsxs(t.Box,{children:[e.jsx(t.Box,{sx:{display:"flex",alignItems:"center",mb:.5},children:e.jsx(P,{title:T.I18n.t("nav_prev_tooltip"),children:e.jsx(t.Typography,{variant:"caption",color:"text.secondary",sx:{mr:.5},children:"prev"})})}),e.jsxs(t.Select,{size:"small",displayEmpty:!0,"aria-label":"prev",value:this.getNavValue(this.state.selectedAddedTopic,"prev")||"",onOpen:()=>{this.state.selectedAddedTopic&&this.loadPagesForPanel(this.state.selectedAddedTopic,!0)},onChange:r=>this.setNavigationForSelected({prev:String(r.target.value)||void 0}),sx:{width:"100%"},disabled:!this.state.alive||this.state.selectedAddedTopic&&this.state.isLoading[this.state.selectedAddedTopic]||!1,endAdornment:this.state.selectedAddedTopic&&this.state.isLoading[this.state.selectedAddedTopic]?e.jsx(t.Box,{sx:{display:"flex",alignItems:"center",pr:1},children:e.jsx(t.CircularProgress,{size:16})}):null,children:[e.jsx(t.MenuItem,{value:"",children:this.state.selectedAddedTopic?e.jsx("em",{children:"—"}):e.jsx("em",{children:T.I18n.t("select_panel_first")})}),o.filter(r=>r!==this.props.uniqueName).map(r=>e.jsx(t.MenuItem,{value:r,children:r},`prev-${r}`))]})]}),e.jsxs(t.Box,{children:[e.jsx(t.Box,{sx:{display:"flex",alignItems:"center",mb:.5},children:e.jsx(P,{title:T.I18n.t("nav_next_tooltip"),children:e.jsx(t.Typography,{variant:"caption",color:"text.secondary",sx:{mr:.5},children:"next"})})}),e.jsxs(t.Select,{size:"small",displayEmpty:!0,"aria-label":"next",value:this.getNavValue(this.state.selectedAddedTopic,"next")||"",onOpen:()=>{this.state.selectedAddedTopic&&this.loadPagesForPanel(this.state.selectedAddedTopic,!0)},onChange:r=>this.setNavigationForSelected({next:String(r.target.value)||void 0}),sx:{width:"100%"},disabled:!this.state.alive||this.state.selectedAddedTopic&&this.state.isLoading[this.state.selectedAddedTopic]||!1,endAdornment:this.state.selectedAddedTopic&&this.state.isLoading[this.state.selectedAddedTopic]?e.jsx(t.Box,{sx:{display:"flex",alignItems:"center",pr:1},children:e.jsx(t.CircularProgress,{size:16})}):null,children:[e.jsx(t.MenuItem,{value:"",children:this.state.selectedAddedTopic?e.jsx("em",{children:"—"}):e.jsx("em",{children:T.I18n.t("select_panel_first")})}),o.filter(r=>r!==this.props.uniqueName&&!r.startsWith("///")).map(r=>e.jsx(t.MenuItem,{value:r,children:r},`next-${r}`))]})]}),e.jsxs(t.Box,{children:[e.jsx(t.Typography,{variant:"caption",color:"text.secondary",sx:{mb:.5,display:"block"},children:"home"}),e.jsxs(t.Select,{size:"small",displayEmpty:!0,"aria-label":"home",value:this.getNavValue(this.state.selectedAddedTopic,"home")||"",onOpen:()=>{this.state.selectedAddedTopic&&this.loadPagesForPanel(this.state.selectedAddedTopic,!0)},onChange:r=>this.setNavigationForSelected({home:String(r.target.value)||void 0}),sx:{width:"100%"},disabled:!this.state.alive||this.state.selectedAddedTopic&&this.state.isLoading[this.state.selectedAddedTopic]||!1,endAdornment:this.state.selectedAddedTopic&&this.state.isLoading[this.state.selectedAddedTopic]?e.jsx(t.Box,{sx:{display:"flex",alignItems:"center",pr:1},children:e.jsx(t.CircularProgress,{size:16})}):null,children:[e.jsx(t.MenuItem,{value:"",children:e.jsx("em",{children:"—"})}),o.filter(r=>r!==this.props.uniqueName).map(r=>e.jsx(t.MenuItem,{value:r,children:r},`home-${r}`))]})]}),e.jsxs(t.Box,{children:[e.jsx(t.Typography,{variant:"caption",color:"text.secondary",sx:{mb:.5,display:"block"},children:"parent"}),e.jsxs(t.Select,{size:"small",displayEmpty:!0,"aria-label":"parent",value:this.getNavValue(this.state.selectedAddedTopic,"parent")||"",onOpen:()=>{this.state.selectedAddedTopic&&this.loadPagesForPanel(this.state.selectedAddedTopic,!0)},onChange:r=>this.setNavigationForSelected({parent:String(r.target.value)||void 0}),sx:{width:"100%"},disabled:!this.state.alive||this.state.selectedAddedTopic&&this.state.isLoading[this.state.selectedAddedTopic]||!1,endAdornment:this.state.selectedAddedTopic&&this.state.isLoading[this.state.selectedAddedTopic]?e.jsx(t.Box,{sx:{display:"flex",alignItems:"center",pr:1},children:e.jsx(t.CircularProgress,{size:16})}):null,children:[e.jsx(t.MenuItem,{value:"",children:e.jsx("em",{children:"—"})}),o.filter(r=>r!==this.props.uniqueName).map(r=>e.jsx(t.MenuItem,{value:r,children:r},`parent-${r}`))]})]}),e.jsx(t.Divider,{sx:{my:1}})]}),this.state.added.length>0?this.state.added.map(r=>{const x=r.panelTopic,v=this.state.added.some(y=>y.panelTopic===b),g=this.getNavValue(x,"next"),f=this.getNavValue(x,"prev"),s=this.getNavValue(x,"home"),p=this.getNavValue(x,"parent"),d=!!(g||f||s||p),l=x===b,m=!g&&!f,n=l?"nav_all_requires_prev_next":v?"nav_remove_from_all_notice":"nav_target_only_notice";return e.jsxs(t.Box,{"data-has-all":v,sx:{mt:2,mb:1},children:[e.jsxs(t.Box,{sx:{display:"flex",alignItems:"center",gap:1,mb:.5},children:[e.jsx(t.Box,{sx:{width:10,height:10,borderRadius:"50%",bgcolor:d?"success.main":"error.main"}}),e.jsx(t.Typography,{variant:"subtitle2",sx:{fontWeight:600},children:x===b?`(${T.I18n.t("all")||"All"})`:r.friendlyName||x})]}),e.jsx(t.Box,{sx:{display:"flex",alignItems:"center",gap:1,flexWrap:"wrap"},children:["next","prev","parent","home"].map((y,C)=>{const q=this.getNavValue(x,y);return e.jsxs(N.Fragment,{children:[e.jsxs(t.Box,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(t.Typography,{variant:"caption",color:"text.secondary",children:T.I18n.t(y)||y}),e.jsx(t.Typography,{variant:"body2",children:q||e.jsx("em",{children:"—"})})]}),C<3&&e.jsx(t.Divider,{orientation:"vertical",flexItem:!0,sx:{height:18,mx:1}})]},`${x}-${y}`)})}),m?e.jsx(t.Box,{sx:{mt:1},children:e.jsx(t.Typography,{variant:"caption",color:"text.secondary",sx:{fontStyle:"italic"},children:T.I18n.t(n)})}):null]},`panel-summary-${x}`)}):null]})]})}}class O extends _.ConfigGeneric{_local=null;pagesRetryTimeout;constructor(a){super(a);const h=_.ConfigGeneric.getValue(a.data,a.attr);this.state={...this.state,entries:Array.isArray(h)?h:[],confirmDeleteOpen:!1,confirmDeleteName:null,alive:!1,pagesRetryCount:0}}componentWillUnmount(){this.pagesRetryTimeout&&clearTimeout(this.pagesRetryTimeout);const a=this.props.oContext.instance??"0";this.props.oContext.socket.unsubscribeState(`system.adapter.${j}.${a}.alive`,this.onAliveChanged)}async componentDidMount(){super.componentDidMount();const a=this.props.oContext.instance??"0",h=`system.adapter.${j}.${a}.alive`;try{const c=await this.props.oContext.socket.getState(h),i=!!(c!=null&&c.val);this.setState({alive:i}),await this.props.oContext.socket.subscribeState(h,this.onAliveChanged),i&&await this.loadPagesList()}catch(c){console.error("[UnlockPage] Failed to get alive state or subscribe:",c),this.setState({alive:!1})}}onAliveChanged=(a,h)=>{const c=this.state.alive,i=h?!!h.val:!1;c!==i&&(this.setState({alive:i}),!c&&i&&(!this.state.pagesList||this.state.pagesList.length===0)&&this.loadPagesList(),c&&!i&&this.pagesRetryTimeout&&(clearTimeout(this.pagesRetryTimeout),this.pagesRetryTimeout=void 0))};async loadPagesList(){if(!this.state.alive){console.log("[UnlockPage] Adapter not alive, skipping pages load");return}const a=[];if(this.props.oContext&&this.props.oContext.socket){const h=this.props.oContext.instance??"0",c=`${j}.${h}`;try{const i=await this.props.oContext.socket.sendTo(c,I,null);let u=[];Array.isArray(i)?u=i:i&&Array.isArray(i.result)&&(u=i.result);for(const o of u)a.push(o);if(u.length===0){const o=this.state.pagesRetryCount||0,r=3e3;console.log(`[UnlockPage] Got empty pages array, retrying in ${r}ms (attempt ${o+1})`),this.setState({pagesRetryCount:o+1}),this.pagesRetryTimeout&&clearTimeout(this.pagesRetryTimeout),this.pagesRetryTimeout=setTimeout(()=>{this.state.alive?this.loadPagesList():console.log("[UnlockPage] Adapter went offline, cancelling pages retry")},r);return}else u.length>0&&(console.log(`[UnlockPage] Successfully loaded ${u.length} pages after ${this.state.pagesRetryCount||0} retries`),this.setState({pagesRetryCount:0}),this.pagesRetryTimeout&&(clearTimeout(this.pagesRetryTimeout),this.pagesRetryTimeout=void 0))}catch(i){const u=this.state.pagesRetryCount||0,o=3e3;console.log(`[UnlockPage] Error loading pages, retrying in ${o}ms (attempt ${u+1}): ${String(i)}`),this.setState({pagesRetryCount:u+1}),this.pagesRetryTimeout&&clearTimeout(this.pagesRetryTimeout),this.pagesRetryTimeout=setTimeout(()=>{this.state.alive?this.loadPagesList():console.log("[UnlockPage] Adapter went offline, cancelling pages retry after error")},o);return}}else{console.log("[UnlockPage] No socket available for sendTo");return}this.setState({pagesList:Array.from(new Set(a))})}renderItem(a,h,c){var f;const i=this.state.entries||[],u=Array.from(new Set(i.map(s=>s.uniqueName))).filter(Boolean);this._local||(this._local={newName:"",selected:u[0]||"",showPin:!1});const o=this._local,r=()=>{const s=(o.newName||"").trim();if(!s)return;const p={card:"cardAlarm",uniqueName:s,headline:s,button1:"",button2:"",button3:"",button4:"",pin:0},d=[...i,p];this.setState({entries:d}),this.onChange(this.props.attr,d),o.newName="",o.selected=s},x=()=>{const s=o.selected;s&&this.setState({confirmDeleteOpen:!0,confirmDeleteName:s})},v=()=>{this.setState({confirmDeleteOpen:!1,confirmDeleteName:null})},g=()=>{const s=this.state.confirmDeleteName;if(!s){v();return}const p=i.filter(l=>l.uniqueName!==s);this.setState({entries:p,confirmDeleteOpen:!1,confirmDeleteName:null}),this.onChange(this.props.attr,p);const d=Array.from(new Set(p.map(l=>l.uniqueName))).filter(Boolean);o.selected=d[0]||"",this.setState({})};return e.jsxs(t.Box,{sx:{height:"calc(100vh - 64px)",display:"flex",flexDirection:{xs:"column",md:"row"},p:1},children:[e.jsxs(t.Box,{sx:{width:{xs:"100%",md:"20%"},pr:{xs:0,md:1},display:"flex",flexDirection:"column",gap:1},children:[e.jsx(t.Typography,{variant:"h6",sx:{mb:1,fontWeight:600,color:"primary.main",fontSize:"1rem"},children:this.getText("pages")}),e.jsx(t.Paper,{sx:{p:1,backgroundColor:"transparent"},elevation:0,children:e.jsxs(t.Box,{sx:{display:"flex",gap:1},children:[e.jsx(t.TextField,{"aria-label":"new-name",label:this.getText("new_page"),value:o.newName,onChange:s=>{o.newName=s.target.value,this.setState({})},variant:"standard",placeholder:this.getText("New item"),InputProps:{sx:{backgroundColor:"transparent",px:1}},sx:{flex:1,"& .MuiInput-underline:before":{borderBottomColor:"primary.main"},"& .MuiInput-underline:hover:before":{borderBottomColor:"primary.main"},"& .MuiInput-underline:after":{borderBottomColor:"primary.main"},"& .MuiInputLabel-root":{color:"primary.main"},"& .MuiInputLabel-root.Mui-focused":{color:"primary.main"}}}),e.jsx(t.Button,{size:"small",variant:"contained",onClick:r,disabled:(()=>{const s=(o.newName||"").trim();return!s||u.includes(s)})(),children:"+"})]})}),e.jsx(t.Paper,{sx:{overflow:"auto",p:1,backgroundColor:"transparent"},elevation:0,children:u.length===0?e.jsx(t.Typography,{variant:"body2",color:"text.secondary",children:this.getText("No items")}):u.map(s=>e.jsx(t.Box,{onClick:()=>{o.selected=s,this.setState({})},sx:{p:1,borderRadius:1,cursor:"pointer",backgroundColor:o.selected===s?"action.selected":"transparent",mb:.5},children:e.jsx(t.Typography,{variant:"body2",children:s})},s))}),e.jsx(t.Box,{sx:{display:"flex",justifyContent:"flex-end"},children:e.jsx(t.Button,{size:"small",color:"error",variant:"outlined",onClick:x,disabled:!o.selected,children:"-"})}),e.jsx(t.Divider,{sx:{my:1}}),e.jsx(t.Box,{sx:{mb:2},children:e.jsx("a",{href:"https://github.com/ticaki/ioBroker.nspanel-lovelace-ui/wiki/pageUnlock",target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"none",color:"inherit",fontSize:"0.875rem"},children:e.jsx(t.Typography,{variant:"body2",sx:{color:"primary.main",textDecoration:"underline",cursor:"pointer","&:hover":{opacity:.8}},children:this.getText("documentation")})})})]}),e.jsx(L,{open:!!this.state.confirmDeleteOpen,onClose:v,onConfirm:g,title:this.getText("delete_confirm_title"),description:this.getText("delete_confirm_text")+(this.state.confirmDeleteName?`: ${this.state.confirmDeleteName}`:""),cancelText:this.getText("Cancel"),confirmText:this.getText("Delete"),ariaTitleId:"unlock-delete-confirm-title",ariaDescId:"unlock-delete-confirm-description"}),e.jsxs(t.Box,{sx:{width:{xs:"100%",md:"90%"},pl:{xs:0,md:2},mt:{xs:2,md:0},display:"flex",flexDirection:{xs:"column",md:"row"},gap:1,position:"relative"},children:[e.jsx(t.Box,{sx:{width:{xs:"100%",md:"95%"},borderLeft:{xs:"none",md:"1px solid"},borderColor:"divider"},children:e.jsx(t.Paper,{sx:{height:"100%",p:2},elevation:1,children:o.selected?e.jsx(t.Box,{children:(()=>{const s=o.selected,p=i.find(d=>d.uniqueName===s);return p?e.jsxs(e.Fragment,{children:[e.jsx(t.Box,{sx:{mb:1,p:1,borderRadius:1,backgroundColor:"action.hover"},children:e.jsx(t.TextField,{fullWidth:!0,variant:"standard",type:"text",label:this.getText("unique_label"),value:s,onChange:d=>{const l=d.target.value;if(!l.trim())return;const m=i.map(n=>n.uniqueName===s?{...n,uniqueName:l}:n);this.setState({entries:m}),this.onChange(this.props.attr,m),o.selected=l},InputProps:{sx:{backgroundColor:"transparent",px:1,fontWeight:600,width:"50%"}}})}),e.jsx(t.Box,{sx:{mb:1},children:e.jsxs(t.FormControl,{component:"fieldset",children:[e.jsx(t.Typography,{variant:"subtitle2",sx:{mb:1},children:this.getText("unlock_type")}),e.jsxs(t.RadioGroup,{row:!0,value:(p==null?void 0:p.alarmType)||"",onChange:(d,l)=>{const m=i.map(n=>n.uniqueName===s?{...n,alarmType:l}:n);this.setState({entries:m}),this.onChange(this.props.attr,m)},children:[e.jsx(t.FormControlLabel,{value:"alarm",control:e.jsx(t.Radio,{}),label:this.getText("unlock_alarm")}),e.jsx(t.FormControlLabel,{value:"unlock",control:e.jsx(t.Radio,{}),label:this.getText("unlock_unlock")})]})]})}),e.jsx(t.TextField,{fullWidth:!0,variant:"standard",type:"text",autoComplete:"off",label:this.getText("headline"),value:p.headline??"",onChange:d=>{const l=d.target.value,m=i.map(n=>n.uniqueName===s?{...n,headline:l}:n);this.setState({entries:m}),this.onChange(this.props.attr,m)},InputProps:{sx:{backgroundColor:"transparent",px:1,width:"50%"}},sx:{mb:2}}),e.jsx(t.Box,{sx:{mt:2},children:e.jsx(t.TextField,{variant:"standard",label:this.getText("unlock_pin"),type:o.showPin?"text":"password",value:p.pin!==void 0&&p.pin!==null?String(p.pin):"",onChange:d=>{const m=d.target.value.replace(/[^0-9]/g,""),n=m?parseInt(m,10):0,y=i.map(C=>C.uniqueName===s?{...C,pin:n}:C);this.setState({entries:y}),this.onChange(this.props.attr,y)},InputProps:{sx:{backgroundColor:"transparent",px:1},endAdornment:e.jsx(t.InputAdornment,{position:"end",children:e.jsx(t.IconButton,{"aria-label":o.showPin?"hide-pin":"show-pin",onClick:()=>{o.showPin=!o.showPin,this.setState({})},edge:"end",size:"small",children:o.showPin?e.jsx(M,{fontSize:"small"}):e.jsx(E,{fontSize:"small"})})})}})}),e.jsxs(t.Box,{sx:{mt:2},children:[e.jsx(t.FormControlLabel,{control:e.jsx(t.Checkbox,{checked:!!p.hidden,onChange:(d,l)=>{const m=i.map(n=>n.uniqueName===s?{...n,hidden:l}:n);this.setState({entries:m}),this.onChange(this.props.attr,m)}}),label:this.getText("hidden")}),e.jsx(t.Box,{sx:{mt:2},children:e.jsxs(t.FormControl,{component:"fieldset",children:[e.jsx(t.Typography,{variant:"subtitle2",sx:{mb:1},children:this.getText("alwaysOn")}),e.jsxs(t.RadioGroup,{row:!0,value:(p==null?void 0:p.alwaysOn)||"none",onChange:(d,l)=>{const m=i.map(n=>n.uniqueName===s?{...n,alwaysOn:l}:n);this.setState({entries:m}),this.onChange(this.props.attr,m)},children:[e.jsx(t.FormControlLabel,{value:"none",control:e.jsx(t.Radio,{}),label:this.getText("alwaysOn_none")}),e.jsx(t.FormControlLabel,{value:"always",control:e.jsx(t.Radio,{}),label:this.getText("alwaysOn_always")}),e.jsx(t.FormControlLabel,{value:"ignore",control:e.jsx(t.Radio,{}),label:this.getText("alwaysOn_ignore")})]})]})})]}),p.alarmType==="alarm"&&e.jsxs(t.Box,{sx:{mt:2},children:[e.jsx(t.Box,{sx:{display:"grid",gridTemplateColumns:"1fr",gap:2},children:[1,2,3,4].map(d=>{const l=`button${d}`;return e.jsxs(t.Box,{children:[e.jsx(t.Typography,{variant:"caption",color:"text.secondary",sx:{mb:.5},children:this.getText(`unlock_button${d}_label`)}),e.jsx(t.TextField,{fullWidth:!0,variant:"standard",placeholder:this.getText(`unlock_button${d}_placeholder`),value:p[l]??"",onChange:m=>{const n=m.target.value,y=i.map(C=>C.uniqueName===s?{...C,[l]:n}:C);this.setState({entries:y}),this.onChange(this.props.attr,y)},InputProps:{disableUnderline:!0,sx:{backgroundColor:"transparent",px:1,"& input::placeholder":{color:"text.disabled"}}}})]},d)})}),e.jsx(t.Box,{sx:{mt:1},children:e.jsx(t.FormControlLabel,{control:e.jsx(t.Checkbox,{checked:!!p.approved,onChange:(d,l)=>{const m=i.map(n=>n.uniqueName===s?{...n,approved:l}:n);this.setState({entries:m}),this.onChange(this.props.attr,m)}}),label:this.getText("unlock_approved")})})]}),p.alarmType==="unlock"&&e.jsxs(t.Box,{sx:{mt:2},children:[e.jsx(t.Typography,{variant:"caption",color:"text.secondary",sx:{mb:.5},children:this.getText("unlock_setnavi_hint")}),e.jsxs(t.Select,{variant:"standard",displayEmpty:!0,value:p.setNavi??"",onChange:d=>{const l=String(d.target.value),m=i.map(n=>n.uniqueName===s?{...n,setNavi:l}:n);this.setState({entries:m}),this.onChange(this.props.attr,m)},sx:{backgroundColor:"transparent",px:1,width:"60%"},children:[e.jsx(t.MenuItem,{value:"",children:e.jsx("em",{children:this.getText("unlock_setnavi_placeholder")})}),(this.state.pagesList||[]).filter(d=>typeof d=="string"&&!d.startsWith("///")&&d!==s).map(d=>e.jsx(t.MenuItem,{value:d,children:d},d)),p.setNavi&&p.setNavi!==s&&!(this.state.pagesList||[]).includes(p.setNavi)&&e.jsx(t.MenuItem,{value:p.setNavi,children:p.setNavi},`custom-${p.setNavi}`)]})]})]}):null})()}):e.jsxs(t.Box,{children:[e.jsx(t.Typography,{variant:"h6",children:this.getText("select_item")}),e.jsx(t.Box,{sx:{mt:2},children:e.jsx(t.Typography,{variant:"body2",color:"text.secondary",children:this.getText("select_description")})})]})})}),e.jsx(B,{...this.props,widthPercent:30,uniqueName:o.selected,currentAssignments:((f=i.find(s=>s.uniqueName===o.selected))==null?void 0:f.navigationAssignment)||[],oContext:this.props.oContext,onAssign:(s,p)=>{const d=i.map(l=>l.uniqueName===s?{...l,navigationAssignment:p}:l);this.setState({entries:d}),this.onChange(this.props.attr,d)}})]})]})}}const W=R(O);class z extends _.ConfigGeneric{_local=null;pagesRetryTimeout;constructor(a){super(a);const h=_.ConfigGeneric.getValue(a.data,a.attr);this.state={...this.state,entries:Array.isArray(h)?h:[],confirmDeleteOpen:!1,confirmDeleteName:null,alive:!1,pagesRetryCount:0}}componentWillUnmount(){this.pagesRetryTimeout&&clearTimeout(this.pagesRetryTimeout);const a=this.props.oContext.instance??"0";this.props.oContext.socket.unsubscribeState(`system.adapter.${j}.${a}.alive`,this.onAliveChanged)}async componentDidMount(){super.componentDidMount();const a=this.props.oContext.instance??"0",h=`system.adapter.${j}.${a}.alive`;try{const c=await this.props.oContext.socket.getState(h),i=!!(c!=null&&c.val);this.setState({alive:i}),await this.props.oContext.socket.subscribeState(h,this.onAliveChanged),i&&await this.loadPagesList()}catch(c){console.error("[QRPage] Failed to get alive state or subscribe:",c),this.setState({alive:!1})}}onAliveChanged=(a,h)=>{const c=this.state.alive,i=h?!!h.val:!1;c!==i&&(this.setState({alive:i}),!c&&i&&(!this.state.pagesList||this.state.pagesList.length===0)&&this.loadPagesList(),c&&!i&&this.pagesRetryTimeout&&(clearTimeout(this.pagesRetryTimeout),this.pagesRetryTimeout=void 0))};async loadPagesList(){if(!this.state.alive){console.log("[QRPage] Adapter not alive, skipping pages load");return}const a=[];if(this.props.oContext&&this.props.oContext.socket){const h=this.props.oContext.instance??"0",c=`${j}.${h}`;try{const i=await this.props.oContext.socket.sendTo(c,I,null);let u=[];Array.isArray(i)?u=i:i&&Array.isArray(i.result)&&(u=i.result);for(const o of u)a.push(o);if(u.length===0){const o=this.state.pagesRetryCount||0,r=3e3;console.log(`[QRPage] Got empty pages array, retrying in ${r}ms (attempt ${o+1})`),this.setState({pagesRetryCount:o+1}),this.pagesRetryTimeout&&clearTimeout(this.pagesRetryTimeout),this.pagesRetryTimeout=setTimeout(()=>{this.state.alive?this.loadPagesList():console.log("[QRPage] Adapter went offline, cancelling pages retry")},r);return}else u.length>0&&(console.log(`[QRPage] Successfully loaded ${u.length} pages after ${this.state.pagesRetryCount||0} retries`),this.setState({pagesRetryCount:0}),this.pagesRetryTimeout&&(clearTimeout(this.pagesRetryTimeout),this.pagesRetryTimeout=void 0))}catch(i){const u=this.state.pagesRetryCount||0,o=3e3;console.log(`[QRPage] Error loading pages, retrying in ${o}ms (attempt ${u+1}): ${String(i)}`),this.setState({pagesRetryCount:u+1}),this.pagesRetryTimeout&&clearTimeout(this.pagesRetryTimeout),this.pagesRetryTimeout=setTimeout(()=>{this.state.alive?this.loadPagesList():console.log("[QRPage] Adapter went offline, cancelling pages retry after error")},o);return}}else{console.log("[QRPage] No socket available for sendTo");return}this.setState({pagesList:Array.from(new Set(a))})}renderItem(a,h,c){var f;const i=this.state.entries||[],u=Array.from(new Set(i.map(s=>s.uniqueName))).filter(Boolean);this._local||(this._local={newName:"",selected:u[0]||"",showPassword:!1});const o=this._local,r=()=>{const s=(o.newName||"").trim();if(!s)return;const p={card:"cardQR",uniqueName:s,headline:s,SSIDURLTEL:"",wlanhidden:!1,pwdhidden:!1,setState:"",selType:0},d=[...i,p];this.setState({entries:d}),this.onChange(this.props.attr,d),o.newName="",o.selected=s},x=()=>{const s=o.selected;s&&this.setState({confirmDeleteOpen:!0,confirmDeleteName:s})},v=()=>{this.setState({confirmDeleteOpen:!1,confirmDeleteName:null})},g=()=>{const s=this.state.confirmDeleteName;if(!s){v();return}const p=i.filter(l=>l.uniqueName!==s);this.setState({entries:p,confirmDeleteOpen:!1,confirmDeleteName:null}),this.onChange(this.props.attr,p);const d=Array.from(new Set(p.map(l=>l.uniqueName))).filter(Boolean);o.selected=d[0]||"",this.setState({})};return e.jsxs(t.Box,{sx:{height:"calc(100vh - 64px)",display:"flex",flexDirection:{xs:"column",md:"row"},p:1},children:[e.jsxs(t.Box,{sx:{width:{xs:"100%",md:"20%"},pr:{xs:0,md:1},display:"flex",flexDirection:"column",gap:1},children:[e.jsx(t.Typography,{variant:"h6",sx:{mb:1,fontWeight:600,color:"primary.main",fontSize:"1rem"},children:this.getText("pages")}),e.jsx(t.Paper,{sx:{p:1,backgroundColor:"transparent"},elevation:0,children:e.jsxs(t.Box,{sx:{display:"flex",gap:1},children:[e.jsx(t.TextField,{"aria-label":"new-name",label:this.getText("new_page"),value:o.newName,onChange:s=>{o.newName=s.target.value,this.setState({})},variant:"standard",placeholder:this.getText("New item"),InputProps:{sx:{backgroundColor:"transparent",px:1}},sx:{flex:1,"& .MuiInput-underline:before":{borderBottomColor:"primary.main"},"& .MuiInput-underline:hover:before":{borderBottomColor:"primary.main"},"& .MuiInput-underline:after":{borderBottomColor:"primary.main"},"& .MuiInputLabel-root":{color:"primary.main"},"& .MuiInputLabel-root.Mui-focused":{color:"primary.main"}}}),e.jsx(t.Button,{size:"small",variant:"contained",onClick:r,disabled:(()=>{const s=(o.newName||"").trim();return!s||u.includes(s)})(),children:"+"})]})}),e.jsx(t.Paper,{sx:{overflow:"auto",p:1,backgroundColor:"transparent"},elevation:0,children:u.length===0?e.jsx(t.Typography,{variant:"body2",color:"text.secondary",children:this.getText("No items")}):u.map(s=>e.jsx(t.Box,{onClick:()=>{o.selected=s,this.setState({})},sx:{p:1,borderRadius:1,cursor:"pointer",backgroundColor:o.selected===s?"action.selected":"transparent",mb:.5},children:e.jsx(t.Typography,{variant:"body2",children:s})},s))}),e.jsx(t.Box,{sx:{display:"flex",justifyContent:"flex-end"},children:e.jsx(t.Button,{size:"small",color:"error",variant:"outlined",onClick:x,disabled:!o.selected,children:"-"})}),e.jsx(t.Divider,{sx:{my:1}}),e.jsx(t.Box,{sx:{mb:2},children:e.jsx("a",{href:"https://github.com/ticaki/ioBroker.nspanel-lovelace-ui/wiki/PageQR",target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"none",color:"inherit",fontSize:"0.875rem"},children:e.jsx(t.Typography,{variant:"body2",sx:{color:"primary.main",textDecoration:"underline",cursor:"pointer","&:hover":{opacity:.8}},children:this.getText("documentation")})})})]}),e.jsx(L,{open:!!this.state.confirmDeleteOpen,onClose:v,onConfirm:g,title:this.getText("delete_confirm_title"),description:this.getText("delete_confirm_text")+(this.state.confirmDeleteName?`: ${this.state.confirmDeleteName}`:""),cancelText:this.getText("Cancel"),confirmText:this.getText("Delete"),ariaTitleId:"qr-delete-confirm-title",ariaDescId:"qr-delete-confirm-description"}),e.jsxs(t.Box,{sx:{width:{xs:"100%",md:"90%"},pl:{xs:0,md:2},mt:{xs:2,md:0},display:"flex",flexDirection:{xs:"column",md:"row"},gap:1,position:"relative"},children:[e.jsx(t.Box,{sx:{width:{xs:"100%",md:"95%"},borderLeft:{xs:"none",md:"1px solid"},borderColor:"divider"},children:e.jsx(t.Paper,{sx:{height:"100%",p:2},elevation:1,children:o.selected?e.jsx(t.Box,{children:(()=>{const s=o.selected,p=i.find(d=>d.uniqueName===s);return p?e.jsxs(e.Fragment,{children:[e.jsx(t.Box,{sx:{mb:1,p:1,borderRadius:1,backgroundColor:"action.hover"},children:e.jsx(t.TextField,{fullWidth:!0,variant:"standard",type:"text",label:this.getText("unique_label"),value:s,onChange:d=>{const l=d.target.value;if(!l.trim())return;const m=i.map(n=>n.uniqueName===s?{...n,uniqueName:l}:n);this.setState({entries:m}),this.onChange(this.props.attr,m),o.selected=l},InputProps:{sx:{backgroundColor:"transparent",px:1,fontWeight:600,width:"50%"}}})}),e.jsx(t.Box,{sx:{mb:2},children:e.jsxs(t.FormControl,{component:"fieldset",children:[e.jsx(t.FormLabel,{component:"legend",children:this.getText("qr_type")}),e.jsxs(t.RadioGroup,{row:!0,value:p.selType??0,onChange:d=>{const l=parseInt(d.target.value,10),m=i.map(n=>n.uniqueName===s?{...n,selType:l}:n);this.setState({entries:m}),this.onChange(this.props.attr,m)},children:[e.jsx(t.FormControlLabel,{value:1,control:e.jsx(t.Radio,{}),label:this.getText("qr_type_wifi")}),e.jsx(t.FormControlLabel,{value:2,control:e.jsx(t.Radio,{}),label:this.getText("qr_type_url")}),e.jsx(t.FormControlLabel,{value:3,control:e.jsx(t.Radio,{}),label:this.getText("qr_type_tel")})]})]})}),e.jsx(t.TextField,{fullWidth:!0,variant:"standard",type:"text",autoComplete:"off",label:this.getText("headline"),value:p.headline??"",onChange:d=>{const l=d.target.value,m=i.map(n=>n.uniqueName===s?{...n,headline:l}:n);this.setState({entries:m}),this.onChange(this.props.attr,m)},InputProps:{sx:{backgroundColor:"transparent",px:1,width:"50%"}},sx:{mb:2}}),e.jsx(t.TextField,{fullWidth:!0,variant:"standard",type:"text",autoComplete:"off",label:(()=>{switch(p.selType){case 1:return this.getText("qr_content_wifi");case 2:return this.getText("qr_content_url");case 3:return this.getText("qr_content_tel");default:return this.getText("qr_content")}})(),value:p.SSIDURLTEL??"",onChange:d=>{const l=d.target.value,m=i.map(n=>n.uniqueName===s?{...n,SSIDURLTEL:l}:n);this.setState({entries:m}),this.onChange(this.props.attr,m)},InputProps:{sx:{backgroundColor:"transparent",px:1}},sx:{mb:2}}),p.selType===1&&e.jsxs(t.Box,{sx:{mb:2},children:[e.jsxs(t.FormControl,{variant:"standard",sx:{mb:2,minWidth:120},children:[e.jsx(t.InputLabel,{children:this.getText("qr_wlan_type")}),e.jsxs(t.Select,{value:p.wlantype??"WPA2",onChange:d=>{const l=d.target.value,m=i.map(n=>n.uniqueName===s?{...n,wlantype:l}:n);this.setState({entries:m}),this.onChange(this.props.attr,m)},children:[e.jsx(t.MenuItem,{value:"nopass",children:"No Password"}),e.jsx(t.MenuItem,{value:"WPA",children:"WPA"}),e.jsx(t.MenuItem,{value:"WPA2",children:"WPA2"}),e.jsx(t.MenuItem,{value:"WPA3",children:"WPA3"}),e.jsx(t.MenuItem,{value:"WEP",children:"WEP"})]})]}),p.wlantype!=="nopass"&&e.jsx(t.TextField,{fullWidth:!0,variant:"standard",type:o.showPassword?"text":"password",label:this.getText("qr_password"),value:p.qrPass??"",onChange:d=>{const l=d.target.value,m=i.map(n=>n.uniqueName===s?{...n,qrPass:l}:n);this.setState({entries:m}),this.onChange(this.props.attr,m)},InputProps:{sx:{backgroundColor:"transparent",px:1},endAdornment:e.jsx(t.InputAdornment,{position:"end",children:e.jsx(t.IconButton,{"aria-label":"toggle password visibility",onClick:()=>{o.showPassword=!o.showPassword,this.setState({})},edge:"end",children:o.showPassword?e.jsx(k.VisibilityOff,{}):e.jsx(k.Visibility,{})})})},sx:{mb:2}}),e.jsxs(t.Box,{sx:{display:"flex",gap:2},children:[e.jsx(t.FormControlLabel,{control:e.jsx(t.Checkbox,{checked:!!p.wlanhidden,onChange:(d,l)=>{const m=i.map(n=>n.uniqueName===s?{...n,wlanhidden:l}:n);this.setState({entries:m}),this.onChange(this.props.attr,m)}}),label:this.getText("qr_wlan_hidden")}),e.jsx(t.FormControlLabel,{control:e.jsx(t.Checkbox,{checked:!!p.pwdhidden,onChange:(d,l)=>{const m=i.map(n=>n.uniqueName===s?{...n,pwdhidden:l}:n);this.setState({entries:m}),this.onChange(this.props.attr,m)}}),label:this.getText("qr_pwd_hidden")})]}),e.jsx(t.TextField,{fullWidth:!0,variant:"standard",type:"text",autoComplete:"off",label:this.getText("qr_set_state"),value:p.setState??"",onChange:d=>{const l=d.target.value,m=i.map(n=>n.uniqueName===s?{...n,setState:l}:n);this.setState({entries:m}),this.onChange(this.props.attr,m)},InputProps:{sx:{backgroundColor:"transparent",px:1}},sx:{mb:2}})]}),e.jsxs(t.Box,{sx:{mt:2},children:[e.jsx(t.FormControlLabel,{control:e.jsx(t.Checkbox,{checked:!!p.hidden,onChange:(d,l)=>{const m=i.map(n=>n.uniqueName===s?{...n,hidden:l}:n);this.setState({entries:m}),this.onChange(this.props.attr,m)}}),label:this.getText("hidden")}),e.jsx(t.Box,{sx:{mt:2},children:e.jsxs(t.FormControl,{component:"fieldset",children:[e.jsx(t.Typography,{variant:"subtitle2",sx:{mb:1},children:this.getText("alwaysOn")}),e.jsxs(t.RadioGroup,{row:!0,value:(p==null?void 0:p.alwaysOn)||"none",onChange:(d,l)=>{const m=i.map(n=>n.uniqueName===s?{...n,alwaysOn:l}:n);this.setState({entries:m}),this.onChange(this.props.attr,m)},children:[e.jsx(t.FormControlLabel,{value:"none",control:e.jsx(t.Radio,{}),label:this.getText("alwaysOn_none")}),e.jsx(t.FormControlLabel,{value:"always",control:e.jsx(t.Radio,{}),label:this.getText("alwaysOn_always")}),e.jsx(t.FormControlLabel,{value:"ignore",control:e.jsx(t.Radio,{}),label:this.getText("alwaysOn_ignore")})]})]})})]})]}):null})()}):e.jsxs(t.Box,{children:[e.jsx(t.Typography,{variant:"h6",children:this.getText("select_item")}),e.jsx(t.Box,{sx:{mt:2},children:e.jsx(t.Typography,{variant:"body2",color:"text.secondary",children:this.getText("select_description")})})]})})}),e.jsx(B,{...this.props,widthPercent:30,uniqueName:o.selected,currentAssignments:((f=i.find(s=>s.uniqueName===o.selected))==null?void 0:f.navigationAssignment)||[],oContext:this.props.oContext,onAssign:(s,p)=>{const d=i.map(l=>l.uniqueName===s?{...l,navigationAssignment:p}:l);this.setState({entries:d}),this.onChange(this.props.attr,d)}})]})]})}}const V=R(z),oe={NavigationView:$,IconSelect:F,IconOverview:D,UnlockPage:W,pageQR:V};export{oe as default};
