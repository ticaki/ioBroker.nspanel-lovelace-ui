import{A as y,S as _,b,w as N,c as C,d as S,C as P,a as I,I as B,W as M}from"./NavigationView-B85skvgP.js";import{j as e}from"./createSvgIcon-BAyG150Y.js";import{A as t}from"./AdminComponentEasyAccessSet__loadShare___mf_0_mui_mf_1_material__loadShare__-DP1_LQ8a.js";import{V as F,a as q,I as D}from"./VisibilityOff-Bj1py224.js";import{R as O}from"./AdminComponentEasyAccessSet__loadShare__react__loadShare__-BWvOyvAg.js";import{A as f}from"./AdminComponentEasyAccessSet__loadShare___mf_0_iobroker_mf_1_adapter_mf_2_react_mf_2_v5__loadShare__-ChLGBbzW.js";import{T as A}from"./Tooltip-QmnnkgNQ.js";import"./index-BCpyQc2W.js";import"./_commonjsHelpers-CE1G-McA.js";import"./AdminComponentEasyAccessSet__mf_v__runtimeInit__mf_v__-DmMtQNcK.js";import"./Clear-jM7oAHDI.js";import"./useTheme-Cq43vfiC.js";import"./defaultTheme-BKgYrozm.js";import"./Grow-DxyKUkMA.js";class E extends O.Component{static defaultProps={widthPercent:30};aliveTimeout;constructor(i){super(i),this.state={available:[],selectedTopic:"",added:[],assignments:i.currentAssignments||[],pagesMap:{},alive:!1,isCollapsed:!0}}checkAlive(){if(!this.props.oContext||!this.props.oContext.socket){this.aliveTimeout=setTimeout(()=>this.checkAlive(),5e3);return}const i=this.props.oContext.instance??"0",n=this.props.oContext.socket;n&&typeof n.getState=="function"?n.getState(`system.adapter.${y}.${i}.alive`).then(a=>{this.setState({alive:!!(a!=null&&a.val)}),this.aliveTimeout=setTimeout(()=>this.checkAlive(),5e3)}):this.aliveTimeout=setTimeout(()=>this.checkAlive(),5e3)}componentWillUnmount(){this.aliveTimeout&&clearTimeout(this.aliveTimeout)}async componentDidMount(){this.checkAlive(),await this.loadPanels(!1),this.applyAssignmentsFromProps(this.props.currentAssignments||[])}applyAssignmentsFromProps(i){var o;const n=(i||[]).map(m=>this.state.available.find(T=>T.panelTopic===m.topic)||{panelTopic:m.topic,friendlyName:m.topic}),a=this.state.selectedAddedTopic,d=n.find(m=>m.panelTopic===a)?a:(o=n[0])==null?void 0:o.panelTopic;console.log("[NavigationAssignmentPanel] applyAssignmentsFromProps",{nextAssignments:i,addedPanels:n,currentSelected:a,newSelected:d}),this.setState({assignments:i,added:n,selectedAddedTopic:d,selectedTopic:""});for(const m of n)this.loadPagesForPanel(m.panelTopic,!0)}componentDidUpdate(i){if(i.uniqueName!==this.props.uniqueName){const n=this.props.currentAssignments||[];this.loadPanels(!1).then(()=>{this.applyAssignmentsFromProps(n)})}else if(i.currentAssignments!==this.props.currentAssignments&&this.props.currentAssignments){const n=this.props.currentAssignments||[];this.applyAssignmentsFromProps(n)}}async loadPanels(i=!0){try{let n=[];if(this.props.fetchPanels)n=await this.props.fetchPanels();else if(this.props.oContext&&this.props.oContext.socket&&this.state.alive){const a=this.props.oContext.instance??"0",s=`${y}.${a}`;try{const d=await this.props.oContext.socket.sendTo(s,_,null);Array.isArray(d)?n=d:d&&Array.isArray(d.result)&&(n=d.result)}catch(d){console.error("[NavigationAssignmentPanel] sendTo failed",{target:s,cmd:_,error:d})}}this.setState({available:n,selectedTopic:""})}catch{this.setState({available:[],selectedTopic:""})}}doAddSelected=()=>{const{selectedTopic:i,available:n,added:a}=this.state;if(!i)return;const s=n.find(m=>m.panelTopic===i);if(!s||a.find(m=>m.panelTopic===s.panelTopic))return;const d=[...a,s],o=[...this.state.assignments,{topic:s.panelTopic,active:!1}];this.setState({added:d,assignments:o,selectedTopic:""}),this.loadPagesForPanel(s.panelTopic),this.props.onAssign&&this.props.uniqueName&&this.props.onAssign(this.props.uniqueName,o)};doRemoveSelected=()=>{const{added:i}=this.state;if(!i.length)return;const n=i.slice(0,-1),a=this.state.assignments.slice(0,-1);this.setState({added:n,assignments:a}),this.props.onAssign&&this.props.uniqueName&&this.props.onAssign(this.props.uniqueName,a)};selectAdded=i=>{this.setState({selectedAddedTopic:i}),this.loadPagesForPanel(i,!0)};async loadPagesForPanel(i,n=!1){if(i)try{if(!n&&this.state.pagesMap&&this.state.pagesMap[i])return;let a=[];if(this.props.oContext&&this.props.oContext.socket&&this.state.alive){const s=this.props.oContext.instance??"0",d=`${y}.${s}`,o={panelTopic:i};try{const m=await this.props.oContext.socket.sendTo(d,b,o);Array.isArray(m)?a=m:m&&Array.isArray(m.result)&&(a=m.result)}catch(m){console.error("[NavigationAssignmentPanel] sendTo failed",{target:d,cmd:b,payload:o,error:m})}}else console.warn("[NavigationAssignmentPanel] no oContext.socket available to sendTo");if(a.length>0){const s={...this.state.pagesMap||{}};s[i]=a,this.setState({pagesMap:s})}}catch{}}setNavigationForSelected=i=>{const{selectedAddedTopic:n,assignments:a}=this.state;if(!n)return;const s=a.findIndex(g=>g.topic===n),d=[...a],o=a[s];let m;o&&o.active?m={...o,active:!0,navigation:{...o.navigation,...i}}:m={topic:n,active:!0,navigation:{...i}},s>=0?d[s]=m:d.push(m),this.setState({assignments:d}),this.props.onAssign&&this.props.uniqueName&&this.props.onAssign(this.props.uniqueName,d)};getNavValue=(i,n)=>{var s;if(!i)return"";const a=this.state.assignments.find(d=>d.topic===i);return console.log("[NavigationAssignmentPanel] getNavValue",{topic:i,field:n,assignment:a,navigation:a==null?void 0:a.navigation,value:(s=a==null?void 0:a.navigation)==null?void 0:s[n],allAssignments:this.state.assignments}),!a||!a.navigation?"":a.navigation[n]??""};togglePanel=()=>{const i=this.state.isCollapsed;console.log("[NavigationAssignmentPanel] togglePanel",{wasCollapsed:i,willBeCollapsed:!i,currentState:this.state,props:this.props}),this.setState(n=>({isCollapsed:!n.isCollapsed})),i&&(console.log("[NavigationAssignmentPanel] Panel expanding, re-applying assignments"),this.applyAssignmentsFromProps(this.props.currentAssignments||[]))};render(){const{widthPercent:i}=this.props,{isCollapsed:n}=this.state,a=this.state.selectedAddedTopic?this.state.pagesMap[this.state.selectedAddedTopic]??[]:[];return e.jsxs(t.Box,{sx:{position:"absolute",right:0,top:0,height:"100%",width:n?"10px":`${i}%`,transition:"width 240ms ease",backgroundColor:"background.default",borderLeft:"2px solid",borderTop:"2px solid",borderColor:"secondary.main",overflow:"visible",display:"flex",flexDirection:"column",zIndex:20},children:[e.jsx(t.Box,{sx:{position:"absolute",left:"-20px",top:"50%",transform:"translateY(-50%)",width:"20px",height:"60px",backgroundColor:"secondary.main",borderRadius:"4px 0 0 4px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",zIndex:21,"&:hover":{backgroundColor:"secondary.dark"}},onClick:this.togglePanel,children:e.jsx(t.Typography,{sx:{color:"secondary.contrastText",fontSize:"14px",fontWeight:"bold",transform:"rotate(-90deg)",whiteSpace:"nowrap"},children:n?"⏶":"⏷"})}),e.jsxs(t.Box,{sx:{p:1,height:"100%",display:"flex",flexDirection:"column",width:n?"0%":"100%",overflow:"hidden",transition:"width 240ms ease"},children:[e.jsx(t.Typography,{variant:"h6",sx:{mb:1,fontWeight:600,color:"primary.main",fontSize:"1rem"},children:f.I18n.t("navigation_panel")}),e.jsxs(t.Box,{sx:{display:"flex",gap:1,alignItems:"center",mb:1},children:[e.jsxs(t.Select,{size:"small",variant:"standard",value:this.state.selectedTopic,onOpen:()=>{this.loadPanels()},onChange:s=>this.setState({selectedTopic:String(s.target.value)}),sx:{flex:1,backgroundColor:"transparent",minHeight:40,"& .MuiSelect-select":{backgroundColor:"transparent",display:"flex",alignItems:"center",height:40}},displayEmpty:!0,children:[e.jsx(t.MenuItem,{value:"",children:e.jsx("em",{children:"—"})}),this.state.available.map(s=>e.jsx(t.MenuItem,{value:s.panelTopic,children:s.friendlyName},s.panelTopic))]}),e.jsx(t.Button,{size:"small",variant:"contained",sx:{minWidth:32,padding:"4px 8px"},onClick:this.doAddSelected,disabled:!this.state.selectedTopic,children:"+"})]}),(()=>{const m=Math.max(1,(this.state.added.length||0)+1)*40;return e.jsx(t.Box,{children:this.state.added.length===0?e.jsxs(t.Typography,{variant:"body2",color:"text.secondary",children:["No panels added",e.jsx("br",{})]}):e.jsx("div",{style:{height:m,overflow:"auto"},children:e.jsx(t.List,{dense:!0,children:this.state.added.map(g=>e.jsx(t.ListItem,{component:"div",children:e.jsx(t.ListItemButton,{selected:this.state.selectedAddedTopic===g.panelTopic,onClick:()=>this.selectAdded(g.panelTopic),children:e.jsx(t.ListItemText,{primary:g.friendlyName})})},g.panelTopic))})})})})(),e.jsx(t.Box,{sx:{display:"flex",gap:1,justifyContent:"flex-end",mt:1},children:e.jsx(t.Button,{size:"small",color:"error",variant:"contained",onClick:this.doRemoveSelected,disabled:this.state.added.length===0,sx:{minWidth:32,padding:"4px 8px"},children:"-"})}),e.jsx(t.Divider,{sx:{my:1}}),e.jsxs(t.Box,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:1,mt:1},children:[e.jsxs(t.Box,{children:[e.jsx(t.Box,{sx:{display:"flex",alignItems:"center",mb:.5},children:e.jsx(A,{title:f.I18n.t("nav_prev_tooltip"),children:e.jsx(t.Typography,{variant:"caption",color:"text.secondary",sx:{mr:.5},children:"prev"})})}),e.jsxs(t.Select,{size:"small",displayEmpty:!0,"aria-label":"prev",value:this.getNavValue(this.state.selectedAddedTopic,"prev"),onOpen:()=>{this.state.selectedAddedTopic&&this.loadPagesForPanel(this.state.selectedAddedTopic,!0)},onChange:s=>this.setNavigationForSelected({prev:String(s.target.value)||void 0}),sx:{width:"100%"},children:[e.jsx(t.MenuItem,{value:"",children:this.state.selectedAddedTopic?e.jsx("em",{children:"—"}):e.jsx("em",{children:f.I18n.t("select_panel_first")})}),a.filter(s=>s!==this.props.uniqueName).map(s=>e.jsx(t.MenuItem,{value:s,children:s},`prev-${s}`))]})]}),e.jsxs(t.Box,{children:[e.jsx(t.Box,{sx:{display:"flex",alignItems:"center",mb:.5},children:e.jsx(A,{title:f.I18n.t("nav_next_tooltip"),children:e.jsx(t.Typography,{variant:"caption",color:"text.secondary",sx:{mr:.5},children:"next"})})}),e.jsxs(t.Select,{size:"small",displayEmpty:!0,"aria-label":"next",value:this.getNavValue(this.state.selectedAddedTopic,"next"),onOpen:()=>{this.state.selectedAddedTopic&&this.loadPagesForPanel(this.state.selectedAddedTopic,!0)},onChange:s=>this.setNavigationForSelected({next:String(s.target.value)||void 0}),sx:{width:"100%"},children:[e.jsx(t.MenuItem,{value:"",children:this.state.selectedAddedTopic?e.jsx("em",{children:"—"}):e.jsx("em",{children:f.I18n.t("select_panel_first")})}),a.filter(s=>s!==this.props.uniqueName&&!s.startsWith("///")).map(s=>e.jsx(t.MenuItem,{value:s,children:s},`next-${s}`))]})]}),e.jsxs(t.Box,{children:[e.jsx(t.Typography,{variant:"caption",color:"text.secondary",sx:{mb:.5,display:"block"},children:"home"}),e.jsxs(t.Select,{size:"small",displayEmpty:!0,"aria-label":"home",value:this.getNavValue(this.state.selectedAddedTopic,"home"),onOpen:()=>{this.state.selectedAddedTopic&&this.loadPagesForPanel(this.state.selectedAddedTopic,!0)},onChange:s=>this.setNavigationForSelected({home:String(s.target.value)||void 0}),sx:{width:"100%"},children:[e.jsx(t.MenuItem,{value:"",children:e.jsx("em",{children:"—"})}),a.filter(s=>s!==this.props.uniqueName).map(s=>e.jsx(t.MenuItem,{value:s,children:s},`home-${s}`))]})]}),e.jsxs(t.Box,{children:[e.jsx(t.Typography,{variant:"caption",color:"text.secondary",sx:{mb:.5,display:"block"},children:"parent"}),e.jsxs(t.Select,{size:"small",displayEmpty:!0,"aria-label":"parent",value:this.getNavValue(this.state.selectedAddedTopic,"parent"),onOpen:()=>{this.state.selectedAddedTopic&&this.loadPagesForPanel(this.state.selectedAddedTopic,!0)},onChange:s=>this.setNavigationForSelected({parent:String(s.target.value)||void 0}),sx:{width:"100%"},children:[e.jsx(t.MenuItem,{value:"",children:e.jsx("em",{children:"—"})}),a.filter(s=>s!==this.props.uniqueName).map(s=>e.jsx(t.MenuItem,{value:s,children:s},`parent-${s}`))]})]})]}),(()=>{if(!this.state.selectedAddedTopic)return null;const s=this.getNavValue(this.state.selectedAddedTopic,"next"),d=this.getNavValue(this.state.selectedAddedTopic,"prev");return!s&&!d?e.jsxs(e.Fragment,{children:[e.jsx(t.Divider,{sx:{my:2}}),e.jsx(t.Typography,{variant:"caption",color:"text.secondary",sx:{fontStyle:"italic",lineHeight:1.4},children:f.I18n.t("nav_target_only_notice")})]}):null})()]})]})}}class R extends C.ConfigGeneric{_local=null;aliveTimeout;constructor(i){super(i);const n=C.ConfigGeneric.getValue(i.data,i.attr);this.state={...this.state,entries:Array.isArray(n)?n:[],confirmDeleteOpen:!1,confirmDeleteName:null,alive:!1}}checkAlive(){const i=this.props.oContext.instance??"0",n=this.props.oContext.socket;n&&typeof n.getState=="function"?n.getState(`system.adapter.${y}.${i}.alive`).then(a=>{this.setState({alive:!!(a!=null&&a.val)}),this.aliveTimeout=setTimeout(()=>this.checkAlive(),5e3)}):this.aliveTimeout=setTimeout(()=>this.checkAlive(),5e3)}componentWillUnmount(){this.aliveTimeout&&clearTimeout(this.aliveTimeout)}async componentDidMount(){this.checkAlive();const i=[];if(this.props.oContext&&this.props.oContext.socket&&this.state.alive){const n=this.props.oContext.instance??"0",a=`${y}.${n}`;try{const s=await this.props.oContext.socket.sendTo(a,S,null);let d=[];Array.isArray(s)?d=s:s&&Array.isArray(s.result)&&(d=s.result);for(const o of d)i.push(o)}catch{}}this.setState({pagesList:Array.from(new Set(i))})}renderItem(i,n,a){var j;const s=this.state.entries||[],d=Array.from(new Set(s.map(r=>r.uniqueName))).filter(Boolean);this._local||(this._local={newName:"",selected:d[0]||"",showPin:!1});const o=this._local,m=()=>{const r=(o.newName||"").trim();if(!r)return;const p={uniqueName:r,headline:r,button1:"",button2:"",button3:"",button4:"",pin:0},l=[...s,p];this.setState({entries:l}),this.onChange(this.props.attr,l),o.newName="",o.selected=r},g=()=>{const r=o.selected;r&&this.setState({confirmDeleteOpen:!0,confirmDeleteName:r})},T=()=>{this.setState({confirmDeleteOpen:!1,confirmDeleteName:null})},k=()=>{const r=this.state.confirmDeleteName;if(!r){T();return}const p=s.filter(h=>h.uniqueName!==r);this.setState({entries:p,confirmDeleteOpen:!1,confirmDeleteName:null}),this.onChange(this.props.attr,p);const l=Array.from(new Set(p.map(h=>h.uniqueName))).filter(Boolean);o.selected=l[0]||"",this.setState({})};return e.jsxs(t.Box,{sx:{height:"calc(100vh - 64px)",display:"flex",p:1},children:[e.jsxs(t.Box,{sx:{width:"20%",pr:1,display:"flex",flexDirection:"column",gap:1},children:[e.jsx(t.Typography,{variant:"h6",sx:{mb:1,fontWeight:600,color:"primary.main",fontSize:"1rem"},children:this.getText("pages")}),e.jsx(t.Paper,{sx:{p:1,backgroundColor:"transparent"},elevation:0,children:e.jsxs(t.Box,{sx:{display:"flex",gap:1},children:[e.jsx(t.TextField,{"aria-label":"new-name",label:this.getText("new_page"),value:o.newName,onChange:r=>{o.newName=r.target.value,this.setState({})},variant:"standard",placeholder:this.getText("New item"),InputProps:{sx:{backgroundColor:"transparent",px:1}},sx:{flex:1,"& .MuiInput-underline:before":{borderBottomColor:"primary.main"},"& .MuiInput-underline:hover:before":{borderBottomColor:"primary.main"},"& .MuiInput-underline:after":{borderBottomColor:"primary.main"},"& .MuiInputLabel-root":{color:"primary.main"},"& .MuiInputLabel-root.Mui-focused":{color:"primary.main"}}}),e.jsx(t.Button,{size:"small",variant:"contained",onClick:m,disabled:(()=>{const r=(o.newName||"").trim();return!r||d.includes(r)})(),children:"+"})]})}),(()=>{const l=Math.max(3,d.length||0),h=(typeof window<"u"?window.innerHeight:800)-64,u=Math.floor(h*.8),c=Math.min(l*40,u);return e.jsx(t.Paper,{sx:{height:c,overflow:"auto",p:1,backgroundColor:"transparent"},elevation:0,children:d.length===0?e.jsx(t.Typography,{variant:"body2",color:"text.secondary",children:this.getText("No items")}):d.map(x=>e.jsx(t.Box,{onClick:()=>{o.selected=x,this.setState({})},sx:{p:1,borderRadius:1,cursor:"pointer",backgroundColor:o.selected===x?"action.selected":"transparent",mb:.5},children:e.jsx(t.Typography,{variant:"body2",children:x})},x))})})(),e.jsx(t.Box,{sx:{display:"flex",justifyContent:"flex-end"},children:e.jsx(t.Button,{size:"small",color:"error",variant:"outlined",onClick:g,disabled:!o.selected,children:"-"})}),e.jsx(t.Divider,{sx:{my:1}}),e.jsx(t.Box,{sx:{mb:2},children:e.jsx("a",{href:"https://github.com/ticaki/ioBroker.nspanel-lovelace-ui/wiki/pageUnlock",target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"none",color:"inherit",fontSize:"0.875rem"},children:e.jsx(t.Typography,{variant:"body2",sx:{color:"primary.main",textDecoration:"underline",cursor:"pointer","&:hover":{opacity:.8}},children:this.getText("documentation")})})})]}),e.jsx(P,{open:!!this.state.confirmDeleteOpen,onClose:T,onConfirm:k,title:this.getText("unlock_delete_confirm_title"),description:this.getText("unlock_delete_confirm_text")+(this.state.confirmDeleteName?`: ${this.state.confirmDeleteName}`:""),cancelText:this.getText("Cancel"),confirmText:this.getText("Delete"),ariaTitleId:"unlock-delete-confirm-title",ariaDescId:"unlock-delete-confirm-description"}),e.jsxs(t.Box,{sx:{width:"90%",pl:2,display:"flex",gap:1,position:"relative"},children:[e.jsx(t.Box,{sx:{width:"95%",borderLeft:"1px solid",borderColor:"divider"},children:e.jsx(t.Paper,{sx:{height:"100%",p:2},elevation:1,children:o.selected?e.jsx(t.Box,{children:(()=>{const r=o.selected,p=s.find(l=>l.uniqueName===r);return p?e.jsxs(e.Fragment,{children:[e.jsx(t.Box,{sx:{mb:1,p:1,borderRadius:1,backgroundColor:"action.hover"},children:e.jsx(t.TextField,{fullWidth:!0,variant:"standard",type:"text",label:this.getText("unlock_unique_label"),value:r,onChange:l=>{const h=l.target.value;if(!h.trim())return;const u=s.map(c=>c.uniqueName===r?{...c,uniqueName:h}:c);this.setState({entries:u}),this.onChange(this.props.attr,u),o.selected=h},InputProps:{sx:{backgroundColor:"transparent",px:1,fontWeight:600,width:"50%"}}})}),e.jsx(t.Box,{sx:{mb:1},children:e.jsxs(t.FormControl,{component:"fieldset",children:[e.jsx(t.Typography,{variant:"subtitle2",sx:{mb:1},children:this.getText("unlock_type")}),e.jsxs(t.RadioGroup,{row:!0,value:(p==null?void 0:p.alarmType)||"",onChange:(l,h)=>{const u=s.map(c=>c.uniqueName===r?{...c,alarmType:h}:c);this.setState({entries:u}),this.onChange(this.props.attr,u)},children:[e.jsx(t.FormControlLabel,{value:"alarm",control:e.jsx(t.Radio,{}),label:this.getText("unlock_alarm")}),e.jsx(t.FormControlLabel,{value:"unlock",control:e.jsx(t.Radio,{}),label:this.getText("unlock_unlock")})]})]})}),e.jsx(t.TextField,{fullWidth:!0,variant:"standard",type:"text",autoComplete:"off",label:this.getText("unlock_headline"),value:p.headline??"",onChange:l=>{const h=l.target.value,u=s.map(c=>c.uniqueName===r?{...c,headline:h}:c);this.setState({entries:u}),this.onChange(this.props.attr,u)},InputProps:{sx:{backgroundColor:"transparent",px:1,width:"50%"}},sx:{mb:2}}),e.jsx(t.Box,{sx:{mt:2},children:e.jsx(t.TextField,{variant:"standard",label:this.getText("unlock_pin"),type:o.showPin?"text":"password",value:p.pin!==void 0&&p.pin!==null?String(p.pin):"",onChange:l=>{const u=l.target.value.replace(/[^0-9]/g,""),c=u?parseInt(u,10):0,x=s.map(v=>v.uniqueName===r?{...v,pin:c}:v);this.setState({entries:x}),this.onChange(this.props.attr,x)},InputProps:{sx:{backgroundColor:"transparent",px:1},endAdornment:e.jsx(t.InputAdornment,{position:"end",children:e.jsx(t.IconButton,{"aria-label":o.showPin?"hide-pin":"show-pin",onClick:()=>{o.showPin=!o.showPin,this.setState({})},edge:"end",size:"small",children:o.showPin?e.jsx(F,{fontSize:"small"}):e.jsx(q,{fontSize:"small"})})})}})}),e.jsxs(t.Box,{sx:{mt:2},children:[e.jsx(t.FormControlLabel,{control:e.jsx(t.Checkbox,{checked:!!p.hidden,onChange:(l,h)=>{const u=s.map(c=>c.uniqueName===r?{...c,hidden:h}:c);this.setState({entries:u}),this.onChange(this.props.attr,u)}}),label:this.getText("unlock_hidden")}),e.jsx(t.Box,{sx:{mt:2},children:e.jsxs(t.FormControl,{component:"fieldset",children:[e.jsx(t.Typography,{variant:"subtitle2",sx:{mb:1},children:this.getText("unlock_alwaysOn")}),e.jsxs(t.RadioGroup,{row:!0,value:(p==null?void 0:p.alwaysOn)||"none",onChange:(l,h)=>{const u=s.map(c=>c.uniqueName===r?{...c,alwaysOn:h}:c);this.setState({entries:u}),this.onChange(this.props.attr,u)},children:[e.jsx(t.FormControlLabel,{value:"none",control:e.jsx(t.Radio,{}),label:this.getText("unlock_alwaysOn_none")}),e.jsx(t.FormControlLabel,{value:"always",control:e.jsx(t.Radio,{}),label:this.getText("unlock_alwaysOn_always")}),e.jsx(t.FormControlLabel,{value:"ignore",control:e.jsx(t.Radio,{}),label:this.getText("unlock_alwaysOn_ignore")})]})]})})]}),p.alarmType==="alarm"&&e.jsxs(t.Box,{sx:{mt:2},children:[e.jsx(t.Box,{sx:{display:"grid",gridTemplateColumns:"1fr",gap:2},children:[1,2,3,4].map(l=>{const h=`button${l}`;return e.jsxs(t.Box,{children:[e.jsx(t.Typography,{variant:"caption",color:"text.secondary",sx:{mb:.5},children:this.getText(`unlock_button${l}_label`)}),e.jsx(t.TextField,{fullWidth:!0,variant:"standard",placeholder:this.getText(`unlock_button${l}_placeholder`),value:p[h]??"",onChange:u=>{const c=u.target.value,x=s.map(v=>v.uniqueName===r?{...v,[h]:c}:v);this.setState({entries:x}),this.onChange(this.props.attr,x)},InputProps:{disableUnderline:!0,sx:{backgroundColor:"transparent",px:1,"& input::placeholder":{color:"text.disabled"}}}})]},l)})}),e.jsx(t.Box,{sx:{mt:1},children:e.jsx(t.FormControlLabel,{control:e.jsx(t.Checkbox,{checked:!!p.approved,onChange:(l,h)=>{const u=s.map(c=>c.uniqueName===r?{...c,approved:h}:c);this.setState({entries:u}),this.onChange(this.props.attr,u)}}),label:this.getText("unlock_approved")})})]}),p.alarmType==="unlock"&&e.jsxs(t.Box,{sx:{mt:2},children:[e.jsx(t.Typography,{variant:"caption",color:"text.secondary",sx:{mb:.5},children:this.getText("unlock_setnavi_hint")}),e.jsxs(t.Select,{variant:"standard",displayEmpty:!0,value:p.setNavi??"",onChange:l=>{const h=String(l.target.value),u=s.map(c=>c.uniqueName===r?{...c,setNavi:h}:c);this.setState({entries:u}),this.onChange(this.props.attr,u)},sx:{backgroundColor:"transparent",px:1,width:"60%"},children:[e.jsx(t.MenuItem,{value:"",children:e.jsx("em",{children:this.getText("unlock_setnavi_placeholder")})}),(this.state.pagesList||[]).filter(l=>typeof l=="string"&&!l.startsWith("///")&&l!==r).map(l=>e.jsx(t.MenuItem,{value:l,children:l},l)),p.setNavi&&p.setNavi!==r&&!(this.state.pagesList||[]).includes(p.setNavi)&&e.jsx(t.MenuItem,{value:p.setNavi,children:p.setNavi},`custom-${p.setNavi}`)]})]})]}):null})()}):e.jsxs(t.Box,{children:[e.jsx(t.Typography,{variant:"h6",children:this.getText("unlock_select_item")}),e.jsx(t.Box,{sx:{mt:2},children:e.jsx(t.Typography,{variant:"body2",color:"text.secondary",children:this.getText("unlock_select_description")})})]})})}),e.jsx(E,{widthPercent:30,uniqueName:o.selected,currentAssignments:((j=s.find(r=>r.uniqueName===o.selected))==null?void 0:j.navigationAssignment)||[],oContext:this.props.oContext,onAssign:(r,p)=>{const l=s.map(h=>h.uniqueName===r?{...h,navigationAssignment:p}:h);this.setState({entries:l}),this.onChange(this.props.attr,l)},children:e.jsx(t.Paper,{sx:{height:"100%",p:2,backgroundColor:"transparent"},elevation:0,children:e.jsxs(t.Box,{children:[e.jsx(t.Typography,{variant:"subtitle2",sx:{mb:1},children:this.getText("unlock_unique_label")}),e.jsx(t.Typography,{variant:"body1",sx:{fontWeight:600},children:o.selected||this.getText("unlock_select_item")}),e.jsx(D,{fontSize:"small",color:"action",sx:{mt:1}})]})})})]})]})}}const $=N(R),te={NavigationView:M,IconSelect:B,IconOverview:I,UnlockPage:$};export{te as default};
