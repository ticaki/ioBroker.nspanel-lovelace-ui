import{w as b,A as g,C as j,a as C,I as y,W as T}from"./NavigationView-B2KVyPc0.js";import{j as e}from"./createSvgIcon-BAyG150Y.js";import{A as t}from"./AdminComponentEasyAccessSet__loadShare___mf_0_mui_mf_1_material__loadShare__-DP1_LQ8a.js";import{V as k,a as w}from"./VisibilityOff-Cds6_I-g.js";import"./AdminComponentEasyAccessSet__loadShare__react__loadShare__-BWvOyvAg.js";import"./_commonjsHelpers-CE1G-McA.js";import"./AdminComponentEasyAccessSet__mf_v__runtimeInit__mf_v__-DmMtQNcK.js";import"./hoist-non-react-statics.cjs-CIQIDtQQ.js";import"./Clear-jM7oAHDI.js";import"./AdminComponentEasyAccessSet__loadShare___mf_0_iobroker_mf_1_adapter_mf_2_react_mf_2_v5__loadShare__-ChLGBbzW.js";import"./useTheme-Cq43vfiC.js";import"./defaultTheme-BKgYrozm.js";class N extends g.ConfigGeneric{constructor(p){super(p);const m=g.ConfigGeneric.getValue(p.data,p.attr);this.state={...this.state,entries:Array.isArray(m)?m:[],confirmDeleteOpen:!1,confirmDeleteName:null}}renderItem(p,m,D){const d=this.state.entries||[],x=Array.from(new Set(d.map(n=>n.uniqueName))).filter(Boolean);this._local||(this._local={newName:"",selected:x[0]||"",showPin:!1});const r=this._local,f=()=>{const n=(r.newName||"").trim();if(!n)return;const a={uniqueName:n,headline:n,button1:"",button2:"",button3:"",button4:"",pin:0},o=[...d,a];this.setState({entries:o}),this.onChange(this.props.attr,o),r.newName="",r.selected=n},_=()=>{const n=r.selected;n&&this.setState({confirmDeleteOpen:!0,confirmDeleteName:n})},u=()=>{this.setState({confirmDeleteOpen:!1,confirmDeleteName:null})},v=()=>{const n=this.state.confirmDeleteName;if(!n){u();return}const a=d.filter(l=>l.uniqueName!==n);this.setState({entries:a,confirmDeleteOpen:!1,confirmDeleteName:null}),this.onChange(this.props.attr,a);const o=Array.from(new Set(a.map(l=>l.uniqueName))).filter(Boolean);r.selected=o[0]||"",this.setState({})};return e.jsxs(t.Box,{sx:{height:"calc(100vh - 64px)",display:"flex",p:1},children:[e.jsxs(t.Box,{sx:{width:"20%",pr:1,display:"flex",flexDirection:"column",gap:1},children:[e.jsx(t.Paper,{sx:{p:1,backgroundColor:"transparent"},elevation:0,children:e.jsxs(t.Box,{sx:{display:"flex",gap:1},children:[e.jsx(t.TextField,{"aria-label":"new-name",value:r.newName,onChange:n=>{r.newName=n.target.value,this.setState({})},variant:"standard",placeholder:this.getText("New item"),InputProps:{disableUnderline:!0,sx:{backgroundColor:"transparent",px:1}},sx:{flex:1}}),e.jsx(t.Button,{size:"small",variant:"contained",onClick:f,children:"+"})]})}),(()=>{const o=Math.max(3,x.length||0),l=(typeof window<"u"?window.innerHeight:800)-64,i=Math.floor(l*.8),s=Math.min(o*40,i);return e.jsx(t.Paper,{sx:{height:s,overflow:"auto",p:1,backgroundColor:"transparent"},elevation:0,children:x.length===0?e.jsx(t.Typography,{variant:"body2",color:"text.secondary",children:this.getText("No items")}):x.map(c=>e.jsx(t.Box,{onClick:()=>{r.selected=c,this.setState({})},sx:{p:1,borderRadius:1,cursor:"pointer",backgroundColor:r.selected===c?"action.selected":"transparent",mb:.5},children:e.jsx(t.Typography,{variant:"body2",children:c})},c))})})(),e.jsx(t.Box,{sx:{display:"flex",justifyContent:"flex-end"},children:e.jsx(t.Button,{size:"small",color:"error",variant:"outlined",onClick:_,disabled:!r.selected,children:"-"})})]}),e.jsx(j,{open:!!this.state.confirmDeleteOpen,onClose:u,onConfirm:v,title:this.getText("unlock_delete_confirm_title"),description:this.getText("unlock_delete_confirm_text")+(this.state.confirmDeleteName?`: ${this.state.confirmDeleteName}`:""),cancelText:this.getText("Cancel"),confirmText:this.getText("Delete"),ariaTitleId:"unlock-delete-confirm-title",ariaDescId:"unlock-delete-confirm-description"}),e.jsx(t.Box,{sx:{width:"80%",pl:2,borderLeft:"1px solid",borderColor:"divider"},children:e.jsx(t.Paper,{sx:{height:"100%",p:2},elevation:1,children:r.selected?e.jsx(t.Box,{children:(()=>{const n=r.selected,a=d.find(o=>o.uniqueName===n);return a?e.jsxs(e.Fragment,{children:[e.jsx(t.Box,{sx:{mb:1},children:e.jsxs(t.FormControl,{component:"fieldset",children:[e.jsx(t.Typography,{variant:"subtitle2",sx:{mb:1},children:this.getText("unlock_type")}),e.jsxs(t.RadioGroup,{row:!0,value:(a==null?void 0:a.alarmType)||"",onChange:(o,l)=>{const i=d.map(s=>s.uniqueName===n?{...s,alarmType:l}:s);this.setState({entries:i}),this.onChange(this.props.attr,i)},children:[e.jsx(t.FormControlLabel,{value:"alarm",control:e.jsx(t.Radio,{}),label:this.getText("unlock_alarm")}),e.jsx(t.FormControlLabel,{value:"unlock",control:e.jsx(t.Radio,{}),label:this.getText("unlock_unlock")})]})]})}),e.jsx(t.TextField,{fullWidth:!0,variant:"standard",label:this.getText("unlock_headline"),value:a.headline??"",onChange:o=>{const l=o.target.value,i=d.map(s=>s.uniqueName===n?{...s,headline:l}:s);this.setState({entries:i}),this.onChange(this.props.attr,i)},InputProps:{disableUnderline:!0,sx:{backgroundColor:"transparent",px:1}},sx:{mb:2}}),e.jsx(t.Box,{sx:{mt:2},children:e.jsx(t.TextField,{variant:"standard",label:this.getText("unlock_pin"),type:r.showPin?"text":"password",value:a.pin!==void 0&&a.pin!==null?String(a.pin):"",onChange:o=>{const i=o.target.value.replace(/[^0-9]/g,""),s=i?parseInt(i,10):0,c=d.map(h=>h.uniqueName===n?{...h,pin:s}:h);this.setState({entries:c}),this.onChange(this.props.attr,c)},InputProps:{disableUnderline:!0,sx:{backgroundColor:"transparent",px:1},endAdornment:e.jsx(t.InputAdornment,{position:"end",children:e.jsx(t.IconButton,{"aria-label":r.showPin?"hide-pin":"show-pin",onClick:()=>{r.showPin=!r.showPin,this.setState({})},edge:"end",size:"small",children:r.showPin?e.jsx(k,{fontSize:"small"}):e.jsx(w,{fontSize:"small"})})})}})}),a.alarmType==="alarm"&&e.jsxs(t.Box,{sx:{mt:2},children:[e.jsx(t.Box,{sx:{display:"grid",gridTemplateColumns:"1fr",gap:2},children:[1,2,3,4].map(o=>{const l=`button${o}`;return e.jsxs(t.Box,{children:[e.jsx(t.Typography,{variant:"caption",color:"text.secondary",sx:{mb:.5},children:this.getText(`unlock_button${o}_label`)}),e.jsx(t.TextField,{fullWidth:!0,variant:"standard",placeholder:this.getText(`unlock_button${o}_placeholder`),value:a[l]??"",onChange:i=>{const s=i.target.value,c=d.map(h=>h.uniqueName===n?{...h,[l]:s}:h);this.setState({entries:c}),this.onChange(this.props.attr,c)},InputProps:{disableUnderline:!0,sx:{backgroundColor:"transparent",px:1,"& input::placeholder":{color:"text.disabled"}}}})]},o)})}),e.jsx(t.Box,{sx:{mt:1},children:e.jsx(t.FormControlLabel,{control:e.jsx(t.Checkbox,{checked:!!a.approved,onChange:(o,l)=>{const i=d.map(s=>s.uniqueName===n?{...s,approved:l}:s);this.setState({entries:i}),this.onChange(this.props.attr,i)}}),label:this.getText("unlock_approved")})})]}),a.alarmType==="unlock"&&e.jsxs(t.Box,{sx:{mt:2},children:[e.jsx(t.Typography,{variant:"caption",color:"text.secondary",sx:{mb:.5},children:this.getText("unlock_setnavi_hint")}),e.jsx(t.TextField,{fullWidth:!0,variant:"standard",placeholder:this.getText("unlock_setnavi_placeholder"),value:a.setNavi??"",onChange:o=>{const l=o.target.value,i=d.map(s=>s.uniqueName===n?{...s,setNavi:l}:s);this.setState({entries:i}),this.onChange(this.props.attr,i)},InputProps:{disableUnderline:!0,sx:{backgroundColor:"transparent",px:1}}})]})]}):null})()}):e.jsxs(t.Box,{children:[e.jsx(t.Typography,{variant:"h6",children:this.getText("unlock_select_item")}),e.jsx(t.Box,{sx:{mt:2},children:e.jsx(t.Typography,{variant:"body2",color:"text.secondary",children:this.getText("unlock_select_description")})})]})})})]})}}const S=b(N),W={NavigationView:T,IconSelect:y,IconOverview:C,UnlockPage:S};export{W as default};
