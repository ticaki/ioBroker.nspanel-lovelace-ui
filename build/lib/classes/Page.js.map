{
  "version": 3,
  "sources": ["../../../src/lib/classes/Page.ts"],
  "sourcesContent": ["import * as pages from '../types/pages';\nimport { BaseClassPage } from './baseClassPage';\nimport * as types from '../types/types';\nimport { PageItem } from '../pages/pageItem';\nimport { deepAssign, getPayload, getPayloadRemoveTilde, getRegExp } from '../const/tools';\nimport type { PageItemDataItemsOptions, PageItemOptionsTemplate } from '../types/type-pageItem';\nimport { pageItemTemplates } from '../templates/templateArray';\nimport type { PageInterface, PageItemInterface } from './PageInterface';\nimport { Icons } from '../const/icon_mapping';\nimport { Color, type RGB } from '../const/Color';\n\n//interface Page extends BaseClass | PageConfig..\nexport type PageConfigAll = pages.PageBaseConfig;\n\nexport class Page extends BaseClassPage {\n    readonly card: pages.PageTypeCards;\n    readonly id: string;\n    private lastCardCounter: number = 0;\n    //protected overridePageItemsDpInit: string | RegExp = '';\n    public readonly isScreensaver: boolean;\n    public hidden: boolean = false;\n\n    /**\n     * Direct reference to the parent page,\n     * bypassing navigation logic.\n     */\n    public directParentPage: Page | undefined;\n\n    /**\n     * Direct reference to the child page,\n     * bypassing navigation logic.\n     */\n    public directChildPage: Page | undefined; //readonly enums: string | string[];\n    config: pages.PageBaseConfig['config'];\n    //config: Card['config'];\n    constructor(\n        card: PageInterface,\n        pageItemsConfig: pages.PageBaseConfig | undefined,\n        isScreensaver: boolean = false,\n    ) {\n        super(card, pageItemsConfig && pageItemsConfig.alwaysOn, pageItemsConfig && pageItemsConfig.pageItems);\n        this.isScreensaver = isScreensaver;\n        this.card = card.card;\n        this.id = card.id;\n        this.hidden = pageItemsConfig && 'hidden' in pageItemsConfig ? !!pageItemsConfig.hidden : false;\n        this.enums =\n            pageItemsConfig && 'enums' in pageItemsConfig && pageItemsConfig.enums ? pageItemsConfig.enums : '';\n        this.device =\n            pageItemsConfig && 'device' in pageItemsConfig && pageItemsConfig.device ? pageItemsConfig.device : '';\n        if (this.device) {\n            card.dpInit = typeof card.dpInit === 'string' ? card.dpInit.replace('#\u00B0^\u00B0#', this.device) : card.dpInit;\n        }\n        if (card.dpInit && typeof card.dpInit === 'string') {\n            const reg = getRegExp(card.dpInit);\n            if (reg) {\n                card.dpInit = reg;\n            }\n        }\n        this.dpInit = card.dpInit ?? '';\n        this.config = pageItemsConfig && pageItemsConfig.config;\n    }\n\n    /**\n     * ...\n     */\n    async init(): Promise<void> {\n        // do the work f\u00FCr PageItems only one time - changes in ObjectDB need a adapter restart.\n        if (this.pageItemConfig) {\n            for (let a = 0; a < this.pageItemConfig.length; a++) {\n                let options = this.pageItemConfig[a];\n                if (options === undefined) {\n                    continue;\n                }\n\n                // switch type text to button as indicator for cardThermo\n                if (options.type === 'text' && this && this.card === 'cardThermo') {\n                    options.type = 'button' as any;\n                    options.role = 'indicator';\n                }\n\n                options = await this.getItemFromTemplate(options);\n                if (!options) {\n                    this.log.error(`Dont get a template for ${a} in ${this.name}`);\n                    continue;\n                }\n\n                options.dpInit =\n                    typeof options.dpInit === 'string' && options.device\n                        ? options.dpInit.replace('#\u00B0^\u00B0#', options.device)\n                        : options.dpInit;\n\n                if (options.dpInit && typeof options.dpInit === 'string') {\n                    const reg = getRegExp(options.dpInit, { startsWith: true });\n                    if (reg) {\n                        options.dpInit = reg;\n                    }\n                }\n                // search states for mode auto\n                const dpInit = (this.dpInit ? this.dpInit : options.dpInit) ?? '';\n                const enums = this.enums ? this.enums : options.enums;\n                if (!dpInit && !enums) {\n                    this.log.debug(`No dpInit or enums for pageItem ${a} in ${this.name}`);\n                }\n\n                options.data =\n                    dpInit || enums\n                        ? await this.basePanel.statesControler.getDataItemsFromAuto(\n                              dpInit,\n                              options.data,\n                              'appendix' in options ? options.appendix : undefined,\n                              this.enums ? this.enums : options.enums,\n                          )\n                        : options.data;\n                options = structuredClone(options);\n                if (options) {\n                    options.dpInit = dpInit;\n                }\n                this.pageItemConfig[a] = await this.initPageItems(options);\n            }\n        }\n    }\n\n    async initPageItems(\n        item: PageItemDataItemsOptions | undefined,\n        overrideDpInit: string | RegExp = '',\n    ): Promise<PageItemDataItemsOptions | undefined> {\n        let options = item;\n        if (options === undefined) {\n            return undefined;\n        }\n        const dpInit = (overrideDpInit || (this.dpInit ? this.dpInit : options.dpInit)) ?? '';\n        const enums = this.enums ? this.enums : options.enums;\n\n        options.data =\n            dpInit || enums\n                ? await this.basePanel.statesControler.getDataItemsFromAuto(\n                      dpInit,\n                      options.data,\n                      'appendix' in options ? options.appendix : undefined,\n                      this.enums ? this.enums : options.enums,\n                  )\n                : options.data;\n        options = JSON.parse(JSON.stringify(options));\n        if (options) {\n            options.dpInit = dpInit;\n        }\n        return options;\n    }\n\n    async getItemFromTemplate(\n        options: PageItemDataItemsOptions,\n        subtemplate: types.TemplateIdent = '',\n        loop: number = 0,\n    ): Promise<PageItemDataItemsOptions | undefined> {\n        if ('template' in options && options.template) {\n            const template: PageItemOptionsTemplate | undefined = subtemplate\n                ? pageItemTemplates[subtemplate]\n                : pageItemTemplates[options.template];\n            const name = options.template;\n            if (!template) {\n                this.log.error(`Dont find template ${options.template}`);\n                return undefined;\n            }\n            if (\n                template.adapter &&\n                typeof options.dpInit === 'string' &&\n                !options.dpInit.includes(template.adapter) &&\n                typeof this.dpInit === 'string' &&\n                !this.dpInit.includes(template.adapter)\n            ) {\n                this.log.error(\n                    `Missing dbInit or dbInit not starts with${template.adapter} for template ${options.template}`,\n                );\n                return undefined;\n            }\n\n            const newTemplate = structuredClone(template) as Partial<PageItemOptionsTemplate>;\n            delete newTemplate.adapter;\n            if (\n                options.type &&\n                options.type !== template.type &&\n                !(options.type == 'button' && template.type == 'text')\n            ) {\n                // eslint-disable-next-line @typescript-eslint/no-base-to-string\n                this.log.error(`Type: ${String(options.type)} is not equal with ${template.type}`);\n                return undefined;\n            }\n            const colorTrue = (options.color || {}).true;\n            const colorFalse = (options.color || {}).false;\n            const colorScale = (options.color || {}).scale;\n            const iconTrue = (options.icon || {}).true;\n            const iconFalse = (options.icon || {}).false;\n\n            options.type = options.type || template.type;\n            options.role = options.role || template.role;\n            options = deepAssign(newTemplate, options);\n            if (template.template !== undefined) {\n                if (loop > 10) {\n                    throw new Error(\n                        `Endless loop in getItemFromTemplate() detected! From ${template.template} for ${name}. Bye Bye`,\n                    );\n                }\n                const o = await this.getItemFromTemplate(options, template.template, ++loop);\n                if (o !== undefined) {\n                    options = o;\n                } else {\n                    this.log.warn(`Dont get a template from ${template.template} for ${name}`);\n                }\n            }\n            if (options.data) {\n                options.data.icon = options.data.icon ?? {};\n                if (colorTrue) {\n                    options.data.icon.true = options.data.icon.true ?? {};\n                    options.data.icon.true.color = colorTrue;\n                }\n                if (iconTrue) {\n                    options.data.icon.true = options.data.icon.true ?? {};\n                    options.data.icon.true.value = iconTrue;\n                }\n                if (colorFalse) {\n                    options.data.icon.false = options.data.icon.false ?? {};\n                    options.data.icon.false.color = colorFalse;\n                }\n                if (iconFalse) {\n                    options.data.icon.false = options.data.icon.false ?? {};\n                    options.data.icon.false.value = iconFalse;\n                }\n                if (colorScale) {\n                    options.data.icon.scale = { type: 'const', constVal: colorScale };\n                }\n            }\n        }\n        return options;\n    }\n\n    async onButtonEvent(event: types.IncomingEvent): Promise<void> {\n        this.log.warn(`Event received but no handler! ${JSON.stringify(event)}`);\n    }\n    sendType(force?: boolean): void {\n        let forceSend = force || false;\n        let renderCurrentPage = false;\n        switch (this.card) {\n            //case 'cardBurnRec':\n            case 'cardChart':\n            case 'cardLChart':\n            case 'cardThermo':\n                forceSend = true;\n            //@disable-next-line no-fallthrough\n            case 'cardEntities':\n            case 'cardGrid':\n            case 'cardGrid2':\n            case 'cardGrid3':\n            case 'cardMedia':\n            case 'cardUnlock':\n            case 'cardQR':\n            case 'cardAlarm':\n            case 'cardPower':\n            case 'screensaver':\n            case 'screensaver2':\n            case 'screensaver3':\n            case 'cardItemSpecial':\n            case 'cardSchedule':\n            case 'cardThermo2':\n                renderCurrentPage = true;\n                break;\n            case 'popupNotify':\n            case 'popupNotify2':\n                renderCurrentPage = false;\n                break;\n            default:\n                pages.exhaustiveCheck(this.card);\n                break;\n        }\n        if (forceSend || this.basePanel.lastCard !== this.card) {\n            this.sendToPanel(`pageType~${this.card}`, renderCurrentPage);\n        } else {\n            if (this.lastCardCounter++ > 15) {\n                this.lastCardCounter = 0;\n                this.sendToPanel(`pageType~${this.card}`, renderCurrentPage);\n            }\n        }\n        this.basePanel.lastCard = this.card;\n    }\n\n    async createPageItems(\n        pageItemsConfig: PageItemDataItemsOptions | (PageItemDataItemsOptions | undefined)[] | undefined,\n        ident: string = '',\n    ): Promise<(PageItem | undefined)[] | undefined> {\n        const result = [];\n        if (pageItemsConfig) {\n            if (!Array.isArray(pageItemsConfig)) {\n                pageItemsConfig = [pageItemsConfig];\n            }\n            for (let a = 0; a < pageItemsConfig.length; a++) {\n                const config: Omit<PageItemInterface, 'pageItemsConfig'> = {\n                    name: ident ? ident : 'PI',\n                    adapter: this.adapter,\n                    panel: this.basePanel,\n                    card: 'cardItemSpecial',\n                    id: `${this.id}?${ident ? ident : a}`,\n                    parent: this,\n                };\n                result[a] = await PageItem.getPageItem(config, pageItemsConfig[a]);\n            }\n        }\n        return result;\n    }\n\n    protected getNavigation(side?: 'left' | 'right'): string {\n        if (this.directParentPage) {\n            let left = '';\n            let right = '';\n            if (!side || side === 'left') {\n                left = getPayloadRemoveTilde(\n                    'button',\n                    'bUp',\n                    Icons.GetIcon('arrow-up-bold'),\n                    String(Color.rgb_dec565(Color.navParent as RGB)),\n                    '',\n                    '',\n                );\n            }\n            if (!side || side === 'right') {\n                right = getPayload('', '', '', '', '', '');\n            }\n            if (!side) {\n                return getPayload(left, right);\n            }\n            return side === 'left' ? left : right;\n        }\n\n        return this.basePanel.navigation.buildNavigationString(side);\n    }\n\n    goLeft(): void {\n        if (this.directParentPage) {\n            void this.basePanel.setActivePage(this.directParentPage, false);\n            return;\n        }\n        this.basePanel.navigation.goLeft();\n    }\n\n    goRight(): void {\n        if (this.directParentPage) {\n            return;\n        }\n        this.basePanel.navigation.goRight();\n    }\n    protected async onVisibilityChange(val: boolean): Promise<void> {\n        if (val) {\n            if (!this.pageItems || this.pageItems.length === 0) {\n                this.pageItems = await this.createPageItems(this.pageItemConfig);\n            }\n            //if (this.card !== 'cardLChart') {\n            this.sendType();\n            //}\n            await this.update();\n        } else {\n            if (this.pageItems) {\n                for (const item of this.pageItems) {\n                    item && (await item.delete());\n                }\n                this.pageItems = [];\n            }\n        }\n    }\n    getdpInitForChild(): string | RegExp {\n        return '';\n    }\n    setLastPage(_p: Page | undefined): void {}\n    removeLastPage(_p: Page | undefined): void {}\n\n    public async update(): Promise<void> {\n        this.adapter.log.warn(\n            `<- instance of [${Object.getPrototypeOf(this)}] update() is not defined or call super.onStateTrigger()`,\n        );\n    }\n\n    /**\n     * Handles a popup request.\n     *\n     * @param id - The ID of the item.\n     * @param popup - The popup type.\n     * @param action - The action to be performed.\n     * @param value - The value associated with the action.\n     * @param _event - The incoming event.\n     * @returns A promise that resolves when the popup request is handled.\n     */\n    public async onPopupRequest(\n        id: number | string,\n        popup: types.PopupType | undefined,\n        // eslint-disable-next-line @typescript-eslint/no-redundant-type-constituents\n        action: types.ButtonActionType | undefined | string,\n        value: string | undefined,\n        _event: types.IncomingEvent | null = null,\n    ): Promise<void> {\n        if (!this.pageItems || id == '') {\n            this.log.debug(\n                `onPopupRequest: No pageItems or id this is only a warning if u used a pageitem except: 'arrow': ${id}`,\n            );\n            return;\n        }\n        let item: PageItem | undefined;\n        if (isNaN(Number(id)) && typeof id === 'string') {\n            this.log.error(\n                `onPopupRequest: id should be a number but is a string: ${id}. Page name: ${this.name}, Page id: ${this.id}, Page card: ${this.card}`,\n            );\n        } else {\n            const i = typeof id === 'number' ? id : parseInt(id);\n            item = this.pageItems[i];\n        }\n        if (!item) {\n            return;\n        }\n        let msg: string | null = null;\n        if (action && value !== undefined && (await item.onCommand(action, value))) {\n            return;\n        } else if (types.isPopupType(popup) && action !== 'bExit') {\n            this.basePanel.lastCard = '';\n            msg = await item.GeneratePopup(popup);\n        }\n        if (msg !== null) {\n            this.sleep = true;\n            this.sendToPanel(msg, false);\n        }\n    }\n    async delete(): Promise<void> {\n        await super.delete();\n        if (this.directChildPage) {\n            await this.directChildPage.delete();\n            this.directChildPage = undefined;\n        }\n        if (this.directParentPage) {\n            this.directParentPage.directChildPage = undefined;\n            this.directParentPage = undefined;\n        }\n        if (this.pageItems) {\n            for (const item of this.pageItems) {\n                item && (await item.delete());\n            }\n        }\n        this.pageItems = [];\n        this.pageItemConfig = [];\n    }\n}\n\nexport function isMediaButtonActionType(F: string): F is MediaButtonActionType {\n    switch (F) {\n        case 'media-back':\n        case 'media-pause':\n        case 'media-next':\n        case 'media-shuffle':\n        case 'volumeSlider':\n        case 'mode-speakerlist':\n        case 'mode-playlist':\n        case 'mode-tracklist':\n        case 'mode-repeat':\n        case 'mode-equalizer':\n        case 'mode-seek':\n        case 'mode-crossfade':\n        case 'mode-favorites':\n        case 'mode-insel':\n        case 'media-OnOff':\n        case 'button':\n            return true;\n    }\n    console.error(`${F} isMediaButtonActionType === false`);\n    return false;\n}\ntype MediaButtonActionType = Extract<\n    types.ButtonActionType,\n    | 'media-back'\n    | 'media-pause'\n    | 'media-next'\n    | 'media-shuffle'\n    | 'volumeSlider'\n    | 'mode-speakerlist'\n    | 'mode-playlist'\n    | 'mode-tracklist'\n    | 'mode-repeat'\n    | 'mode-equalizer'\n    | 'mode-seek'\n    | 'mode-crossfade'\n    | 'mode-favorites'\n    | 'mode-insel'\n    | 'media-OnOff'\n    | 'button'\n>;\n"],
  "mappings": "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",
  "names": []
}
