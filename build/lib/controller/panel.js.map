{
  "version": 3,
  "sources": ["../../../src/lib/controller/panel.ts"],
  "sourcesContent": ["import { PanelSend } from './panel-message';\n\nimport { Screensaver, ScreensaverConfigType } from '../pages/screensaver';\nimport * as Types from '../types/types';\nimport * as pages from '../types/pages';\nimport { Controller } from './controller';\nimport { AdapterClassDefinition, BaseClass } from '../classes/library';\nimport { callbackMessageType } from '../classes/mqtt';\nimport { InternalStates, ReiveTopicAppendix, genericStateObjects } from '../const/definition';\nimport { Page, PageConfigAll, PageInterface } from '../classes/Page';\nimport { PageMedia } from '../pages/pageMedia';\nimport { IClientPublishOptions } from 'mqtt';\nimport { StatesControler } from './states-controller';\nimport { PageGrid } from '../pages/pageGrid';\nimport { Navigation, NavigationConfig } from '../classes/navigation';\nimport { PageThermo } from '../pages/pageThermo';\nimport { PagePower } from '../pages/pagePower';\nimport { PageItem } from '../pages/pageItem';\nimport { PageEntities } from '../pages/pageEntities';\nimport { PageNotify } from '../pages/pageNotification';\nimport { systemNavigation, systemPages } from '../templates/system-templates';\nimport { PageAlarm } from '../pages/pageAlarm';\nimport { PageChart } from '../pages/pageChart';\nimport { PageLChart } from '../pages/pageLChart';\n\nexport interface panelConfigPartial extends Partial<panelConfigTop> {\n    format?: Partial<Intl.DateTimeFormatOptions>;\n    controller: Controller;\n    topic: string;\n    name: string;\n    pages: PageConfigAll[];\n    navigation: NavigationConfig['navigationConfig'];\n    config: ScreensaverConfigType;\n}\n\nconst DefaultOptions = {\n    format: {\n        weekday: 'short',\n        month: 'short',\n        year: 'numeric',\n        day: 'numeric',\n    },\n    CustomFormat: '',\n    locale: 'de-DE',\n    pages: [],\n};\n\ntype panelConfigTop = {\n    CustomFormat: string;\n    locale: Intl.LocalesArgument;\n    timeout: number;\n    dimLow: number;\n    dimHigh: number;\n};\n\nexport class Panel extends BaseClass {\n    private loopTimeout: ioBroker.Timeout | undefined;\n    private pages: (Page | undefined)[] = [];\n    private _activePage: Page | undefined = undefined;\n    private screenSaver: Screensaver | undefined;\n    private InitDone: boolean = false;\n    private _isOnline: boolean = false;\n    public lastCard: string = '';\n    public notifyIndex: number = -1;\n    readonly navigation: Navigation;\n    readonly format: Partial<Intl.DateTimeFormatOptions>;\n    readonly controller: Controller;\n    readonly topic: string;\n    readonly reivCallbacks: callbackMessageType[] = [];\n    readonly panelSend: PanelSend;\n    readonly statesControler: StatesControler;\n    readonly config: ScreensaverConfigType;\n    readonly CustomFormat: string;\n    readonly sendToTasmota: (topic: string, payload: string, opt?: IClientPublishOptions) => void = () => {};\n\n    timeout: number;\n    dimMode: { low: number; high: number };\n    detach: { left: boolean; right: boolean } = { left: false, right: false };\n    public persistentPageItems: Record<string, PageItem> = {};\n\n    info: Types.PanelInfo = {\n        nspanel: {\n            displayVersion: 0,\n            model: '',\n            bigIconLeft: false,\n            bigIconRight: false,\n            isOnline: false,\n            currentPage: '',\n        },\n        tasmota: {\n            firmwareversion: '',\n            onlineVersion: '',\n            net: {\n                Hostname: '',\n                IPAddress: '',\n                Gateway: '',\n                Subnetmask: '',\n                DNSServer1: '',\n                DNSServer2: '',\n                Mac: '',\n                IP6Global: '',\n                IP6Local: '',\n                Ethernet: {\n                    Hostname: '',\n                    IPAddress: '',\n                    Gateway: '',\n                    Subnetmask: '',\n                    DNSServer1: '',\n                    DNSServer2: '',\n                    Mac: '',\n                    IP6Global: '',\n                    IP6Local: '',\n                },\n                Webserver: 0,\n                HTTP_API: 0,\n                WifiConfig: 0,\n                WifiPower: 0,\n            },\n            uptime: '',\n            sts: {\n                Time: '',\n                Uptime: '',\n                UptimeSec: 0,\n                Heap: 0,\n                SleepMode: '',\n                Sleep: 0,\n                LoadAvg: 0,\n                MqttCount: 0,\n                Berry: {\n                    HeapUsed: 0,\n                    Objects: 0,\n                },\n                POWER1: '',\n                POWER2: '',\n                Wifi: {\n                    AP: 0,\n                    SSId: '',\n                    BSSId: '',\n                    Channel: 0,\n                    Mode: '',\n                    RSSI: 0,\n                    Signal: 0,\n                    LinkCount: 0,\n                    Downtime: '',\n                },\n            },\n        },\n    };\n    friendlyName: string = '';\n\n    constructor(adapter: AdapterClassDefinition, options: panelConfigPartial) {\n        super(adapter, options.name);\n        this.friendlyName = options.name;\n        this.panelSend = new PanelSend(adapter, {\n            name: `${options.name}-SendClass`,\n            mqttClient: options.controller.mqttClient,\n            topic: options.topic,\n        });\n        this.timeout = options.timeout || 15;\n\n        this.CustomFormat = options.CustomFormat ?? '';\n        this.config = options.config;\n        this.format = Object.assign(DefaultOptions.format, options.format);\n        this.controller = options.controller;\n        this.topic = options.topic;\n        if (typeof this.panelSend.addMessage === 'function') this.sendToPanelClass = this.panelSend.addMessage;\n        if (typeof this.panelSend.addMessageTasmota === 'function')\n            this.sendToTasmota = this.panelSend.addMessageTasmota;\n\n        this.statesControler = options.controller.statesControler;\n\n        this.dimMode = { low: options.dimLow ?? 70, high: options.dimHigh ?? 90 };\n\n        options.pages = options.pages.concat(systemPages);\n        options.navigation = options.navigation.concat(systemNavigation);\n\n        let scsFound = 0;\n        for (let a = 0; a < options.pages.length; a++) {\n            let pageConfig = options.pages[a] ? Page.getPage(options.pages[a], this) : options.pages[a];\n\n            if (!pageConfig || !pageConfig.config) continue;\n            const pmconfig = {\n                card: pageConfig.config.card,\n                panel: this,\n                id: String(a),\n                name: pageConfig.uniqueID,\n                alwaysOn: pageConfig.alwaysOn,\n                adapter: this.adapter,\n                panelSend: this.panelSend,\n                dpInit: pageConfig.dpInit,\n            };\n            switch (pageConfig.config.card) {\n                case 'cardChart': {\n                    pageConfig = Page.getPage(pageConfig, this);\n                    this.pages[a] = new PageChart(pmconfig, pageConfig);\n                    break;\n                }\n                case 'cardLChart': {\n                    pageConfig = Page.getPage(pageConfig, this);\n                    this.pages[a] = new PageLChart(pmconfig, pageConfig);\n                    break;\n                }\n                case 'cardEntities': {\n                    pageConfig = Page.getPage(pageConfig, this);\n                    this.pages[a] = new PageEntities(pmconfig, pageConfig);\n                    break;\n                }\n                case 'cardGrid2':\n                case 'cardGrid': {\n                    pageConfig = Page.getPage(pageConfig, this);\n                    this.pages[a] = new PageGrid(pmconfig, pageConfig);\n                    break;\n                }\n\n                case 'cardThermo': {\n                    pageConfig = Page.getPage(pageConfig, this);\n                    this.pages[a] = new PageThermo(pmconfig, pageConfig);\n                    break;\n                }\n                case 'cardMedia': {\n                    pageConfig = Page.getPage(pageConfig, this);\n                    this.pages[a] = new PageMedia(pmconfig, pageConfig);\n                    break;\n                }\n\n                case 'cardQR': {\n                    break;\n                }\n                case 'cardAlarm': {\n                    pageConfig = Page.getPage(pageConfig, this);\n                    this.pages[a] = new PageAlarm(pmconfig, pageConfig);\n                    break;\n                }\n                case 'cardPower': {\n                    pageConfig = Page.getPage(pageConfig, this);\n                    this.pages[a] = new PagePower(pmconfig, pageConfig);\n                    break;\n                }\n                case 'popupNotify2':\n                case 'popupNotify': {\n                    pageConfig = Page.getPage(pageConfig, this);\n                    this.pages[a] = new PageNotify(pmconfig, pageConfig);\n                    break;\n                }\n                case 'screensaver':\n                case 'screensaver2': {\n                    scsFound++;\n\n                    //const opt = Object.assign(DefaultOptions, pageConfig);\n                    const ssconfig: PageInterface = {\n                        card: pageConfig.config.card,\n                        panel: this,\n                        id: String(a),\n                        name: pageConfig.uniqueID,\n                        adapter: this.adapter,\n                        panelSend: this.panelSend,\n                        dpInit: '',\n                    };\n                    this.screenSaver = new Screensaver(ssconfig, pageConfig);\n                    this.pages[a] = this.screenSaver;\n                    break;\n                }\n            }\n        }\n        if (scsFound === 0) {\n            this.log.error('no screensaver found! Stop!');\n            this.adapter.controller!.delete();\n            throw new Error('no screensaver found! Stop!');\n        }\n        const navConfig: NavigationConfig = {\n            adapter: this.adapter,\n            panel: this,\n            navigationConfig: options.navigation,\n        };\n        this.navigation = new Navigation(navConfig);\n    }\n\n    init = async (): Promise<void> => {\n        this.controller.mqttClient.subscript(this.topic + '/tele/#', this.onMessage);\n        this.controller.mqttClient.subscript(this.topic + '/stat/#', this.onMessage);\n        this.isOnline = false;\n        this.restartLoops();\n    };\n    start = async (): Promise<void> => {\n        this.adapter.subscribeStates(`panels.${this.name}.cmd.*`);\n        this.adapter.subscribeStates(`panels.${this.name}.alarm.*`);\n\n        for (const id in InternalStates.panel) {\n            const obj = InternalStates.panel[id as keyof typeof InternalStates.panel];\n            await this.statesControler.setInternalState(\n                `${this.name}/${id}`,\n                obj.val,\n                obj.ack,\n                obj.common,\n                obj.noTrigger ? undefined : this.onInternalCommand,\n            );\n        }\n\n        genericStateObjects.panel.panels._channel.common.name = this.friendlyName;\n        await this.library.writedp(`panels.${this.name}`, undefined, genericStateObjects.panel.panels._channel);\n        await this.library.writedp(\n            `panels.${this.name}.cmd`,\n            undefined === 'ON',\n            genericStateObjects.panel.panels.cmd._channel,\n        );\n        await this.library.writedp(\n            `panels.${this.name}.alarm`,\n            undefined === 'ON',\n            genericStateObjects.panel.panels.alarm._channel,\n        );\n        await this.library.writedp(\n            `panels.${this.name}.buttons`,\n            undefined,\n            genericStateObjects.panel.panels.buttons._channel,\n        );\n        await this.library.writedp(\n            `panels.${this.name}.buttons.left`,\n            true,\n            genericStateObjects.panel.panels.buttons.left,\n        );\n        await this.library.writedp(\n            `panels.${this.name}.buttons.right`,\n            true,\n            genericStateObjects.panel.panels.buttons.right,\n        );\n\n        let state = this.library.readdb(`panels.${this.name}.cmd.dimStandby`);\n        if (state && state.val) this.dimMode.low = state.val as number;\n        state = this.library.readdb(`panels.${this.name}.cmd.dimActive`);\n        if (state && state.val) this.dimMode.high = state.val as number;\n        this.library.writedp(\n            `panels.${this.name}.cmd.dimStandby`,\n            this.dimMode.low,\n            genericStateObjects.panel.panels.cmd.dimStandby,\n        );\n        this.library.writedp(\n            `panels.${this.name}.cmd.dimActive`,\n            this.dimMode.high,\n            genericStateObjects.panel.panels.cmd.dimActive,\n        );\n\n        {\n            let state = this.library.readdb(`panels.${this.name}.cmd.detachRight`);\n            if (state && state.val) this.detach.right = !!state.val;\n            state = this.library.readdb(`panels.${this.name}.cmd.detachLeft`);\n            if (state && state.val) this.detach.left = !!state.val;\n            this.library.writedp(\n                `panels.${this.name}.cmd.detachRight`,\n                this.detach.right,\n                genericStateObjects.panel.panels.cmd.detachRight,\n            );\n            this.library.writedp(\n                `panels.${this.name}.cmd.detachLeft`,\n                this.detach.left,\n                genericStateObjects.panel.panels.cmd.detachLeft,\n            );\n        }\n        for (const page of this.pages) {\n            if (page) {\n                this.log.info(`Initialisation of page ${page.name} pageitems: ${(page.pageItemConfig || []).length}`);\n                await page.init();\n            }\n        }\n\n        state = this.library.readdb(`panels.${this.name}.cmd.screensaverTimeout`);\n        if (state) {\n            this.timeout = parseInt(String(state.val));\n        }\n        this.library.writedp(\n            `panels.${this.name}.cmd.screensaverTimeout`,\n            this.timeout,\n            genericStateObjects.panel.panels.cmd.screensaverTimeout,\n        );\n        this.navigation.init();\n\n        {\n            const currentPage = this.library.readdb(`panels.${this.name}.cmd.mainNavigationPoint`);\n            if (currentPage && currentPage.val) {\n                this.navigation.setMainPageByName(String(currentPage.val));\n            }\n\n            genericStateObjects.panel.panels.cmd.mainNavigationPoint.common.states =\n                this.navigation.buildCommonStates();\n            const page = this.navigation.getCurrentMainPoint();\n            this.library.writedp(\n                `panels.${this.name}.cmd.mainNavigationPoint`,\n                page,\n                genericStateObjects.panel.panels.cmd.mainNavigationPoint,\n            );\n        }\n        {\n            const currentScreensaver = this.library.readdb(`panels.${this.name}.cmd.screenSaver`);\n            const scs: Page[] = this.pages.filter(\n                (a) => a && (a.card === 'screensaver' || a.card === 'screensaver2'),\n            ) as Page[];\n            const s = scs.filter((a) => currentScreensaver && a.name === currentScreensaver.val);\n            if (currentScreensaver && currentScreensaver.val) {\n                if (s && s[0]) this.screenSaver = s[0] as Screensaver;\n            }\n\n            const states: Record<string, string> = {};\n            scs.forEach((a) => {\n                if (a) states[a.name] = a.name.slice(1);\n            });\n            genericStateObjects.panel.panels.cmd.screenSaver.common.states = states;\n            this.library.writedp(\n                `panels.${this.name}.cmd.screenSaver`,\n                this.screenSaver ? this.screenSaver.name : '',\n                genericStateObjects.panel.panels.cmd.screenSaver,\n            );\n        }\n        state = this.library.readdb(`panels.${this.name}.info.nspanel.bigIconLeft`);\n        this.info.nspanel.bigIconLeft = state ? !!state.val : false;\n        state = this.library.readdb(`panels.${this.name}.info.nspanel.bigIconRight`);\n        this.info.nspanel.bigIconRight = state ? !!state.val : false;\n\n        //done with states\n\n        this.sendToTasmota(this.topic + '/cmnd/POWER1', '');\n        this.sendToTasmota(this.topic + '/cmnd/POWER2', '');\n        this.sendRules();\n    };\n\n    private sendToPanelClass: (payload: string, opt?: IClientPublishOptions) => void = () => {};\n    protected sendToPanel: (payload: string, opt?: IClientPublishOptions) => void = (\n        payload: string,\n        opt?: IClientPublishOptions,\n    ) => {\n        this.sendToPanelClass(payload, opt);\n    };\n    async setActivePage(_page?: Page | boolean | undefined, _notSleep?: boolean): Promise<void> {\n        if (_page === undefined) return;\n        let page = this._activePage;\n        let sleep = false;\n        if (typeof _page === 'boolean') {\n            sleep = !_page;\n        } else {\n            page = _page;\n            sleep = _notSleep ?? false;\n        }\n        if (!this._activePage) {\n            if (page === undefined) return;\n            page.setLastPage(this._activePage ?? undefined);\n            await page.setVisibility(true);\n\n            this._activePage = page;\n        } else if (sleep !== this._activePage.sleep || page !== this._activePage) {\n            if (page != this._activePage) {\n                if (this._activePage) await this._activePage.setVisibility(false);\n                if (page) {\n                    page.setLastPage(this._activePage ?? undefined);\n                    if (!sleep) await page.setVisibility(true);\n                    page.sleep = sleep;\n                    this._activePage = page;\n                }\n            } else if (sleep !== this._activePage.sleep) {\n                page.setLastPage(this._activePage ?? undefined);\n                if (!sleep) await this._activePage.setVisibility(true, true);\n                this._activePage.sleep = sleep;\n            }\n        }\n    }\n    getActivePage(): Page {\n        if (!this._activePage) throw new Error(`No active page here, check code!`);\n        return this._activePage;\n    }\n    get isOnline(): boolean {\n        return this._isOnline;\n    }\n    set isOnline(s: boolean) {\n        this.info.nspanel.isOnline = s;\n        if (s !== this._isOnline) {\n            this.library.writedp(\n                `panels.${this.name}.info.nspanel.isOnline`,\n                s,\n                genericStateObjects.panel.panels.info.nspanel.isOnline,\n            );\n            if (s) {\n                this.log.info('is online!');\n            } else {\n                this.log.warn('is offline!');\n            }\n            this.restartLoops();\n        }\n        this._isOnline = s;\n    }\n    async isValid(): Promise<true> {\n        return true;\n    }\n\n    registerOnMessage(fn: callbackMessageType): void {\n        if (this.reivCallbacks.indexOf(fn) === -1) {\n            this.reivCallbacks.push(fn);\n        }\n    }\n    onMessage: callbackMessageType = async (topic: string, message: string) => {\n        for (const fn of this.reivCallbacks) {\n            if (fn) fn(topic, message);\n        }\n        if (topic.endsWith(ReiveTopicAppendix)) {\n            //this.log.debug(`Receive message ${topic} with ${message}`);\n            const event: Types.IncomingEvent | null = this.convertToEvent(message);\n            if (event) {\n                this.HandleIncomingMessage(event);\n            }\n        } else {\n            const command = (topic.match(/[0-9a-zA-Z]+?\\/[0-9a-zA-Z]+$/g) ||\n                [])[0] as Types.TasmotaIncomingTopics | null;\n            if (command) {\n                //this.log.debug(`Receive other message ${topic} with ${message}`);\n                switch (command) {\n                    case 'stat/POWER2': {\n                        this.library.writedp(\n                            `panels.${this.name}.cmd.power2`,\n                            message === 'ON',\n                            genericStateObjects.panel.panels.cmd.power2,\n                        );\n                        this.statesControler.setInternalState(`${this.name}/cmd/power2`, message === 'ON', true);\n                        break;\n                    }\n                    case 'stat/POWER1': {\n                        this.library.writedp(\n                            `panels.${this.name}.cmd.power1`,\n                            message === 'ON',\n                            genericStateObjects.panel.panels.cmd.power1,\n                        );\n                        this.statesControler.setInternalState(`${this.name}/cmd/power1`, message === 'ON', true);\n                        break;\n                    }\n                    case 'stat/STATUS0': {\n                        const data = JSON.parse(message) as Types.STATUS0;\n                        this.name = this.library.cleandp(data.StatusNET.Mac, false, true);\n                        const i = this.InitDone;\n                        if (!this.InitDone) {\n                            await this.start();\n                            this.InitDone = true;\n                        }\n                        this.library.writedp(\n                            `panels.${this.name}.info`,\n                            undefined,\n                            genericStateObjects.panel.panels.info._channel,\n                        );\n                        this.library.writedp(\n                            `panels.${this.name}.info.status`,\n                            message,\n                            genericStateObjects.panel.panels.info.status,\n                        );\n                        this.info.tasmota.net = data.StatusNET;\n                        this.info.tasmota.firmwareversion = data.StatusFWR.Version;\n                        this.info.tasmota.uptime = data.StatusSTS.Uptime;\n                        this.info.tasmota.sts = data.StatusSTS;\n\n                        if (!i)\n                            await this.library.writeFromJson(\n                                `panels.${this.name}.info.tasmota`,\n                                'panel.panels.info.tasmota',\n                                genericStateObjects,\n                                this.info.tasmota,\n                            );\n                        else await this.writeInfo();\n                    }\n                }\n            }\n        }\n    };\n\n    /**\n     *\n     */\n    sendRules(): void {\n        this.sendToTasmota(\n            this.topic + '/cmnd/Rule3',\n            'ON CustomSend DO RuleTimer1 120 ENDON ON Rules#Timer=1 DO CustomSend pageType~pageStartup ENDON' +\n                (this.detach.left\n                    ? ` ON Button1#state do Publish ${this.topic}/tele/RESULT {\"CustomRecv\":\"event,button1\"} ENDON`\n                    : '') +\n                (this.detach.right\n                    ? ` ON Button2#state do Publish ${this.topic}/tele/RESULT {\"CustomRecv\":\"event,button2\"} ENDON`\n                    : ''),\n        );\n        this.sendToTasmota(this.topic + '/cmnd/Rule3', 'ON');\n    }\n\n    async onStateChange(id: string, state: Types.nsPanelState): Promise<void> {\n        if (state.ack) return;\n        if (id.split('.')[1] === this.name) {\n            const cmd = id.replace(`panels.${this.name}.cmd.`, '');\n            switch (cmd) {\n                case 'power1': {\n                    this.sendToTasmota(this.topic + '/cmnd/POWER1', state.val ? 'ON' : 'OFF');\n                    break;\n                }\n                case 'power2': {\n                    this.sendToTasmota(this.topic + '/cmnd/POWER2', state.val ? 'ON' : 'OFF');\n                    break;\n                }\n                case 'mainNavigationPoint': {\n                    this.navigation.setMainPageByName(state.val ? String(state.val) : 'main');\n                    this.library.writedp(\n                        `panels.${this.name}.cmd.mainNavigationPoint`,\n                        state.val ? String(state.val) : 'main',\n                    );\n                    break;\n                }\n                case 'goToNavigationPoint': {\n                    this.navigation.setTargetPageByName(state.val ? String(state.val) : 'main');\n                    break;\n                }\n                case 'screensaverTimeout': {\n                    this.statesControler.setInternalState(\n                        `${this.name}/cmd/screensaverTimeout`,\n                        parseInt(String(state.val)),\n                        false,\n                    );\n                    break;\n                }\n                case 'dimStandby': {\n                    this.statesControler.setInternalState(\n                        `${this.name}/cmd/dimStandby`,\n                        parseInt(String(state.val)),\n                        false,\n                    );\n                    break;\n                }\n                case 'dimActive': {\n                    this.statesControler.setInternalState(\n                        `${this.name}/cmd/dimActive`,\n                        parseInt(String(state.val)),\n                        false,\n                    );\n                    break;\n                }\n                case 'detachLeft': {\n                    this.statesControler.setInternalState(`${this.name}/cmd/detachLeft`, !!state.val, false);\n                    break;\n                }\n                case 'detachRight': {\n                    this.statesControler.setInternalState(`${this.name}/cmd/detachRight`, !!state.val, false);\n                    break;\n                }\n                case 'screenSaver': {\n                    const i = this.pages.findIndex((a) => a && a.name === state.val);\n                    const s = this.pages[i] as Screensaver;\n                    if (s) {\n                        this.screenSaver = s;\n                        this.library.writedp(`panels.${this.name}.cmd.screenSaver`, s.name);\n                    }\n                }\n            }\n        }\n    }\n\n    /**\n     * timeout screensaver after sec\n     * @param sec seconds for timeout\n     */\n    sendScreeensaverTimeout(sec: number): void {\n        this.log.debug(`Set screeensaver timeout to ${sec}s.`);\n        this.sendToPanel(`timeout~${sec}`);\n    }\n\n    sendDimmode(): void {\n        this.sendToPanel(`dimmode~${this.dimMode.low}~${this.dimMode.high}~` + String(1));\n    }\n\n    restartLoops(): void {\n        if (this.loopTimeout) this.adapter.clearTimeout(this.loopTimeout);\n        this.loop();\n    }\n    /**\n     * Do panel work always at full minute\n     * @returns void\n     */\n    loop = (): void => {\n        if (this.unload) return;\n        this.sendToTasmota(this.topic + '/cmnd/STATUS0', '');\n        this.pages = this.pages.filter((a) => a && !a.unload);\n        let t = 300000 + Math.random() * 30000 - 15000;\n        if (!this.isOnline) {\n            t = 15000;\n            this.sendToPanel('pageType~pageStartup', { retain: true });\n        }\n        this.loopTimeout = this.adapter.setTimeout(this.loop, t);\n    };\n\n    async delete(): Promise<void> {\n        await super.delete();\n        await this.library.writedp(\n            `panels.${this.name}.info.nspanel.isOnline`,\n            false,\n            genericStateObjects.panel.panels.info.nspanel.isOnline,\n        );\n        for (const a of this.pages) if (a) await a.delete();\n        this.isOnline = false;\n        this.persistentPageItems = {};\n        if (this.loopTimeout) this.adapter.clearTimeout(this.loopTimeout);\n    }\n\n    getPagebyUniqueID(uniqueID: string): Page | null {\n        if (!uniqueID) return null;\n        const index = this.pages.findIndex((a) => a && a.name && a.name === uniqueID);\n        return this.pages[index] ?? null;\n    }\n\n    async writeInfo(): Promise<void> {\n        await this.library.writeFromJson(\n            `panels.${this.name}.info`,\n            'panel.panels.info',\n            genericStateObjects,\n            this.info,\n        );\n    }\n    /**\n     *  Handle incoming messages from panel\n     * @param event incoming event....\n     * @returns\n     */\n    async HandleIncomingMessage(event: Types.IncomingEvent): Promise<void> {\n        if (this.InitDone === false) {\n            this.isOnline = false;\n            return;\n        }\n        if (!event.method) return;\n        if (this._activePage && this._activePage.card !== 'cardAlarm')\n            this.log.debug('Receive message:' + JSON.stringify(event));\n\n        if (!this.screenSaver) return;\n        if (this.isOnline === false && event.method !== 'startup') return;\n\n        switch (event.method) {\n            case 'startup': {\n                this.isOnline = true;\n\n                this.info.nspanel.displayVersion = parseInt(event.id);\n                this.info.nspanel.model = event.action;\n\n                await this.writeInfo();\n\n                this.sendToPanel(`dimmode~${this.dimMode.low}~${this.dimMode.high}~` + String(1));\n                this.navigation.resetPosition();\n\n                const i = this.pages.findIndex((a) => a && a.name === '///WelcomePopup');\n                const popup = i !== -1 ? this.pages[i] : undefined;\n                if (popup) await this.setActivePage(popup);\n                if (this.screenSaver) {\n                    await this.screenSaver.HandleDate();\n                    await this.screenSaver.HandleTime();\n                }\n                this.log.info('Panel startup finished!');\n                break;\n            }\n            case 'sleepReached': {\n                await this.setActivePage(this.screenSaver);\n                this.navigation.resetPosition();\n                this.pages.forEach((a) => a && a.reset());\n                break;\n            }\n            case 'pageOpenDetail': {\n                await this.setActivePage(false);\n                this.getActivePage().onPopupRequest(\n                    event.id,\n                    event.popup as Types.PopupType,\n                    event.action,\n                    event.opt,\n                    event,\n                );\n                break;\n            }\n            case 'buttonPress2': {\n                if (event.id == 'screensaver') {\n                    this.navigation.resetPosition();\n                    await this.navigation.setCurrentPage();\n                } else if (event.action === 'bExit' && event.id !== 'popupNotify') {\n                    await this.setActivePage(true);\n                } else {\n                    if (\n                        event.action === 'button' &&\n                        ['bNext', 'bPrev', 'bUp', 'bHome', 'bSubNext', 'bSubPrev'].indexOf(event.id) != -1\n                    ) {\n                        if (['bPrev', 'bUp', 'bSubPrev'].indexOf(event.id) != -1) this.getActivePage().goLeft();\n                        else if (['bNext', 'bHome', 'bSubNext'].indexOf(event.id) != -1) this.getActivePage().goRight();\n                        break;\n                    }\n                    this.getActivePage().onPopupRequest(\n                        event.id,\n                        event.popup as Types.PopupType,\n                        event.action,\n                        event.opt,\n                        event,\n                    );\n                    await this.getActivePage().onButtonEvent(event);\n                }\n                break;\n            }\n            case 'renderCurrentPage': {\n                // Event only for HA at this Moment\n                break;\n            }\n            case 'button1': {\n                await this.library.writedp(`panels.${this.name}.buttons.left`, true, null, true, true);\n\n                break;\n            }\n            case 'button2': {\n                await this.library.writedp(`panels.${this.name}.buttons.right`, true, null, true, true);\n                break;\n            }\n            default: {\n                this.log.warn('Missing method in HandleIncomingMessage()');\n            }\n        }\n    }\n\n    onInternalCommand = async (id: string, state: Types.nsPanelState | undefined): Promise<Types.nsPanelStateVal> => {\n        if (!id.startsWith(this.name)) return null;\n        const token: Types.PanelInternalCommand = id.replace(this.name + '/', '') as Types.PanelInternalCommand;\n        if (state && !state.ack && state.val !== null) {\n            switch (token) {\n                case 'cmd/power1': {\n                    this.sendToTasmota(this.topic + '/cmnd/POWER1', state.val ? 'ON' : 'OFF');\n                    break;\n                }\n                case 'cmd/power2': {\n                    this.sendToTasmota(this.topic + '/cmnd/POWER2', state.val ? 'ON' : 'OFF');\n                    break;\n                }\n                case `cmd/detachRight`: {\n                    this.detach.right = !!state.val;\n                    this.library.writedp(`panels.${this.name}.cmd.detachRight`, this.detach.right);\n                    this.sendRules();\n                    break;\n                }\n                case 'cmd/detachLeft': {\n                    this.detach.left = !!state.val;\n                    this.library.writedp(`panels.${this.name}.cmd.detachLeft`, this.detach.left);\n                    this.sendRules();\n                    break;\n                }\n\n                case 'cmd/bigIconLeft': {\n                    this.info.nspanel.bigIconLeft = !!state.val;\n                    this.screenSaver && this.screenSaver.HandleScreensaverStatusIcons();\n                    //this.statesControler.setInternalState(`${this.name}/cmd/bigIconLeft`, !!state.val, true);\n                    this.library.writeFromJson(\n                        `panels.${this.name}.info`,\n                        'panel.panels.info',\n                        genericStateObjects,\n                        this.info,\n                    );\n                    break;\n                }\n                case 'cmd/bigIconRight': {\n                    this.info.nspanel.bigIconRight = !!state.val;\n                    this.screenSaver && this.screenSaver.HandleScreensaverStatusIcons();\n                    //this.statesControler.setInternalState(`${this.name}/cmd/bigIconRight`, !!state.val, true);\n                    this.library.writeFromJson(\n                        `panels.${this.name}.info`,\n                        'panel.panels.info',\n                        genericStateObjects,\n                        this.info,\n                    );\n                    break;\n                }\n                case 'cmd/screensaverTimeout': {\n                    if (typeof state.val !== 'boolean') {\n                        const val = parseInt(String(state.val));\n                        this.timeout = val;\n                        this.sendScreeensaverTimeout(this.timeout);\n                        this.statesControler.setInternalState(`${this.name}/cmd/screensaverTimeout`, val, true);\n                        this.library.writedp(`panels.${this.name}.cmd.screensaverTimeout`, this.timeout);\n                    }\n                    break;\n                }\n                case 'cmd/dimStandby': {\n                    const val = parseInt(String(state.val));\n                    this.dimMode.low = val;\n                    this.sendDimmode();\n                    this.library.writedp(`panels.${this.name}.cmd.dimStandby`, this.dimMode.low);\n                    break;\n                }\n                case 'cmd/dimActive': {\n                    const val = parseInt(String(state.val));\n                    this.dimMode.high = val;\n                    this.sendDimmode();\n                    this.library.writedp(`panels.${this.name}.cmd.dimActive`, this.dimMode.high);\n                    break;\n                }\n                case 'cmd/NotificationCleared2':\n                case 'cmd/NotificationCleared': {\n                    await this.controller.systemNotification.clearNotification(this.notifyIndex);\n                }\n                case 'cmd/NotificationNext2':\n                case 'cmd/NotificationNext': {\n                    this.notifyIndex = this.controller.systemNotification.getNotificationIndex(++this.notifyIndex);\n\n                    if (this.notifyIndex !== -1) {\n                        const val = this.controller.systemNotification.getNotification(this.notifyIndex);\n                        if (val)\n                            await this.statesControler.setInternalState(\n                                `${this.name}/cmd/popupNotification${token.endsWith('2') ? '' : '2'}`,\n                                JSON.stringify(val),\n                                false,\n                            );\n                        break;\n                    }\n                    this.HandleIncomingMessage({\n                        type: 'event',\n                        method: 'buttonPress2',\n                        id: 'popupNotify',\n                        action: 'bExit',\n                        opt: '',\n                    });\n                    break;\n                }\n                case 'cmd/TasmotaRestart': {\n                    this.sendToTasmota(this.topic + '/cmnd/Restart', '1');\n                    this.log.info('Restart Tasmota!');\n                    this.isOnline = false;\n                    break;\n                }\n            }\n            this.statesControler.setInternalState(id, state.val, true);\n        }\n        switch (token) {\n            case 'cmd/bigIconLeft': {\n                return this.info.nspanel.bigIconLeft;\n            }\n            case 'cmd/bigIconRight': {\n                return this.info.nspanel.bigIconRight;\n            }\n            case 'cmd/screensaverTimeout': {\n                return this.timeout;\n            }\n            case 'cmd/dimStandby': {\n                return this.dimMode.low;\n            }\n            case 'cmd/dimActive': {\n                return this.dimMode.high;\n            }\n            case 'cmd/detachLeft': {\n                return this.detach.left;\n            }\n            case 'cmd/detachRight': {\n                return this.detach.right;\n            }\n            case 'cmd/popupNotification2':\n            case 'cmd/popupNotification': {\n                if (this.notifyIndex !== -1) {\n                    const val = this.controller.systemNotification.getNotification(this.notifyIndex);\n                    if (val) return JSON.stringify(val);\n                }\n                return null;\n            }\n            case 'info/tasmotaVersion': {\n                return this.info.tasmota.firmwareversion + '\\r\\n' + this.info.tasmota.onlineVersion;\n            }\n            case 'info/displayVersion': {\n                return this.info.nspanel.displayVersion;\n            }\n            case 'info/modelVersion': {\n                return this.info.nspanel.model;\n            }\n            case 'info/Tasmota': {\n                return this.info.tasmota;\n            }\n        }\n        return null;\n    };\n\n    /**\n     * Convert incoming string to event msg object\n     * @param msg\n     * @returns\n     */\n    private convertToEvent(msg: string): Types.IncomingEvent | null {\n        try {\n            msg = (JSON.parse(msg) || {}).CustomRecv;\n        } catch (e) {\n            this.log.warn('Receive a broken msg from mqtt: ' + msg);\n        }\n        if (msg === undefined) return null;\n        const temp = msg.split(',');\n        if (!Types.isEventType(temp[0])) return null;\n        if (!Types.isEventMethod(temp[1])) return null;\n        let popup: undefined | string = undefined;\n        if (temp[1] === 'pageOpenDetail') popup = temp.splice(2, 1)[0];\n        const arr = String(temp[2]).split('?');\n        if (arr[3])\n            return {\n                type: temp[0],\n                method: temp[1],\n                target: parseInt(arr[3]),\n                page: parseInt(arr[1]),\n                cmd: parseInt(arr[0]),\n                popup: popup,\n                id: arr[2],\n                action: pages.isButtonActionType(temp[3]) ? temp[3] : temp[3],\n                opt: temp[4] ?? '',\n            };\n        if (arr[2])\n            return {\n                type: temp[0],\n                method: temp[1],\n                page: parseInt(arr[0]),\n                cmd: parseInt(arr[1]),\n                popup: popup,\n                id: arr[2],\n                action: pages.isButtonActionType(temp[3]) ? temp[3] : temp[3],\n                opt: temp[4] ?? '',\n            };\n        else if (arr[1])\n            return {\n                type: temp[0],\n                method: temp[1],\n                page: parseInt(arr[0]),\n                popup: popup,\n                id: arr[1],\n                action: pages.isButtonActionType(temp[3]) ? temp[3] : temp[3],\n                opt: temp[4] ?? '',\n            };\n        else\n            return {\n                type: temp[0],\n                method: temp[1],\n                popup: popup,\n                id: arr[0],\n                action: pages.isButtonActionType(temp[3]) ? temp[3] : temp[3],\n                opt: temp[4] ?? '',\n            };\n    }\n\n    /*\n    function HandleMessage(typ: string, method: NSPanel.EventMethod, page: number | undefined, words: string[] | undefined): void {\n        try {\n            if (typ == 'event') {\n                switch (method as NSPanel.EventMethod) {\n                    case 'startup':\n                        screensaverEnabled = false;\n                        UnsubscribeWatcher();\n                        HandleStartupProcess();\n                        pageId = 0;\n                        GeneratePage(config.pages[0]);\n                        if (Debug) log('HandleMessage -> Startup', 'info');\n                        Init_Release();\n                        break;\n                    case 'sleepReached':\n                        useMediaEvents = false;\n                        screensaverEnabled = true;\n                        if (pageId < 0)\n                            pageId = 0;\n                        HandleScreensaver();\n                        if (Debug) log('HandleMessage -> sleepReached', 'info');\n                        break;\n                    case 'pageOpenDetail':\n                        if (words != undefined) {\n                            screensaverEnabled = false;\n                            UnsubscribeWatcher();\n                            if (Debug) {\n                                log('HandleMessage -> pageOpenDetail ' + words[0] + ' - ' + words[1] + ' - ' + words[2] + ' - ' + words[3] + ' - ' + words[4], 'info');\n                            }\n                            let tempId: PageItem['id'];\n                            let tempPageItem = words[3].split('?');\n                            let placeId: number | undefined = undefined;\n                            if (!isNaN(parseInt(tempPageItem[0]))){\n                                tempId = activePage!.items[tempPageItem[0]].id;\n                                placeId = parseInt(tempPageItem[0])\n                                if (tempId == undefined) {\n                                    throw new Error(`Missing id in HandleMessage!`)\n                                }\n                            } else {\n                                tempId = tempPageItem[0];\n                            }\n                            let pageItem: PageItem = findPageItem(tempId);\n                            if (pageItem !== undefined && isPopupType(words[2])) {\n                                let temp: string | NSPanel.mediaOptional | undefined = tempPageItem[1]\n                                if (isMediaOptional(temp)) SendToPanel(GenerateDetailPage(words[2], temp, pageItem, placeId));\n                                else SendToPanel(GenerateDetailPage(words[2], undefined, pageItem, placeId));\n                            }\n                        }\n                        break;\n                    case 'buttonPress2':\n                        screensaverEnabled = false;\n                        HandleButtonEvent(words);\n                        if (Debug) {\n                            if (words != undefined) log('HandleMessage -> buttonPress2 ' + words[0] + ' - ' + words[1] + ' - ' + words[2] + ' - ' + words[3] + ' - ' + words[4], 'info');\n                        }\n                        break;\n                    case 'renderCurrentPage':\n                        // Event only for HA at this Moment\n                        if (Debug) log('renderCurrentPage', 'info');\n                        break;\n                    case 'button1':\n                    case 'button2':\n                        screensaverEnabled = false;\n                        HandleHardwareButton(method);\n                        if (Debug) log('HandleMessage -> button1 /  button2', 'info')\n                        break;\n                    default:\n                        break;\n                }\n            }\n        } catch (err: any) {\n            log('error at function HandleMessage: ' + err.message, 'warn');\n        }\n    }*/\n}\n"],
  "mappings": "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",
  "names": ["state"]
}
