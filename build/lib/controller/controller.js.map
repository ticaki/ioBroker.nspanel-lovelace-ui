{
  "version": 3,
  "sources": ["../../../src/lib/controller/controller.ts"],
  "sourcesContent": ["import type * as MQTT from '../classes/mqtt';\nimport * as Library from './library';\nimport { StatesControler } from './states-controller';\nimport * as Panel from './panel';\nimport { genericStateObjects } from '../const/definition';\nimport { SystemNotifications } from '../classes/system-notifications';\nimport { getInternalDefaults, getRGBFromValue } from '../const/tools';\nimport type { nsPanelState, nsPanelStateVal } from '../types/types';\nimport type { ColorThemenInterface } from '../const/Color';\nimport { Color } from '../const/Color';\nimport type { PageAlarm } from '../pages/pageAlarm';\nimport type { AlarmStates, PagePopupDataDetails } from '../types/pages';\n\n/**\n * Controller Class\n */\nexport class Controller extends Library.BaseClass {\n    mqttClient: MQTT.MQTTClientClass;\n    statesControler: StatesControler;\n    panels: Panel.Panel[] = [];\n    private minuteLoopTimeout: ioBroker.Timeout | undefined;\n    private dateUpdateTimeout: ioBroker.Timeout | undefined;\n    private dailyIntervalTimeout: ioBroker.Interval | undefined;\n    private dataCache: Record<string, { time: number; data: any }> = {};\n    private options: { mqttClient: MQTT.MQTTClientClass; name: string; panels: Partial<Panel.panelConfigPartial>[] };\n    public globalPanelInfo: { availableTftFirmwareVersion: string; availableTasmotaFirmwareVersion: string } = {\n        availableTftFirmwareVersion: '',\n        availableTasmotaFirmwareVersion: '',\n    };\n\n    systemNotification: SystemNotifications;\n\n    constructor(\n        adapter: Library.AdapterClassDefinition,\n        options: { mqttClient: MQTT.MQTTClientClass; name: string; panels: Partial<Panel.panelConfigPartial>[] },\n    ) {\n        super(adapter, options.name);\n        switch (this.adapter.config.colorTheme) {\n            case 1:\n                Color.setTheme(Color.topicalTheme);\n                break;\n            case 2:\n                Color.setTheme(Color.technicalTheme);\n                break;\n            case 3:\n                Color.setTheme(Color.sunsetTheme);\n                break;\n            case 4:\n                Color.setTheme(Color.volcanoTheme);\n                break;\n            case 5: {\n                // Benutzerdefiniertes Theme: Basis = Default + Overrides\n                const custom = this.buildCustomColorTheme();\n                Color.setTheme(custom);\n                this.adapter.log.debug(`Custom ColorTheme angewendet: ${JSON.stringify(custom)}`);\n                break;\n            }\n            case 0:\n            default:\n                Color.setTheme(Color.defaultTheme);\n                break;\n        }\n        this.adapter.controller = this;\n        this.mqttClient = options.mqttClient;\n        this.statesControler = new StatesControler(this.adapter);\n        this.systemNotification = new SystemNotifications(this.adapter);\n        this.options = options;\n        if (this.adapter.mqttServer) {\n            this.adapter.mqttServer.controller = this;\n        }\n        void this.init(options.panels);\n        this.log.debug(`${this.name} created`);\n    }\n\n    minuteLoop = async (): Promise<void> => {\n        const now = new Date();\n        const minute = now.getMinutes();\n\n        try {\n            // Top-of-hour: Dimmode an alle Panels\n            if (minute === 0) {\n                for (const panel of this.panels) {\n                    panel.sendDimmode();\n                }\n            }\n\n            // Jede 5. Minute bei Minute==1,6,11,...\n            if (minute % 5 === 1) {\n                for (const panel of this.panels) {\n                    panel.requestStatusTasmota();\n                }\n            }\n\n            const currentTime = await this.getCurrentTime();\n            await this.statesControler.setInternalState('///time', currentTime, true);\n            const currentTimeString = await this.getCurrentTimeString();\n            await this.statesControler.setInternalState('///timeString', currentTimeString, true);\n            await this.adapter.delay(10);\n        } catch (e) {\n            this.log.error(`minuteLoop error: ${e instanceof Error ? e.message : JSON.stringify(e)}`);\n            // Fehler werden geschluckt, damit die Loop nicht stoppt\n        }\n\n        // N\u00E4chste Ausf\u00FChrung exakt zur n\u00E4chsten Minute (+10 ms Puffer)\n        const next = new Date(now);\n        next.setSeconds(0, 10);\n        next.setMinutes(now.getMinutes() + 1);\n        const diff = next.getTime() - Date.now();\n        if (this.unload || this.adapter.unload) {\n            return;\n        }\n        this.minuteLoopTimeout = this.adapter.setTimeout(() => this.minuteLoop(), diff);\n    };\n\n    /**\n     * Update Date every day at 0:00:01....\n     *\n     * @returns void\n     */\n    hourLoop = async (): Promise<void> => {\n        // Zeitpunkt: n\u00E4chster Tag 00:00:01\n        const now = new Date();\n        const next = new Date(now);\n        const hourNow = now.getHours();\n        next.setHours(now.getHours() + 1, 0, 4);\n\n        const diff = next.getTime() - now.getTime();\n\n        try {\n            if (hourNow === 0) {\n                const currentTime = await this.getCurrentTime();\n                this.log.debug(`Set current Date with time: ${new Date(currentTime).toString()}`);\n                await this.statesControler.setInternalState('///date', currentTime, true);\n            }\n        } catch (err: any) {\n            this.log.error(`dateUpdateLoop failed: ${err}`);\n        }\n\n        if (hourNow % 8 === 0) {\n            await this.checkOnlineVersion();\n        }\n        if (this.unload || this.adapter.unload) {\n            return;\n        }\n        this.dateUpdateTimeout = this.adapter.setTimeout(() => this.hourLoop(), diff);\n    };\n    getCurrentTime = async (): Promise<number> => {\n        return new Promise(resolve => resolve(Date.now()));\n    };\n    getCurrentTimeString = async (): Promise<string> => {\n        return new Promise(resolve =>\n            resolve(new Date().toLocaleString('de-DE', { hour: '2-digit', minute: '2-digit' })),\n        );\n    };\n\n    /**\n     * Handles internal commands based on the provided id and state.\n     *\n     * @param id - The identifier for the internal command.\n     * @param _state - The state associated with the command.\n     * @returns The value of the internal state or null if not applicable.\n     */\n    onInternalCommand = async (id: string, _state: nsPanelState | undefined): Promise<nsPanelStateVal> => {\n        if (!id.startsWith('///')) {\n            return null;\n        }\n        const token = id.split('///').pop();\n        switch (token) {\n            case 'cmd/NotificationCustomID': {\n                if (!_state || typeof _state.val === 'object') {\n                    break;\n                }\n                await this.library.writedp(`pagePopup.id`, _state.val, genericStateObjects.panel.panels.pagePopup.id);\n                break;\n            }\n            case 'cmd/NotificationCustomRight': {\n                if (!_state || typeof _state.val === 'object') {\n                    break;\n                }\n                await this.library.writedp(\n                    `pagePopup.buttonRight`,\n                    _state.val,\n                    genericStateObjects.panel.panels.pagePopup.buttonRight,\n                );\n                break;\n            }\n            case 'cmd/NotificationCustomLeft': {\n                if (!_state || typeof _state.val === 'object') {\n                    break;\n                }\n                await this.library.writedp(\n                    `pagePopup.buttonLeft`,\n                    _state.val,\n                    genericStateObjects.panel.panels.pagePopup.buttonLeft,\n                );\n                break;\n            }\n            case 'cmd/NotificationCustomMid': {\n                if (!_state || typeof _state.val === 'object') {\n                    break;\n                }\n                await this.library.writedp(\n                    `pagePopup.buttonMid`,\n                    _state.val,\n                    genericStateObjects.panel.panels.pagePopup.buttonMid,\n                );\n                break;\n            }\n            case 'AdapterStoppedBoolean':\n            case 'AdapterNoConnectionBoolean':\n            case 'AdapterNoConnection':\n            case 'AdapterStopped': {\n                if (this.dataCache[token] && this.dataCache[token].time < Date.now() - 5000) {\n                    delete this.dataCache[token];\n                }\n                let save = false;\n                if (!this.dataCache[token]) {\n                    this.dataCache[token] = { time: Date.now(), data: {} };\n                    save = true;\n                }\n                let list;\n                if (save) {\n                    list = await this.adapter.getObjectViewAsync('system', 'instance', {\n                        startkey: `system.adapter`,\n                        endkey: `system.adapter}`,\n                    });\n                    this.dataCache[token].data[`system#view.instance`] = list;\n                } else {\n                    list = this.dataCache[token].data[`system#view.instance`];\n                }\n                if (!list || !list.token) {\n                    return null;\n                }\n\n                let total = 0;\n                let withProblems = 0;\n                for (const item of list.rows) {\n                    const obj = item.value;\n                    if (!obj.common.enabled || obj.common.mode !== 'daemon') {\n                        continue;\n                    }\n                    if (token === 'AdapterStopped' || token === 'AdapterStoppedBoolean') {\n                        let state;\n                        if (save) {\n                            state = await this.adapter.getForeignStateAsync(`${item.id}.alive`);\n                            this.dataCache[token].data[`${item.id}.alive`] = state;\n                        } else {\n                            state = this.dataCache[token].data[`${item.id}.alive`];\n                        }\n                        if (state && !state.val) {\n                            withProblems++;\n                            if (token === 'AdapterStoppedBoolean') {\n                                return true;\n                            }\n                        }\n                        total++;\n                    } else if (token === 'AdapterNoConnection' || token === 'AdapterNoConnectionBoolean') {\n                        const nID = item.id.split('.').slice(2).join('.');\n                        let state;\n                        if (save) {\n                            state = await this.adapter.getForeignStateAsync(`${nID}.info.connection`);\n                            this.dataCache[token].data[`${nID}.info.connection`] = state;\n                        } else {\n                            state = this.dataCache[token].data[`${nID}.info.connection`];\n                        }\n                        if (state && !state.val) {\n                            withProblems++;\n                            if (token === 'AdapterNoConnectionBoolean') {\n                                return true;\n                            }\n                        }\n                        total++;\n                    }\n                }\n                if (token === 'AdapterNoConnectionBoolean' || token === 'AdapterStoppedBoolean') {\n                    return false;\n                }\n                return `(${withProblems}/${total})`;\n            }\n        }\n        return null;\n    };\n\n    async init(panels: Partial<Panel.panelConfigPartial>[]): Promise<void> {\n        await this.statesControler.setInternalState(\n            '///time',\n            await this.getCurrentTime(),\n            true,\n            {\n                name: '',\n                type: 'number',\n                role: 'value.time',\n                read: true,\n                write: false,\n            },\n            this.getCurrentTime,\n        );\n        await this.statesControler.setInternalState(\n            '///timeString',\n            await this.getCurrentTimeString(),\n            true,\n            {\n                name: '',\n                type: 'string',\n                role: 'text',\n                read: true,\n                write: false,\n            },\n            this.getCurrentTimeString,\n        );\n        await this.statesControler.setInternalState(\n            '///date',\n            await this.getCurrentTime(),\n            true,\n            {\n                name: '',\n                type: 'number',\n                role: 'value.time',\n                read: true,\n                write: false,\n            },\n            this.getCurrentTime,\n        );\n        await this.statesControler.setInternalState(\n            `///AdapterNoConnection`,\n            '',\n            true,\n            getInternalDefaults('string', 'text', false),\n            this.onInternalCommand,\n        );\n        await this.statesControler.setInternalState(\n            `///AdapterStopped`,\n            '',\n            true,\n            getInternalDefaults('string', 'text', false),\n            this.onInternalCommand,\n        );\n        await this.statesControler.setInternalState(\n            `///AdapterNoConnectionBoolean`,\n            true,\n            true,\n            getInternalDefaults('boolean', 'indicator', false),\n            this.onInternalCommand,\n        );\n        await this.statesControler.setInternalState(\n            `///AdapterStoppedBoolean`,\n            true,\n            true,\n            getInternalDefaults('boolean', 'indicator', false),\n            this.onInternalCommand,\n        );\n        await this.statesControler.setInternalState(\n            `///cmd/NotificationCustomLeft`,\n            '',\n            true,\n            getInternalDefaults('string', 'text', false),\n            this.onInternalCommand,\n        );\n        await this.statesControler.setInternalState(\n            `///cmd/NotificationCustomMid`,\n            '',\n            true,\n            getInternalDefaults('string', 'text', false),\n            this.onInternalCommand,\n        );\n        await this.statesControler.setInternalState(\n            `///cmd/NotificationCustomRight`,\n            '',\n            true,\n            getInternalDefaults('string', 'text', false),\n            this.onInternalCommand,\n        );\n        await this.statesControler.setInternalState(\n            `///cmd/NotificationCustomID`,\n            '',\n            true,\n            getInternalDefaults('string', 'text', false),\n            this.onInternalCommand,\n        );\n        //const newPanels = [];\n        // erzeuge \u00FCbergeordneten channel\n        await this.library.writedp(`panels`, undefined, genericStateObjects.panel._channel);\n\n        await this.library.writedp(`pagePopup`, undefined, genericStateObjects.panel.panels.pagePopup._channel);\n\n        for (const key of Object.keys(genericStateObjects.panel.panels.pagePopup)) {\n            if (key !== '_channel') {\n                await this.library.writedp(\n                    `pagePopup.${key}`,\n                    undefined,\n                    genericStateObjects.panel.panels.pagePopup[\n                        key as keyof typeof genericStateObjects.panel.panels.pagePopup\n                    ],\n                );\n            }\n        }\n        void this.systemNotification.init();\n\n        const tasks: Promise<void>[] = [];\n        for (const panelConfig of panels) {\n            if (panelConfig === undefined) {\n                continue;\n            }\n            tasks.push(this.addPanel(structuredClone(panelConfig)));\n        }\n\n        await Promise.all(tasks);\n        void this.minuteLoop();\n        void this.hourLoop();\n        await this.checkOnlineVersion();\n    }\n\n    addPanel = async (panel: Partial<Panel.panelConfigPartial>): Promise<void> => {\n        let index = this.panels.findIndex(p => p.topic === panel.topic);\n        if (index !== -1) {\n            this.adapter.testSuccessful = false;\n            this.adapter.log.error(`Panel ${panel.name} with topic ${panel.topic} already exists`);\n            return;\n        }\n        index = this.adapter.config.panels.findIndex(p => p.topic === panel.topic);\n        if (index === -1) {\n            this.adapter.testSuccessful = false;\n            this.adapter.log.error(`Panel ${panel.name} with topic ${panel.topic} not found in config`);\n            return;\n        }\n\n        panel.name = this.adapter.config.panels[index].id;\n        panel.friendlyName = this.adapter.config.panels[index].name;\n        panel.controller = this;\n        // merge adapter navigation\n        const o = await this.adapter.getForeignObjectAsync(this.adapter.namespace);\n        if (panel?.topic && o && o.native && o.native.navigation) {\n            if (o.native.navigation[panel.topic] && o.native.navigation[panel.topic].useNavigation) {\n                panel.navigation = o.native.navigation[panel.topic].data;\n            }\n        }\n        //try {\n        const newPanel = new Panel.Panel(this.adapter, panel as Panel.panelConfigPartial);\n        if (await newPanel.isValid()) {\n            await newPanel.init();\n\n            this.panels.push(newPanel);\n            newPanel.initDone = true;\n            this.log.debug(`Panel ${newPanel.name} created`);\n        } else {\n            await newPanel.delete();\n            this.adapter.testSuccessful = false;\n            this.log.error(`Panel ${panel.name} has a invalid configuration.`);\n        }\n        /*} catch (e) {\n            this.log.error(\n                `Panel ${panel.name} with topic ${panel.topic} cannot be created: ${e instanceof Error ? e.message : JSON.stringify(e)}`,\n            );\n            return;\n        }*/\n    };\n\n    removePanel = async (panel: Panel.Panel): Promise<void> => {\n        const index = this.panels.findIndex(p => p.topic === panel.topic);\n        if (index !== -1) {\n            this.panels.splice(index, 1);\n            await panel.delete();\n            this.log.info(`Panel ${panel.topic} deleted`);\n        } else {\n            this.log.error(`Panel ${panel.topic} not found`);\n        }\n    };\n\n    mqttClientConnected = (id: string): boolean | undefined => {\n        if (id === this.mqttClient.clientId) {\n            return true;\n        }\n        const index = this.panels.findIndex(p => id.startsWith(this.library.cleandp(p.friendlyName)));\n        if (index !== -1) {\n            if (this.panels[index].initDone) {\n                this.panels[index].restartLoops();\n                return true;\n            }\n        }\n        return false;\n    };\n\n    async setGlobalNotificationDismiss(id: string): Promise<void> {\n        if (!id) {\n            return;\n        }\n        for (const panel of this.panels) {\n            if (panel.screenSaver) {\n                await panel.screenSaver.setGlobalNotificationDismiss(id);\n            }\n        }\n    }\n\n    async setGlobalAlarmStatus(name: string, status: AlarmStates): Promise<void> {\n        for (const panel of this.panels) {\n            // @ts-expect-error accessing private subclass property\n            for (const page of panel.pages) {\n                if (page?.card === 'cardAlarm' && 'isGlobal' in page && page.isGlobal && page.name === name) {\n                    await (page as PageAlarm).setStatusGlobal(status);\n                }\n            }\n        }\n    }\n\n    async delete(): Promise<void> {\n        this.unload = true;\n        if (this.minuteLoopTimeout) {\n            this.adapter.clearTimeout(this.minuteLoopTimeout);\n        }\n        if (this.dateUpdateTimeout) {\n            this.adapter.clearTimeout(this.dateUpdateTimeout);\n        }\n        if (this.dailyIntervalTimeout) {\n            this.adapter.clearInterval(this.dailyIntervalTimeout);\n        }\n        if (this.systemNotification) {\n            await this.systemNotification.delete();\n        }\n        if (this.statesControler) {\n            await this.statesControler.delete();\n        }\n        const tasks: Promise<void>[] = [];\n        for (const a of this.panels) {\n            if (a) {\n                tasks.push(a.delete());\n            }\n        }\n        await Promise.all(tasks);\n        this.panels = [];\n        this.dataCache = {};\n        await super.delete();\n    }\n    async setPopupNotification(data: unknown): Promise<void> {\n        let temp: any;\n        try {\n            temp = typeof data === 'string' ? JSON.parse(data) : data;\n        } catch {\n            this.log.error('setPopupNotification: Invalid data format, must be valid JSON or object');\n            return;\n        }\n        this.log.debug(`setPopupNotification called with data: ${JSON.stringify(temp)}`);\n        const details: PagePopupDataDetails = {\n            id: typeof temp.id === 'string' ? temp.id : 'missing',\n            priority: typeof temp.priority === 'number' ? temp.priority : 50,\n            alwaysOn: typeof temp.alwaysOn === 'boolean' ? temp.alwaysOn : true,\n            type: typeof temp.type === 'string' ? temp.type : 'information',\n            global: temp.global !== false,\n            headline: typeof temp.headline === 'string' ? temp.headline : 'Missing Headline',\n            text: typeof temp.text === 'string' ? temp.text : 'Missing Text',\n            buttonLeft: typeof temp.buttonLeft === 'string' ? temp.buttonLeft : '',\n            buttonMid: typeof temp.buttonMid === 'string' ? temp.buttonMid : '',\n            buttonRight: typeof temp.buttonRight === 'string' ? temp.buttonRight : '',\n            icon: typeof temp.icon === 'string' ? temp.icon : undefined,\n            iconColor: temp.iconColor != null ? getRGBFromValue(temp.iconColor) : undefined,\n            textSize:\n                typeof temp.textSize === 'string'\n                    ? temp.textSize\n                    : typeof temp.textSize === 'number'\n                      ? String(temp.textSize)\n                      : undefined,\n            colorHeadline: temp.colorHeadline != null ? getRGBFromValue(temp.colorHeadline) : undefined,\n            colorText: temp.colorText != null ? getRGBFromValue(temp.colorText) : undefined,\n            colorButtonLeft: temp.colorButtonLeft != null ? getRGBFromValue(temp.colorButtonLeft) : undefined,\n            colorButtonMid: temp.colorButtonMid != null ? getRGBFromValue(temp.colorButtonMid) : undefined,\n            colorButtonRight: temp.colorButtonRight != null ? getRGBFromValue(temp.colorButtonRight) : undefined,\n            buzzer: !temp.buzzer || !(temp.buzzer === true || typeof temp.buzzer === 'string') ? false : temp.buzzer,\n        };\n        /**\n         type PagePopupDataDetails = {\n             headline: string;\n             text: string;\n             panel?: string | string[];\n             global?: boolean; // without panel default is true\n             priority?: number;\n             type?: 'information' | 'acknowledge';\n             id?: string;\n             colorHeadline?: {r:number,g:number,b:number} | string;\n             buttonLeft?: string;\n             colorButtonLeft?: {r:number,g:number,b:number} | string;\n             buttonMid?: string;\n             colorButtonMid?: {r:number,g:number,b:number} | string;\n             buttonRight?: string;\n             colorButtonRight?: {r:number,g:number,b:number} | string;\n             colorText?: {r:number,g:number,b:number} | string;\n             textSize?: string;\n             icon?: string;\n             iconColor?: {r:number,g:number,b:number};\n             alwaysOn?: boolean;\n             buzzer?: boolean | string;\n         };\n         */\n        let panels: Panel.Panel[] = [];\n        if (!temp.panel) {\n            panels = this.panels;\n        } else {\n            if (!Array.isArray(temp.panel)) {\n                temp.panel = [temp.panel];\n            }\n            for (const pName of temp.panel) {\n                const panel = this.panels.find(p => p.name === pName || p.friendlyName === pName);\n                if (!panel) {\n                    this.log.error(`setPopupMessage: Panel ${pName} not found`);\n                    continue;\n                }\n                panels.push(panel);\n            }\n        }\n        temp.global = details.global && panels.length > 1;\n        for (const panel of panels) {\n            await this.statesControler.setInternalState(\n                `${panel.name}/cmd/popupNotificationCustom`,\n                JSON.stringify(details),\n                false,\n            );\n        }\n    }\n    async notificationToPanel(): Promise<void> {\n        if (!this.panels) {\n            return;\n        }\n        await this.statesControler.setInternalState('///Notifications', true, true);\n    }\n\n    checkOnlineVersion = async (): Promise<void> => {\n        await this.getTFTVersion();\n        await this.getTasmotaVersion();\n    };\n\n    async getTFTVersion(): Promise<void> {\n        try {\n            const result = (await this.adapter.fetch(\n                'https://raw.githubusercontent.com/ticaki/ioBroker.nspanel-lovelace-ui/main/json/version.json',\n            )) as Record<string, string> | undefined;\n\n            const data = result;\n            if (!data) {\n                this.log.error('No version data received.');\n                return;\n            }\n\n            const version = this.adapter.config.useBetaTFT\n                ? result['tft-beta'].split('_')[0]\n                : result.tft.split('_')[0];\n            this.globalPanelInfo.availableTftFirmwareVersion = version.trim();\n\n            for (const panel of this.panels) {\n                panel.info.nspanel.onlineVersion = this.globalPanelInfo.availableTftFirmwareVersion;\n            }\n\n            this.globalPanelInfo.availableTasmotaFirmwareVersion = result.tasmota.trim();\n\n            for (const panel of this.panels) {\n                panel.info.tasmota.onlineVersion = this.globalPanelInfo.availableTasmotaFirmwareVersion;\n            }\n        } catch {\n            // nothing\n        }\n    }\n    async getTasmotaVersion(): Promise<string> {\n        try {\n            const result = (await this.adapter.fetch(\n                'https://raw.githubusercontent.com/ticaki/ioBroker.nspanel-lovelace-ui/main/json/version.json',\n            )) as Record<string, string>;\n            // Filter JSON by \"tag_name\" and write to variable\n            const TasmotaVersionOnline = result.tasmota.trim();\n\n            this.globalPanelInfo.availableTasmotaFirmwareVersion = TasmotaVersionOnline;\n            for (const panel of this.panels) {\n                panel.info.tasmota.onlineVersion = this.globalPanelInfo.availableTasmotaFirmwareVersion;\n            }\n        } catch {\n            // do nothing\n        }\n        return this.globalPanelInfo?.availableTasmotaFirmwareVersion ?? '';\n    }\n\n    /**\n     * Baut ein zusammengefasstes Farb-Objekt aus allen Color-Accordion Arrays.\n     * Nimmt Color.defaultTheme als Basis und \u00FCberschreibt nur definierte Werte.\n     */\n    private buildCustomColorTheme(): ColorThemenInterface {\n        const cfg = this.adapter.config as unknown as {\n            colorStates?: any[];\n            colorNavigation?: any[];\n            colorWeatherIcon?: any[];\n            colorDisplay?: any[];\n            colorWeatherForecast?: any[];\n            colorScreensaver?: any[];\n            colorCardMedia?: any[];\n        };\n\n        // Start with a full copy of the default theme\n        const result: ColorThemenInterface = { ...Color.defaultTheme };\n\n        const merge = (arr?: Array<Record<string, string>>): void => {\n            if (!Array.isArray(arr) || !arr[0]) {\n                return;\n            }\n            for (const [k, v] of Object.entries(arr[0])) {\n                if (typeof v === 'string' && v.trim() !== '' && /^col[A-Z]/.test(k)) {\n                    // entferne col-Pr\u00E4fix und schreibe den ersten Buchstaben klein (colGood -> good)\n                    const keyNoPrefix = k.replace(/^col/, '');\n                    const kTemp = keyNoPrefix.length\n                        ? keyNoPrefix.charAt(0).toLowerCase() + keyNoPrefix.slice(1)\n                        : keyNoPrefix;\n                    if (Color.isHex(v)) {\n                        const colRgb = Color.ConvertHexToRgb(v);\n                        if (Color.isRGB(colRgb) && kTemp in result) {\n                            result[kTemp as keyof typeof result] = colRgb;\n                        }\n                    } else {\n                        this.log.debug(`Color property ${k} with value ${v} is not valid and will be ignored.`);\n                    }\n                }\n            }\n        };\n\n        merge(cfg.colorStates);\n        merge(cfg.colorNavigation);\n        merge(cfg.colorWeatherIcon);\n        merge(cfg.colorDisplay);\n        merge(cfg.colorWeatherForecast);\n        merge(cfg.colorScreensaver);\n        merge(cfg.colorCardMedia);\n\n        return result;\n    }\n}\n"],
  "mappings": "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",
  "names": []
}
