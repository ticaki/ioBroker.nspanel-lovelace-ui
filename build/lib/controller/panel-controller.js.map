{
  "version": 3,
  "sources": ["../../../src/lib/controller/panel-controller.ts"],
  "sourcesContent": ["import * as MQTT from '../classes/mqtt';\nimport * as Library from '../classes/library';\nimport { StatesDBReadOnly } from './states-controller';\nimport * as Panel from './panel';\nimport { AdapterType } from '../../main';\n\nexport class Controller extends Library.BaseClass {\n    mqttClient: MQTT.MQTTClientClass;\n    private DBPanels: Panel.Panel[] = [];\n    readOnlyDB: StatesDBReadOnly;\n\n    constructor(\n        adapter: AdapterType,\n        options: { mqttClient: MQTT.MQTTClientClass; name: string; panels: Partial<Panel.panelConfigPartial>[] },\n    ) {\n        super(adapter, options.name);\n        this.adapter.controller = this;\n        this.mqttClient = options.mqttClient;\n        this.readOnlyDB = new StatesDBReadOnly(this.adapter);\n        for (const panelConfig of options.panels) {\n            panelConfig.controller = this;\n            if (!Panel.isPanelConfig(panelConfig)) {\n                this.log.warn(`Panelconfig for ${panelConfig.name} is invalid!`);\n                continue;\n            }\n            const panel = new Panel.Panel(adapter, panelConfig);\n            this.checkPanel(panel);\n        }\n    }\n    async checkPanel(panel: Panel.Panel): Promise<void> {\n        if (await panel.isValid()) {\n            this.DBPanels.push(panel);\n            await panel.init();\n        } else {\n            panel.delete();\n            this.log.error(`Panel ${panel.name} has a invalid configuration.`);\n        }\n    }\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,cAAyB;AACzB,+BAAiC;AACjC,YAAuB;AAGhB,MAAM,mBAAmB,QAAQ,UAAU;AAAA,EAC9C;AAAA,EACQ,WAA0B,CAAC;AAAA,EACnC;AAAA,EAEA,YACI,SACA,SACF;AACE,UAAM,SAAS,QAAQ,IAAI;AAC3B,SAAK,QAAQ,aAAa;AAC1B,SAAK,aAAa,QAAQ;AAC1B,SAAK,aAAa,IAAI,0CAAiB,KAAK,OAAO;AACnD,eAAW,eAAe,QAAQ,QAAQ;AACtC,kBAAY,aAAa;AACzB,UAAI,CAAC,MAAM,cAAc,WAAW,GAAG;AACnC,aAAK,IAAI,KAAK,mBAAmB,YAAY,kBAAkB;AAC/D;AAAA,MACJ;AACA,YAAM,QAAQ,IAAI,MAAM,MAAM,SAAS,WAAW;AAClD,WAAK,WAAW,KAAK;AAAA,IACzB;AAAA,EACJ;AAAA,EACA,MAAM,WAAW,OAAmC;AAChD,QAAI,MAAM,MAAM,QAAQ,GAAG;AACvB,WAAK,SAAS,KAAK,KAAK;AACxB,YAAM,MAAM,KAAK;AAAA,IACrB,OAAO;AACH,YAAM,OAAO;AACb,WAAK,IAAI,MAAM,SAAS,MAAM,mCAAmC;AAAA,IACrE;AAAA,EACJ;AACJ;",
  "names": []
}
