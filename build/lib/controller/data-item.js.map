{
  "version": 3,
  "sources": ["../../../src/lib/controller/data-item.ts"],
  "sourcesContent": ["import { Color, type RGB } from '../const/Color';\nimport { BaseClass } from './library';\nimport type { StatesControler } from './states-controller';\nimport type { BaseTriggeredPage } from '../classes/baseClassPage';\n\nimport * as NSPanel from '../types/types';\n\nexport class Dataitem extends BaseClass {\n    #compiledReadFn?: (\n        val: unknown,\n        Color: Color,\n        language: string,\n        lc: unknown,\n        options: unknown,\n    ) => NSPanel.StateValue;\n    #compiledWriteFn?: (val: unknown, Color: Color) => ioBroker.StateValue;\n    options: NSPanel.DataItemsOptions;\n    //private obj: ioBroker.Object | null | undefined;\n    stateDB: StatesControler;\n    type: ioBroker.CommonType | undefined = undefined;\n    parent: BaseTriggeredPage;\n    common: Partial<ioBroker.StateCommon> = {};\n    private _writeable: boolean = false;\n    /**\n     * Call isValidAndInit() after constructor and check return value - if false, this object is not configured correctly.\n     *\n     * @param adapter this of adapter\n     * @param options {NSPanel.DataItemsOptions}\n     * @param parent {BaseTriggeredPage}\n     * @param db {StatesControler}\n     */\n    constructor(adapter: any, options: NSPanel.DataItemsOptions, parent: BaseTriggeredPage, db: StatesControler) {\n        super(adapter, options.name || '');\n        this.options = options;\n        this.stateDB = db;\n        this.parent = parent;\n        switch (this.options.type) {\n            case 'const': {\n                if (this.options.constVal === '///timeString') {\n                    this.options = {\n                        type: 'internal',\n                        dp: '///timeString',\n                    };\n                }\n                break;\n            }\n        }\n        switch (this.options.type) {\n            case 'const':\n                this.options.constVal = Color.getColorFromDefaultOrReturn(this.options.constVal);\n                this.setTypeFromValue(this.options.constVal);\n                break;\n            case 'state':\n            case 'triggered':\n                this.type = this.options.forceType ? this.options.forceType : undefined;\n                // all work is done in isValidAndInit\n                break;\n            case 'internalState':\n            case 'internal': {\n                if (!this.options.dp.startsWith('///')) {\n                    this.options.dp = `${this.parent.basePanel.name}/${this.options.dp}`;\n                }\n                this.type = undefined;\n            }\n        }\n    }\n    public get writeable(): boolean {\n        return this._writeable;\n    }\n    public set writeable(b: false) {\n        this._writeable = b;\n    }\n    /**\n     * Init and check dp is valid\n     *\n     * @returns if false value is not valid\n     */\n    async isValidAndInit(): Promise<boolean> {\n        switch (this.options.type) {\n            case 'const':\n                return !(this.options.constVal === undefined || this.options.constVal === null);\n            case 'state':\n            case 'internal':\n            case 'internalState':\n            case 'triggered': {\n                if (!this.options.dp) {\n                    return false;\n                }\n                this.options.dp = this.options.dp.replace(\n                    '${this.namespace}',\n                    `${this.adapter.namespace}.panels.${this.parent.basePanel.name}`,\n                );\n                const obj = await this.stateDB.getObjectAsync(this.options.dp);\n                if (!obj || obj.type != 'state' || !obj.common) {\n                    this.log.warn(`801: ${this.options.dp} has a invalid state object!`);\n                    return false;\n                }\n                this.type = this.type || obj.common.type;\n                this.options.role = obj.common.role;\n                this._writeable = !!obj.common.write;\n                this.common = obj.common;\n                if (this.options.type == 'triggered') {\n                    await this.stateDB.setTrigger(this.options.dp, this.parent, false, undefined, this.options.change);\n                } else if (this.options.type == 'internal') {\n                    await this.stateDB.setTrigger(this.options.dp, this.parent, true, undefined, this.options.change);\n                } else if (this.options.type == 'internalState') {\n                    await this.stateDB.setTrigger(this.options.dp, this.parent, true, false);\n                }\n                try {\n                    await this.stateDB.getState(this.options.dp);\n                    return true;\n                } catch (e: any) {\n                    this.log.error(`Error 1001: ${typeof e === 'string' ? e.replaceAll('Error: ', '') : e}`);\n                    return false;\n                }\n            }\n        }\n        return false;\n    }\n    private async getRawState(): Promise<NSPanel.State | null> {\n        try {\n            switch (this.options.type) {\n                case 'const':\n                    return { val: this.options.constVal, ack: true, ts: Date.now(), lc: Date.now(), from: '' };\n                case 'state':\n                case 'triggered':\n                    if (!this.options.dp) {\n                        throw new Error(`Error 1002 type is ${this.options.type} but dp is undefined`);\n                    }\n                    return await this.stateDB.getState(this.options.dp);\n                case 'internalState':\n                case 'internal': {\n                    return await this.stateDB.getState(this.options.dp);\n                }\n            }\n        } catch (e: any) {\n            this.log.error(`Error 1003: ${e.replaceAll('Error: ', '')}`);\n        }\n        return null;\n    }\n\n    trueType(): ioBroker.CommonType | undefined {\n        return 'dp' in this.options ? (this.stateDB.getType(this.options.dp) ?? this.type) : this.type;\n    }\n\n    async getCommonStates(force: boolean = false): Promise<Record<string, string> | null> {\n        return 'dp' in this.options ? this.stateDB.getCommonStates(this.options.dp, force) : null;\n    }\n\n    async getState(): Promise<NSPanel.State | null> {\n        let state = await this.getRawState();\n        if (state) {\n            state = structuredClone(state);\n            if (this.options.type !== 'const' && this.options.read) {\n                try {\n                    if (typeof this.options.read === 'string') {\n                        // compile once and cache\n                        if (!this.#compiledReadFn) {\n                            this.#compiledReadFn = new Function(\n                                'val',\n                                'Color',\n                                'language',\n                                'lc',\n                                'options',\n                                this.options.read,\n                            ) as any;\n                        }\n                        state.val = this.#compiledReadFn!(\n                            state.val,\n                            Color,\n                            this.adapter.language ? this.adapter.language : 'en',\n                            state.lc,\n                            this.options.constants,\n                        );\n                    } else {\n                        state.val = this.options.read(state.val);\n                    }\n                } catch (e) {\n                    this.log.error(\n                        `Read for dp: ${this.options.dp} is invalid! read: ${String(this.options.read)} Error: ${String(e)}`,\n                    );\n                }\n            }\n        }\n        return state;\n    }\n\n    async getObject(): Promise<object | null> {\n        const state = await this.getState();\n        if (state?.val != null) {\n            if (typeof state.val === 'string') {\n                try {\n                    const value = JSON.parse(state.val);\n                    return value;\n                } catch {\n                    let value = state.val;\n                    if (typeof value === 'string') {\n                        value = value.trim();\n                        if (value.startsWith('#')) {\n                            const v = Color.ConvertWithColordtoRgb(value);\n                            if (Color.isRGB(v)) {\n                                return v;\n                            }\n                        } else if (\n                            this.options.role === 'level.color.name' ||\n                            this.options.role === 'level.color.rgb'\n                        ) {\n                            return Color.ConvertWithColordtoRgb(value);\n                        }\n                    }\n                }\n            } else if (typeof state.val === 'object') {\n                return state.val;\n            } else if (typeof state.val === 'number') {\n                return Color.decToRgb(state.val);\n            }\n        }\n        return null;\n    }\n    async getRGBDec(): Promise<string | null> {\n        const value = await this.getRGBValue();\n        if (value) {\n            return String(Color.rgb_dec565(value));\n        }\n        return null;\n    }\n    async getRGBValue(): Promise<RGB | null> {\n        const value = await this.getObject();\n        if (value) {\n            if (Color.isRGB(value)) {\n                return value;\n            }\n            if (typeof value == 'object' && 'red' in value && 'blue' in value && 'green' in value) {\n                return { r: Number(value.red), g: Number(value.green), b: Number(value.blue) };\n            }\n        }\n        return null;\n    }\n    async getIconScale(): Promise<NSPanel.IconScaleElement | null> {\n        const value = await this.getObject();\n        if (value) {\n            if (NSPanel.isIconColorScaleElement(value)) {\n                return value;\n            }\n        }\n        return null;\n    }\n\n    async getTranslatedString(): Promise<string | null> {\n        const val = await this.getString();\n        if (val !== null) {\n            return this.library.getTranslation(val);\n        }\n        return null;\n    }\n\n    /**\n     * Returns the state's value as a string, or `null` if no meaningful value exists.\n     *\n     * Null semantics:\n     * - Returns `null` when the underlying state is missing, or `state.val === null`.\n     * - For `state` / `triggered` with `substring` set, returns `null` if `state` is missing\n     *   or `state.val === null`. (No slicing is attempted in that case.)\n     *\n     * Notes:\n     * - Any non-null value is coerced with `String(...)`.\n     * - This method does NOT distinguish \"state exists but empty string\" \u2014 an empty string\n     *   is a valid (non-null) return value.\n     */\n    async getString(): Promise<string | null> {\n        const state = await this.getState();\n        try {\n            switch (this.options.type) {\n                case 'const':\n                    return state && state.val !== null\n                        ? typeof state.val === 'object'\n                            ? JSON.stringify(state.val)\n                            : String(state.val)\n                        : null;\n                case 'state':\n                case 'triggered':\n                    if (this.options.substring) {\n                        const args = this.options.substring;\n\n                        return state && state.val !== null\n                            ? typeof state.val === 'object'\n                                ? JSON.stringify(state.val)\n                                : String(state.val).substring(args[0], args[1])\n                            : null;\n                    }\n                    return state && state.val !== null\n                        ? typeof state.val === 'object'\n                            ? JSON.stringify(state.val)\n                            : String(state.val)\n                        : null;\n                case 'internalState':\n                case 'internal':\n                    // eslint-disable-next-line @typescript-eslint/no-base-to-string\n                    return state && state.val !== null ? String(state.val) : null;\n            }\n        } catch {\n            this.log.error(`Error in getString for ${this.options.dp}`);\n        }\n        return null;\n    }\n\n    /**\n     * Returns the state's value as a number (scaled when configured), or `null` if not numeric.\n     *\n     * Null semantics:\n     * - Returns `null` when the state is missing, or when `state.val` cannot be interpreted\n     *   as a finite number (e.g., undefined, '', non-numeric text).\n     *\n     * Notes:\n     * - Accepts numeric strings (\"42\", \"3.14\") and numbers.\n     * - When `options.scale` is present, maps the raw value to 0..100 via Color.scale and truncates.\n     * - Returns 0 as a valid number when the parsed value is zero; only non-parsable values yield `null`.\n     */\n    async getNumber(): Promise<number | null> {\n        const result = await this.getState();\n        if (\n            result &&\n            (typeof result.val === 'number' ||\n                (typeof result.val === 'string' && result.val && !isNaN(Number(result.val))))\n        ) {\n            let val = parseFloat(String(result.val));\n            if (this.options.scale !== undefined) {\n                val = Math.trunc(Color.scale(val, this.options.scale.min, this.options.scale.max, 0, 100));\n            }\n            return val;\n        }\n        return null;\n    }\n\n    /**\n     * Returns the state's value as a boolean, or `null` if the datapoint does not exist.\n     *\n     * Boolean mapping:\n     * - String values \"ok\", \"on\", \"yes\", \"true\", \"online\" (case-insensitive) => true\n     * - Any other present value uses JS truthiness via `!!state.val`\n     *\n     * Null vs false semantics:\n     * - If `getState()` returns an object, a boolean is always produced (true/false).\n     * - If `getState()` returns null:\n     *   - If the referenced object exists and is of type \"state\" (via getObjectAsync), returns **false**\n     *     (i.e., \"state exists but currently has no value\" -> treat as off/false).\n     *   - If the object does not exist or is not a \"state\", returns **null**\n     *     (i.e., \"no such datapoint\" -> unknown / not applicable).\n     *\n     * Use cases:\n     * - `false` means the datapoint exists and evaluates to a falsy state.\n     * - `null` means \"cannot decide\": the datapoint is missing or not a state.\n     */\n    async getBoolean(): Promise<boolean | null> {\n        const result = await this.getState();\n        if (result) {\n            if (typeof result.val === 'string') {\n                switch (result.val.toLowerCase()) {\n                    case 'ok':\n                    case 'on':\n                    case 'yes':\n                    case 'true':\n                    case 'online':\n                        return true;\n                }\n            }\n            return !!result.val;\n        }\n        const o = this.options.dp && (await this.parent.basePanel.statesControler.getObjectAsync(this.options.dp));\n        if (o && o.type === 'state') {\n            return false;\n        }\n        return null;\n    }\n\n    private setTypeFromValue(val: NSPanel.StateValue | undefined): void {\n        switch (typeof val) {\n            case 'string':\n                this.type = 'string';\n                break;\n            case 'number':\n            case 'bigint':\n                this.type = 'number';\n                break;\n            case 'boolean':\n                this.type = 'boolean';\n                break;\n            case 'undefined':\n                this.type = undefined;\n                break;\n            case 'symbol':\n            case 'object':\n            case 'function':\n                this.type = 'object';\n        }\n    }\n    async setStateTrue(): Promise<void> {\n        await this.setState(true);\n    }\n    async setStateFalse(): Promise<void> {\n        await this.setState(false);\n    }\n    /**\n     * Flip this 'ON'/'OFF', 0/1 or true/false. Depend on this.type\n     */\n    async setStateFlip(): Promise<void> {\n        const value = await this.getBoolean();\n        this.log.debug(String(value));\n        switch (this.type) {\n            case 'boolean':\n                await this.setState(!value);\n                break;\n            case 'number':\n                await this.setState(value ? 0 : 1);\n                break;\n            case 'string':\n                await this.setState(value ? 'OFF' : 'ON');\n                break;\n        }\n    }\n    /**\n     * Set a internal, const or external State\n     *\n     * @param val number | boolean | string | null\n     * @returns void\n     */\n    async setState(val: ioBroker.StateValue): Promise<void> {\n        if (val === undefined) {\n            return;\n        }\n        if (this.options.type === 'const') {\n            this.options.constVal = val;\n        } else {\n            // in der Klasse\n\n            // ... im passenden Codepfad:\n            try {\n                if (this.options.write) {\n                    if (typeof this.options.write === 'string') {\n                        // compile once and cache\n                        if (!this.#compiledWriteFn) {\n                            this.#compiledWriteFn = new Function('val', 'Color', this.options.write) as any;\n                        }\n                        val = this.#compiledWriteFn!(val, Color);\n                    } else {\n                        val = this.options.write(val);\n                    }\n                }\n            } catch (e) {\n                this.log.error(\n                    `Write for dp: ${this.options.dp} is invalid! write: ${String(this.options.write)} Error: ${String(e)}`,\n                );\n            }\n\n            await this.stateDB.setState(this, val, this._writeable);\n        }\n    }\n}\n\nexport function isDataItem(F: any): F is Dataitem {\n    if (F instanceof Dataitem) {\n        return true;\n    }\n    return false;\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAgC;AAChC,qBAA0B;AAI1B,cAAyB;AALzB;AAOO,MAAM,iBAAiB,yBAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAwBpC,YAAY,SAAc,SAAmC,QAA2B,IAAqB;AACzG,UAAM,SAAS,QAAQ,QAAQ,EAAE;AAxBrC;AAOA;AACA;AAEA;AAAA;AACA;AACA;AACA,kCAAwC,CAAC;AACzC,wBAAQ,cAAsB;AAW1B,SAAK,UAAU;AACf,SAAK,UAAU;AACf,SAAK,SAAS;AACd,YAAQ,KAAK,QAAQ,MAAM;AAAA,MACvB,KAAK,SAAS;AACV,YAAI,KAAK,QAAQ,aAAa,iBAAiB;AAC3C,eAAK,UAAU;AAAA,YACX,MAAM;AAAA,YACN,IAAI;AAAA,UACR;AAAA,QACJ;AACA;AAAA,MACJ;AAAA,IACJ;AACA,YAAQ,KAAK,QAAQ,MAAM;AAAA,MACvB,KAAK;AACD,aAAK,QAAQ,WAAW,mBAAM,4BAA4B,KAAK,QAAQ,QAAQ;AAC/E,aAAK,iBAAiB,KAAK,QAAQ,QAAQ;AAC3C;AAAA,MACJ,KAAK;AAAA,MACL,KAAK;AACD,aAAK,OAAO,KAAK,QAAQ,YAAY,KAAK,QAAQ,YAAY;AAE9D;AAAA,MACJ,KAAK;AAAA,MACL,KAAK,YAAY;AACb,YAAI,CAAC,KAAK,QAAQ,GAAG,WAAW,KAAK,GAAG;AACpC,eAAK,QAAQ,KAAK,GAAG,KAAK,OAAO,UAAU,IAAI,IAAI,KAAK,QAAQ,EAAE;AAAA,QACtE;AACA,aAAK,OAAO;AAAA,MAChB;AAAA,IACJ;AAAA,EACJ;AAAA,EACA,IAAW,YAAqB;AAC5B,WAAO,KAAK;AAAA,EAChB;AAAA,EACA,IAAW,UAAU,GAAU;AAC3B,SAAK,aAAa;AAAA,EACtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAMA,MAAM,iBAAmC;AACrC,YAAQ,KAAK,QAAQ,MAAM;AAAA,MACvB,KAAK;AACD,eAAO,EAAE,KAAK,QAAQ,aAAa,UAAa,KAAK,QAAQ,aAAa;AAAA,MAC9E,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK,aAAa;AACd,YAAI,CAAC,KAAK,QAAQ,IAAI;AAClB,iBAAO;AAAA,QACX;AACA,aAAK,QAAQ,KAAK,KAAK,QAAQ,GAAG;AAAA,UAC9B;AAAA,UACA,GAAG,KAAK,QAAQ,SAAS,WAAW,KAAK,OAAO,UAAU,IAAI;AAAA,QAClE;AACA,cAAM,MAAM,MAAM,KAAK,QAAQ,eAAe,KAAK,QAAQ,EAAE;AAC7D,YAAI,CAAC,OAAO,IAAI,QAAQ,WAAW,CAAC,IAAI,QAAQ;AAC5C,eAAK,IAAI,KAAK,QAAQ,KAAK,QAAQ,EAAE,8BAA8B;AACnE,iBAAO;AAAA,QACX;AACA,aAAK,OAAO,KAAK,QAAQ,IAAI,OAAO;AACpC,aAAK,QAAQ,OAAO,IAAI,OAAO;AAC/B,aAAK,aAAa,CAAC,CAAC,IAAI,OAAO;AAC/B,aAAK,SAAS,IAAI;AAClB,YAAI,KAAK,QAAQ,QAAQ,aAAa;AAClC,gBAAM,KAAK,QAAQ,WAAW,KAAK,QAAQ,IAAI,KAAK,QAAQ,OAAO,QAAW,KAAK,QAAQ,MAAM;AAAA,QACrG,WAAW,KAAK,QAAQ,QAAQ,YAAY;AACxC,gBAAM,KAAK,QAAQ,WAAW,KAAK,QAAQ,IAAI,KAAK,QAAQ,MAAM,QAAW,KAAK,QAAQ,MAAM;AAAA,QACpG,WAAW,KAAK,QAAQ,QAAQ,iBAAiB;AAC7C,gBAAM,KAAK,QAAQ,WAAW,KAAK,QAAQ,IAAI,KAAK,QAAQ,MAAM,KAAK;AAAA,QAC3E;AACA,YAAI;AACA,gBAAM,KAAK,QAAQ,SAAS,KAAK,QAAQ,EAAE;AAC3C,iBAAO;AAAA,QACX,SAAS,GAAQ;AACb,eAAK,IAAI,MAAM,eAAe,OAAO,MAAM,WAAW,EAAE,WAAW,WAAW,EAAE,IAAI,CAAC,EAAE;AACvF,iBAAO;AAAA,QACX;AAAA,MACJ;AAAA,IACJ;AACA,WAAO;AAAA,EACX;AAAA,EACA,MAAc,cAA6C;AACvD,QAAI;AACA,cAAQ,KAAK,QAAQ,MAAM;AAAA,QACvB,KAAK;AACD,iBAAO,EAAE,KAAK,KAAK,QAAQ,UAAU,KAAK,MAAM,IAAI,KAAK,IAAI,GAAG,IAAI,KAAK,IAAI,GAAG,MAAM,GAAG;AAAA,QAC7F,KAAK;AAAA,QACL,KAAK;AACD,cAAI,CAAC,KAAK,QAAQ,IAAI;AAClB,kBAAM,IAAI,MAAM,sBAAsB,KAAK,QAAQ,IAAI,sBAAsB;AAAA,UACjF;AACA,iBAAO,MAAM,KAAK,QAAQ,SAAS,KAAK,QAAQ,EAAE;AAAA,QACtD,KAAK;AAAA,QACL,KAAK,YAAY;AACb,iBAAO,MAAM,KAAK,QAAQ,SAAS,KAAK,QAAQ,EAAE;AAAA,QACtD;AAAA,MACJ;AAAA,IACJ,SAAS,GAAQ;AACb,WAAK,IAAI,MAAM,eAAe,EAAE,WAAW,WAAW,EAAE,CAAC,EAAE;AAAA,IAC/D;AACA,WAAO;AAAA,EACX;AAAA,EAEA,WAA4C;AA7IhD;AA8IQ,WAAO,QAAQ,KAAK,WAAW,UAAK,QAAQ,QAAQ,KAAK,QAAQ,EAAE,MAApC,YAAyC,KAAK,OAAQ,KAAK;AAAA,EAC9F;AAAA,EAEA,MAAM,gBAAgB,QAAiB,OAA+C;AAClF,WAAO,QAAQ,KAAK,UAAU,KAAK,QAAQ,gBAAgB,KAAK,QAAQ,IAAI,KAAK,IAAI;AAAA,EACzF;AAAA,EAEA,MAAM,WAA0C;AAC5C,QAAI,QAAQ,MAAM,KAAK,YAAY;AACnC,QAAI,OAAO;AACP,cAAQ,gBAAgB,KAAK;AAC7B,UAAI,KAAK,QAAQ,SAAS,WAAW,KAAK,QAAQ,MAAM;AACpD,YAAI;AACA,cAAI,OAAO,KAAK,QAAQ,SAAS,UAAU;AAEvC,gBAAI,CAAC,mBAAK,kBAAiB;AACvB,iCAAK,iBAAkB,IAAI;AAAA,gBACvB;AAAA,gBACA;AAAA,gBACA;AAAA,gBACA;AAAA,gBACA;AAAA,gBACA,KAAK,QAAQ;AAAA,cACjB;AAAA,YACJ;AACA,kBAAM,MAAM,mBAAK,iBAAL,WACR,MAAM,KACN,oBACA,KAAK,QAAQ,WAAW,KAAK,QAAQ,WAAW,MAChD,MAAM,IACN,KAAK,QAAQ;AAAA,UAErB,OAAO;AACH,kBAAM,MAAM,KAAK,QAAQ,KAAK,MAAM,GAAG;AAAA,UAC3C;AAAA,QACJ,SAAS,GAAG;AACR,eAAK,IAAI;AAAA,YACL,gBAAgB,KAAK,QAAQ,EAAE,sBAAsB,OAAO,KAAK,QAAQ,IAAI,CAAC,WAAW,OAAO,CAAC,CAAC;AAAA,UACtG;AAAA,QACJ;AAAA,MACJ;AAAA,IACJ;AACA,WAAO;AAAA,EACX;AAAA,EAEA,MAAM,YAAoC;AACtC,UAAM,QAAQ,MAAM,KAAK,SAAS;AAClC,SAAI,+BAAO,QAAO,MAAM;AACpB,UAAI,OAAO,MAAM,QAAQ,UAAU;AAC/B,YAAI;AACA,gBAAM,QAAQ,KAAK,MAAM,MAAM,GAAG;AAClC,iBAAO;AAAA,QACX,QAAQ;AACJ,cAAI,QAAQ,MAAM;AAClB,cAAI,OAAO,UAAU,UAAU;AAC3B,oBAAQ,MAAM,KAAK;AACnB,gBAAI,MAAM,WAAW,GAAG,GAAG;AACvB,oBAAM,IAAI,mBAAM,uBAAuB,KAAK;AAC5C,kBAAI,mBAAM,MAAM,CAAC,GAAG;AAChB,uBAAO;AAAA,cACX;AAAA,YACJ,WACI,KAAK,QAAQ,SAAS,sBACtB,KAAK,QAAQ,SAAS,mBACxB;AACE,qBAAO,mBAAM,uBAAuB,KAAK;AAAA,YAC7C;AAAA,UACJ;AAAA,QACJ;AAAA,MACJ,WAAW,OAAO,MAAM,QAAQ,UAAU;AACtC,eAAO,MAAM;AAAA,MACjB,WAAW,OAAO,MAAM,QAAQ,UAAU;AACtC,eAAO,mBAAM,SAAS,MAAM,GAAG;AAAA,MACnC;AAAA,IACJ;AACA,WAAO;AAAA,EACX;AAAA,EACA,MAAM,YAAoC;AACtC,UAAM,QAAQ,MAAM,KAAK,YAAY;AACrC,QAAI,OAAO;AACP,aAAO,OAAO,mBAAM,WAAW,KAAK,CAAC;AAAA,IACzC;AACA,WAAO;AAAA,EACX;AAAA,EACA,MAAM,cAAmC;AACrC,UAAM,QAAQ,MAAM,KAAK,UAAU;AACnC,QAAI,OAAO;AACP,UAAI,mBAAM,MAAM,KAAK,GAAG;AACpB,eAAO;AAAA,MACX;AACA,UAAI,OAAO,SAAS,YAAY,SAAS,SAAS,UAAU,SAAS,WAAW,OAAO;AACnF,eAAO,EAAE,GAAG,OAAO,MAAM,GAAG,GAAG,GAAG,OAAO,MAAM,KAAK,GAAG,GAAG,OAAO,MAAM,IAAI,EAAE;AAAA,MACjF;AAAA,IACJ;AACA,WAAO;AAAA,EACX;AAAA,EACA,MAAM,eAAyD;AAC3D,UAAM,QAAQ,MAAM,KAAK,UAAU;AACnC,QAAI,OAAO;AACP,UAAI,QAAQ,wBAAwB,KAAK,GAAG;AACxC,eAAO;AAAA,MACX;AAAA,IACJ;AACA,WAAO;AAAA,EACX;AAAA,EAEA,MAAM,sBAA8C;AAChD,UAAM,MAAM,MAAM,KAAK,UAAU;AACjC,QAAI,QAAQ,MAAM;AACd,aAAO,KAAK,QAAQ,eAAe,GAAG;AAAA,IAC1C;AACA,WAAO;AAAA,EACX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAeA,MAAM,YAAoC;AACtC,UAAM,QAAQ,MAAM,KAAK,SAAS;AAClC,QAAI;AACA,cAAQ,KAAK,QAAQ,MAAM;AAAA,QACvB,KAAK;AACD,iBAAO,SAAS,MAAM,QAAQ,OACxB,OAAO,MAAM,QAAQ,WACjB,KAAK,UAAU,MAAM,GAAG,IACxB,OAAO,MAAM,GAAG,IACpB;AAAA,QACV,KAAK;AAAA,QACL,KAAK;AACD,cAAI,KAAK,QAAQ,WAAW;AACxB,kBAAM,OAAO,KAAK,QAAQ;AAE1B,mBAAO,SAAS,MAAM,QAAQ,OACxB,OAAO,MAAM,QAAQ,WACjB,KAAK,UAAU,MAAM,GAAG,IACxB,OAAO,MAAM,GAAG,EAAE,UAAU,KAAK,CAAC,GAAG,KAAK,CAAC,CAAC,IAChD;AAAA,UACV;AACA,iBAAO,SAAS,MAAM,QAAQ,OACxB,OAAO,MAAM,QAAQ,WACjB,KAAK,UAAU,MAAM,GAAG,IACxB,OAAO,MAAM,GAAG,IACpB;AAAA,QACV,KAAK;AAAA,QACL,KAAK;AAED,iBAAO,SAAS,MAAM,QAAQ,OAAO,OAAO,MAAM,GAAG,IAAI;AAAA,MACjE;AAAA,IACJ,QAAQ;AACJ,WAAK,IAAI,MAAM,0BAA0B,KAAK,QAAQ,EAAE,EAAE;AAAA,IAC9D;AACA,WAAO;AAAA,EACX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAcA,MAAM,YAAoC;AACtC,UAAM,SAAS,MAAM,KAAK,SAAS;AACnC,QACI,WACC,OAAO,OAAO,QAAQ,YAClB,OAAO,OAAO,QAAQ,YAAY,OAAO,OAAO,CAAC,MAAM,OAAO,OAAO,GAAG,CAAC,IAChF;AACE,UAAI,MAAM,WAAW,OAAO,OAAO,GAAG,CAAC;AACvC,UAAI,KAAK,QAAQ,UAAU,QAAW;AAClC,cAAM,KAAK,MAAM,mBAAM,MAAM,KAAK,KAAK,QAAQ,MAAM,KAAK,KAAK,QAAQ,MAAM,KAAK,GAAG,GAAG,CAAC;AAAA,MAC7F;AACA,aAAO;AAAA,IACX;AACA,WAAO;AAAA,EACX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAqBA,MAAM,aAAsC;AACxC,UAAM,SAAS,MAAM,KAAK,SAAS;AACnC,QAAI,QAAQ;AACR,UAAI,OAAO,OAAO,QAAQ,UAAU;AAChC,gBAAQ,OAAO,IAAI,YAAY,GAAG;AAAA,UAC9B,KAAK;AAAA,UACL,KAAK;AAAA,UACL,KAAK;AAAA,UACL,KAAK;AAAA,UACL,KAAK;AACD,mBAAO;AAAA,QACf;AAAA,MACJ;AACA,aAAO,CAAC,CAAC,OAAO;AAAA,IACpB;AACA,UAAM,IAAI,KAAK,QAAQ,MAAO,MAAM,KAAK,OAAO,UAAU,gBAAgB,eAAe,KAAK,QAAQ,EAAE;AACxG,QAAI,KAAK,EAAE,SAAS,SAAS;AACzB,aAAO;AAAA,IACX;AACA,WAAO;AAAA,EACX;AAAA,EAEQ,iBAAiB,KAA2C;AAChE,YAAQ,OAAO,KAAK;AAAA,MAChB,KAAK;AACD,aAAK,OAAO;AACZ;AAAA,MACJ,KAAK;AAAA,MACL,KAAK;AACD,aAAK,OAAO;AACZ;AAAA,MACJ,KAAK;AACD,aAAK,OAAO;AACZ;AAAA,MACJ,KAAK;AACD,aAAK,OAAO;AACZ;AAAA,MACJ,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AACD,aAAK,OAAO;AAAA,IACpB;AAAA,EACJ;AAAA,EACA,MAAM,eAA8B;AAChC,UAAM,KAAK,SAAS,IAAI;AAAA,EAC5B;AAAA,EACA,MAAM,gBAA+B;AACjC,UAAM,KAAK,SAAS,KAAK;AAAA,EAC7B;AAAA;AAAA;AAAA;AAAA,EAIA,MAAM,eAA8B;AAChC,UAAM,QAAQ,MAAM,KAAK,WAAW;AACpC,SAAK,IAAI,MAAM,OAAO,KAAK,CAAC;AAC5B,YAAQ,KAAK,MAAM;AAAA,MACf,KAAK;AACD,cAAM,KAAK,SAAS,CAAC,KAAK;AAC1B;AAAA,MACJ,KAAK;AACD,cAAM,KAAK,SAAS,QAAQ,IAAI,CAAC;AACjC;AAAA,MACJ,KAAK;AACD,cAAM,KAAK,SAAS,QAAQ,QAAQ,IAAI;AACxC;AAAA,IACR;AAAA,EACJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOA,MAAM,SAAS,KAAyC;AACpD,QAAI,QAAQ,QAAW;AACnB;AAAA,IACJ;AACA,QAAI,KAAK,QAAQ,SAAS,SAAS;AAC/B,WAAK,QAAQ,WAAW;AAAA,IAC5B,OAAO;AAIH,UAAI;AACA,YAAI,KAAK,QAAQ,OAAO;AACpB,cAAI,OAAO,KAAK,QAAQ,UAAU,UAAU;AAExC,gBAAI,CAAC,mBAAK,mBAAkB;AACxB,iCAAK,kBAAmB,IAAI,SAAS,OAAO,SAAS,KAAK,QAAQ,KAAK;AAAA,YAC3E;AACA,kBAAM,mBAAK,kBAAL,WAAuB,KAAK;AAAA,UACtC,OAAO;AACH,kBAAM,KAAK,QAAQ,MAAM,GAAG;AAAA,UAChC;AAAA,QACJ;AAAA,MACJ,SAAS,GAAG;AACR,aAAK,IAAI;AAAA,UACL,iBAAiB,KAAK,QAAQ,EAAE,uBAAuB,OAAO,KAAK,QAAQ,KAAK,CAAC,WAAW,OAAO,CAAC,CAAC;AAAA,QACzG;AAAA,MACJ;AAEA,YAAM,KAAK,QAAQ,SAAS,MAAM,KAAK,KAAK,UAAU;AAAA,IAC1D;AAAA,EACJ;AACJ;AAjcI;AAOA;AA4bG,SAAS,WAAW,GAAuB;AAC9C,MAAI,aAAa,UAAU;AACvB,WAAO;AAAA,EACX;AACA,SAAO;AACX;",
  "names": []
}
