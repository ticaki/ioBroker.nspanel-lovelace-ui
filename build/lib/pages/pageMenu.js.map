{
  "version": 3,
  "sources": ["../../../src/lib/pages/pageMenu.ts"],
  "sourcesContent": ["import { Page } from '../classes/Page';\nimport { type PageInterface } from '../classes/PageInterface';\nimport { Color, type RGB } from '../const/Color';\nimport { Icons } from '../const/icon_mapping';\nimport { getPayload, getPayloadArray, getPayloadRemoveTilde, getRegExp } from '../const/tools';\nimport type * as pages from '../types/pages';\nimport * as globals from '../types/function-and-const';\nimport type { IncomingEvent, nsPanelState, nsPanelStateVal } from '../types/types';\nimport { handleCardRole } from './data-collection-functions';\nimport type { PageItem } from './pageItem';\n\nexport class PageMenu extends Page {\n    declare config: pages.PageMenuConfig;\n    protected autoLoopTimeout: ioBroker.Timeout | undefined;\n    protected maxItems: number = 4;\n    protected step: number = 0;\n    protected iconLeft: string = '';\n    protected iconRight: string = '';\n    protected iconLeftP: string = '';\n    protected iconRightP: string = '';\n    protected lastdirection: null | 'left' | 'right' = null;\n\n    /** Optional arrow item used when scrollPresentation === 'arrow'. */\n    protected arrowPageItem?: PageItem;\n\n    private nextArrow: boolean = false;\n\n    private tempItems: (PageItem | undefined)[] | undefined;\n\n    constructor(config: PageInterface, options: pages.PageBase) {\n        if (!globals.isPageMenuConfig(config)) {\n            throw new Error(`PageMenu: invalid config (card=${(config as any).card})`);\n        }\n        super(config, options);\n        if (options.config) {\n            switch (options.config.card) {\n                case 'cardSchedule':\n                case 'cardGrid':\n                    this.maxItems = 6;\n                    break;\n                case 'cardGrid2':\n                    this.maxItems = this.basePanel.info.nspanel.model === 'us-p' ? 9 : 8;\n                    break;\n                case 'cardGrid3':\n                    this.maxItems = 4;\n                    break;\n                case 'cardEntities':\n                    this.maxItems = this.basePanel.info.nspanel.model === 'us-p' ? 5 : 4;\n                    break;\n                case 'cardThermo2':\n                    this.maxItems = 9;\n                    break;\n                case 'cardMedia':\n                    this.maxItems = 5;\n                    break;\n                case 'cardChart':\n                case 'cardLChart':\n                case 'cardThermo':\n                case 'cardQR':\n                case 'cardAlarm':\n                case 'cardPower':\n                case 'screensaver':\n                case 'screensaver2':\n                case 'screensaver3':\n                case 'popupNotify':\n                default:\n                    this.log.warn(\n                        `PageMenu: ${config.card} is not supported in this class. Please use the correct class for this card.`,\n                    );\n                    break;\n            }\n        }\n    }\n\n    public async init(): Promise<void> {\n        await super.init();\n        const temp = await this.createPageItems([\n            {\n                type: 'button',\n                dpInit: '',\n                role: 'button',\n                data: {\n                    icon: {\n                        true: {\n                            value: { type: 'const', constVal: 'arrow-right-bold-circle-outline' },\n                            color: { type: 'const', constVal: Color.navRight },\n                        },\n                    },\n                    entity1: { value: { type: 'const', constVal: true } },\n                    additionalId: { type: 'const', constVal: '-NextPageArrow' },\n                    text: { true: { type: 'const', constVal: 'more' } },\n                },\n            },\n        ]);\n        if (!temp || !temp[0]) {\n            throw new Error('PageMenu: unable to create arrowPageItem');\n        }\n        this.arrowPageItem = temp[0];\n    }\n\n    protected nextTick(): void {\n        this.step++;\n        void this.update();\n    }\n    protected autoLoop(): void {\n        if (this.autoLoopTimeout) {\n            this.adapter.clearTimeout(this.autoLoopTimeout);\n        }\n        if (!this.config || this.config.scrollPresentation !== 'auto') {\n            return;\n        }\n        if (this.unload || this.adapter.unload) {\n            return;\n        }\n        this.autoLoopTimeout = this.adapter.setTimeout(\n            () => {\n                if ((this.visibility && !this.sleep && !this.unload) || this.adapter.unload) {\n                    this.nextTick();\n                }\n\n                this.autoLoop();\n            },\n            (this.config.scrollAutoTiming < 2 ? 3000 : this.config.scrollAutoTiming * 1000) || 15_000,\n        );\n    }\n\n    /**\n     * Build the list of payload strings for the current view.\n     *\n     * Modes:\n     * - \"classic\": windowed paging using `this.maxItems`.\n     *     - Respects `config.scrollType`: \"page\" (full page) or \"half\" (half page).\n     *     - \"half\" is only effective for grid/thermo cards; otherwise falls back to \"page\".\n     * - \"arrow\": always returns exactly `this.maxItems` slots; the last slot is optionally\n     *     replaced by `arrowPageItem`. Now also shows on the last page to wrap to the first.\n     *\n     * Order is preserved (sequential awaits). Resets `this.step` if it points beyond the list.\n     *\n     * @param result Pre-allocated result array to fill with payload strings.\n     * @returns Filled `result`.\n     */\n    public async getOptions(result: string[]): Promise<string[]> {\n        if (!this.pageItems || !this.config) {\n            return result;\n        }\n\n        // refresh enabled items\n        this.tempItems = (await this.getEnabledPageItems()) || [];\n\n        // filtering\n        if (this.config.filterType === true || this.config.filterType === false) {\n            const wantTrue = this.config.filterType === true;\n            const filtered: typeof this.tempItems = [];\n            for (const p of this.tempItems) {\n                if (\n                    p?.dataItems?.data &&\n                    'entity1' in p.dataItems.data &&\n                    p.dataItems.data.entity1?.value &&\n                    wantTrue === (await p.dataItems.data.entity1.value.getBoolean())\n                ) {\n                    filtered.push(p);\n                }\n            }\n            this.tempItems = filtered;\n        } else if (typeof this.config.filterType === 'number') {\n            const filtered: typeof this.tempItems = [];\n            for (const p of this.tempItems) {\n                if (\n                    p?.dataItems &&\n                    (p.dataItems.filter == null ||\n                        p.dataItems.filter === this.config.filterType ||\n                        (typeof p.dataItems.filter === 'number' &&\n                            p.dataItems.filter < 0 &&\n                            p.dataItems.filter !== -this.config.filterType))\n                ) {\n                    filtered.push(p);\n                }\n            }\n            this.tempItems = filtered;\n        } else if (typeof this.config.filterType === 'string') {\n            const filtered: typeof this.tempItems = [];\n            const filter = this.config.filterType.split(',');\n            for (const p of this.tempItems) {\n                if (\n                    p?.dataItems &&\n                    (typeof p.dataItems.filter !== 'string' || filter.indexOf(String(p.dataItems.filter)) !== -1)\n                ) {\n                    filtered.push(p);\n                }\n            }\n            this.tempItems = filtered;\n        }\n\n        const items = this.tempItems ?? [];\n        const total = items.length;\n        const maxItems = Math.max(0, this.maxItems | 0);\n\n        // prefill with placeholders\n        for (let i = 0; i < maxItems; i++) {\n            result[i] = result[i] ?? '~~~~~';\n        }\n\n        // classic paging\n        // normalize presentation: \"auto\" behaves exactly like \"classic\"\n        const rawStyle = this.config.scrollPresentation ?? 'classic';\n        const style: 'classic' | 'arrow' = rawStyle === 'auto' ? 'classic' : rawStyle;\n\n        // classic paging\n        if (style === 'classic') {\n            const requestedScrollType = this.config.scrollType === 'half' ? 'half' : 'page';\n            const cardAllowsHalf = globals.isCardMenuHalfPageScrollType(this.config.card);\n            const effectiveScrollType: 'page' | 'half' =\n                requestedScrollType === 'half' && cardAllowsHalf ? 'half' : 'page';\n\n            const stride =\n                total > maxItems\n                    ? effectiveScrollType === 'page'\n                        ? maxItems\n                        : Math.max(1, Math.floor(maxItems / 2))\n                    : 0;\n\n            let start = stride > 0 ? this.step * stride : 0;\n            if (start >= total) {\n                this.step = 0;\n                start = 0;\n            }\n\n            const end = Math.min(start + maxItems, total);\n\n            let outIdx = 0;\n            const tasks: Promise<string>[] = [];\n\n            for (let i = start; i < end; i++, outIdx++) {\n                const item = items[i];\n                if (item) {\n                    tasks.push(\n                        item\n                            .getPageItemPayload()\n                            .then(p => p ?? '~~~~~')\n                            .catch(() => '~~~~~'),\n                    );\n                } else {\n                    tasks.push(Promise.resolve('~~~~~'));\n                }\n            }\n\n            const results = await Promise.all(tasks);\n\n            // Ergebnisse in die Slots einf\u00FCgen\n            for (let j = 0; j < results.length; j++) {\n                result[j] = results[j];\n            }\n            while (outIdx < maxItems) {\n                result[outIdx++] = '~~~~~';\n            }\n\n            return result;\n        }\n\n        // arrow paging (with wrap-around arrow on the last page)\n        if (style === 'arrow') {\n            if (maxItems <= 0) {\n                return result;\n            }\n            const multiplePages = total > maxItems;\n\n            let start = this.step * (maxItems - (multiplePages ? 1 : 0));\n            if (start >= total) {\n                this.step = 0;\n                start = 0;\n            }\n\n            const moreAfterWindow = start + maxItems < total;\n            const moreBeforeWindow = start > 0;\n\n            // show arrow if there are multiple pages and either we can go forward OR we are on the last page (wrap)\n            const shouldShowArrow = multiplePages && (moreAfterWindow || moreBeforeWindow);\n\n            const tasks: Promise<string>[] = [];\n\n            for (let i = 0; i < maxItems - (shouldShowArrow ? 1 : 0); i++) {\n                const idx = start + i;\n                const item = items[idx];\n                if (item) {\n                    tasks.push(\n                        item\n                            .getPageItemPayload()\n                            .then(p => p ?? '~~~~~')\n                            .catch(() => '~~~~~'),\n                    );\n                } else {\n                    tasks.push(Promise.resolve('~~~~~'));\n                }\n            }\n\n            const results = await Promise.all(tasks);\n\n            for (let i = 0; i < maxItems - (shouldShowArrow ? 1 : 0); i++) {\n                result[i] = results[i];\n            }\n\n            if (shouldShowArrow) {\n                this.nextArrow = true;\n                result[maxItems - 1] = this.arrowPageItem\n                    ? ((await this.arrowPageItem.getPageItemPayload()) ?? '~~~~~')\n                    : '~~~~~';\n            } else {\n                this.nextArrow = false;\n            }\n\n            return result;\n        }\n\n        return result;\n    }\n\n    protected async onVisibilityChange(val: boolean): Promise<void> {\n        if (val) {\n            if (this.directParentPage) {\n                const dp = this.directParentPage.getdpInitForChild();\n                if (dp) {\n                    if (typeof dp === 'string') {\n                        const v = getRegExp(`^${dp.replace(/\\./g, '\\\\.').replace(/\\*/g, '.*')}`);\n                        if (v) {\n                            this.dpInit = v;\n                        }\n                    } else {\n                        this.dpInit = dp;\n                    }\n                }\n            }\n            if (this.config && globals.isPageMenuConfig(this.config)) {\n                switch (this.config.card) {\n                    case 'cardSchedule':\n                    case 'cardGrid':\n                        this.maxItems = 6;\n                        break;\n                    case 'cardGrid2':\n                        this.maxItems = this.basePanel.info.nspanel.model === 'us-p' ? 9 : 8;\n                        break;\n                    case 'cardGrid3':\n                        this.maxItems = 4;\n                        break;\n                    case 'cardEntities':\n                        this.maxItems = this.basePanel.info.nspanel.model === 'us-p' ? 5 : 4;\n                        break;\n                    case 'cardThermo2':\n                        this.maxItems = 9;\n                        break;\n                    case 'cardMedia':\n                        this.maxItems = 5;\n                        break;\n                    default:\n                        //@ts-expect-error\n                        this.log.error(`PageMenu: ${this.config.card} is not supported in onVisibilityChange!`);\n                        break;\n                }\n                const temp = await handleCardRole(this.adapter, this.config.cardRole, this, this.config?.options);\n                if (temp) {\n                    this.pageItemConfig = temp;\n                }\n            }\n            this.step = 0;\n            this.autoLoop();\n        } else {\n            if (this.autoLoopTimeout) {\n                this.adapter.clearTimeout(this.autoLoopTimeout);\n            }\n            this.tempItems = [];\n        }\n        await super.onVisibilityChange(val);\n    }\n\n    goLeft(short: boolean = false): void {\n        if (this.config.scrollPresentation && ['arrow', 'auto'].indexOf(this.config.scrollPresentation) !== -1) {\n            super.goLeft(short);\n            return;\n        }\n        if (!this.config || !globals.isPageMenuConfig(this.config)) {\n            return;\n        }\n\n        if (!short) {\n            super.goLeft(short);\n            return;\n        }\n\n        const total = (this.tempItems && this.tempItems.length) || (this.pageItems && this.pageItems.length) || 0;\n\n        const maxItems = Math.max(0, this.maxItems | 0);\n        const requested: 'page' | 'half' = this.config.scrollType === 'half' ? 'half' : 'page';\n        const effective: 'page' | 'half' =\n            requested === 'half' && globals.isCardMenuHalfPageScrollType(this.config.card) ? 'half' : 'page';\n        const stride = effective === 'page' ? maxItems : Math.max(1, Math.floor(maxItems / 2));\n\n        // wenn es gar keine weitere Seite gibt, delegiere nach links\n        if (stride === 0 || total <= maxItems) {\n            super.goLeft(short);\n            return;\n        }\n\n        const prevStart = (this.step - 1) * stride;\n\n        if (prevStart < 0) {\n            // wir sind auf der ersten Seite -> nach au\u00DFen navigieren\n            super.goLeft(short);\n        } else {\n            this.step -= 1;\n            void this.update();\n        }\n    }\n\n    goRight(short: boolean = false): void {\n        if (this.config.scrollPresentation && ['arrow', 'auto'].indexOf(this.config.scrollPresentation) !== -1) {\n            super.goRight(short);\n            return;\n        }\n        if (!this.config || !globals.isPageMenuConfig(this.config)) {\n            return;\n        }\n\n        if (!short) {\n            super.goRight(short);\n            return;\n        }\n\n        const total = (this.tempItems && this.tempItems.length) || (this.pageItems && this.pageItems.length) || 0;\n\n        const maxItems = Math.max(0, this.maxItems | 0);\n        const requested: 'page' | 'half' = this.config.scrollType === 'half' ? 'half' : 'page';\n        const effective: 'page' | 'half' =\n            requested === 'half' && globals.isCardMenuHalfPageScrollType(this.config.card) ? 'half' : 'page';\n        const stride = effective === 'page' ? maxItems : Math.max(1, Math.floor(maxItems / 2));\n\n        const nextStart = (this.step + 1) * stride;\n        if (nextStart >= total) {\n            super.goRight(short);\n        } else {\n            this.step += 1;\n            void this.update();\n        }\n    }\n    protected getNavigation(): string {\n        // Arrow-Pr\u00E4sentation nutzt eigene Navigation\n        if (this.config.scrollPresentation && ['arrow', 'auto'].indexOf(this.config.scrollPresentation) !== -1) {\n            return super.getNavigation();\n        }\n\n        const total = (this.tempItems && this.tempItems.length) || (this.pageItems && this.pageItems.length) || 0;\n\n        const maxItems = Math.max(0, this.maxItems | 0);\n        if (maxItems === 0 || total <= maxItems) {\n            return super.getNavigation();\n        }\n\n        // Scrolltyp wie in getOptions() bestimmen\n        const requested: 'page' | 'half' = this.config.scrollType === 'half' ? 'half' : 'page';\n        const cardAllowsHalf = globals.isCardMenuHalfPageScrollType(this.config.card);\n        const effective: 'page' | 'half' = requested === 'half' && cardAllowsHalf ? 'half' : 'page';\n\n        const stride = effective === 'page' ? maxItems : Math.max(1, Math.floor(maxItems / 2));\n        const start = this.step * stride;\n\n        const hasPrev = start > 0;\n        const hasNext = start + maxItems < total;\n\n        let left = hasPrev ? '' : super.getNavigation('left');\n        let right = hasNext ? '' : super.getNavigation('right');\n\n        if (!left) {\n            left = getPayloadRemoveTilde(\n                'button',\n                'bSubPrev',\n                effective === 'page' ? Icons.GetIcon('arrow-up-bold-outline') : Icons.GetIcon('arrow-up-bold'),\n                String(Color.rgb_dec565(Color.navDown as RGB)),\n                '',\n                '',\n            );\n        }\n\n        if (!right) {\n            right = getPayloadRemoveTilde(\n                'button',\n                'bSubNext',\n                effective === 'page' ? Icons.GetIcon('arrow-down-bold-outline') : Icons.GetIcon('arrow-down-bold'),\n                String(Color.rgb_dec565(Color.navDown as RGB)),\n                '',\n                '',\n            );\n        }\n\n        return getPayload(left, right);\n    }\n    async onButtonEvent(event: IncomingEvent): Promise<void> {\n        if (this.nextArrow && event.id.endsWith('-NextPageArrow')) {\n            this.step++;\n            await this.update();\n        }\n    }\n    removeTempItems(): void {\n        this.tempItems = undefined; // statt [] um Referenzen zu l\u00F6sen\n        this.tempItems = [];\n    }\n\n    async reset(): Promise<void> {\n        this.step = 0;\n    }\n\n    protected getMessage(message: any): string {\n        return getPayload(\n            getPayloadRemoveTilde('entityUpd', message.headline),\n            message.navigation,\n            getPayloadArray(message.options),\n        );\n    }\n    onInternalCommand = async (_id: string, _state: nsPanelState | undefined): Promise<nsPanelStateVal> => {\n        throw new Error('Method not implemented.');\n    };\n\n    async delete(): Promise<void> {\n        this.unload = true;\n\n        if (this.autoLoopTimeout) {\n            this.adapter.clearTimeout(this.autoLoopTimeout);\n            this.autoLoopTimeout = undefined;\n        }\n        if (this.arrowPageItem) {\n            await this.arrowPageItem.delete();\n            this.arrowPageItem = undefined;\n        }\n        await this.basePanel.statesControler.deletePageLoop(this.onInternalCommand);\n        this.tempItems = undefined; // statt [] um Referenzen zu l\u00F6sen\n        await super.delete();\n    }\n}\n"],
  "mappings": "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",
  "names": []
}
