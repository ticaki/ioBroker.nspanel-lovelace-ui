{
  "version": 3,
  "sources": ["../../../src/lib/pages/pageAlarm.ts"],
  "sourcesContent": ["import { Page } from '../classes/Page';\nimport { type PageInterface } from '../classes/PageInterface';\nimport { Color } from '../const/Color';\nimport { genericStateObjects } from '../const/definition';\nimport { Icons } from '../const/icon_mapping';\nimport { getPayload, getPayloadRemoveTilde } from '../const/tools';\nimport * as pages from '../types/pages';\nimport type { IncomingEvent } from '../types/types';\n\nconst PageAlarmMessageDefault: pages.PageAlarmMessage = {\n    event: 'entityUpd',\n    headline: 'Page Grid',\n    intNameEntity: '',\n    navigation: 'button~bSubPrev~~~~~button~bSubNext~~~~',\n    button1: '',\n    status1: '',\n    button2: '',\n    status2: '',\n    button3: '',\n    status3: '',\n    button4: '',\n    status4: '',\n    icon: '',\n    iconColor: '',\n    numpad: 'disable',\n    flashing: 'disable',\n};\nconst alarmStates: pages.AlarmStates[] = ['disarmed', 'armed', 'arming', 'pending', 'triggered'];\n\n/**\n * Page implementation for alarm/unlock card behaviour.\n *\n * This class is responsible for managing the alarm card state machine\n * (armed / disarmed / arming / pending / triggered) and for building\n * the payload that will be sent to the panel. It also reacts to configured\n * data items (approved, pin, etc.) and handles button actions coming from\n * the touch panel.\n *\n * Note: The Page lifecycle follows the base Page class contract. Important\n * public methods that are invoked by the Page controller are documented below\n * (init, update, onStateTrigger, onButtonEvent).\n */\nexport class PageAlarm extends Page {\n    private step: number = 1;\n    private headlinePos: number = 0;\n    private titelPos: number = 0;\n    private nextArrow: boolean = false;\n    private status: pages.AlarmStates = 'armed';\n    private useStates = true;\n    private alarmType: string = 'alarm';\n    items: pages.PageBaseConfig['items'];\n\n    async setMode(m: pages.AlarmButtonEvents): Promise<void> {\n        if (this.useStates) {\n            await this.library.writedp(\n                `panels.${this.basePanel.name}.alarm.${this.name}.mode`,\n                m,\n                genericStateObjects.panel.panels.alarm.cardAlarm.mode,\n            );\n        }\n    }\n\n    /**\n     * Get the current alarm status.\n     *\n     * Reads the persisted status from the configured states (if state\n     * management is enabled) and maps numeric indices to the corresponding\n     * AlarmStates value.\n     *\n     * @returns Promise resolving to the current alarm status\n     */\n    async getStatus(): Promise<pages.AlarmStates> {\n        if (this.useStates) {\n            const state = this.library.readdb(`panels.${this.basePanel.name}.alarm.${this.name}.status`);\n            if (state) {\n                if (typeof state.val === 'number') {\n                    this.status = alarmStates[state.val];\n                }\n            }\n        }\n        return this.status;\n    }\n\n    /**\n     * Set the current alarm status and persist it when using states.\n     *\n     * @param value - new alarm status to set\n     * @returns Promise that resolves when the status has been persisted\n     */\n    async setStatus(value: pages.AlarmStates): Promise<void> {\n        this.status = value;\n        if (this.useStates) {\n            await this.library.writedp(\n                `panels.${this.basePanel.name}.alarm.${this.name}.status`,\n                alarmStates.indexOf(this.status),\n                genericStateObjects.panel.panels.alarm.cardAlarm.status,\n            );\n        }\n    }\n    private pin: string = '0';\n    private failCount: number = 0;\n\n    constructor(config: PageInterface, options: pages.PageBaseConfig) {\n        super(config, options);\n        if (options.config && options.config.card == 'cardAlarm') {\n            this.config = options.config;\n        }\n        this.minUpdateInterval = 500;\n        this.neverDeactivateTrigger = true;\n    }\n\n    /**\n     * Initialize the alarm page.\n     *\n     * This method prepares dataitems, default channels and initial runtime\n     * values (pin, alarmType, status). It is called during the Page\n     * initialization sequence and may perform asynchronous calls to the\n     * StatesController and adapter library.\n     *\n     * @returns Promise that resolves when initialization is complete\n     */\n    async init(): Promise<void> {\n        const config = structuredClone(this.config);\n        // search states for mode auto\n        const tempConfig: Partial<pages.cardAlarmDataItemOptions> =\n            this.enums || this.dpInit\n                ? await this.basePanel.statesControler.getDataItemsFromAuto(this.dpInit, config, undefined, this.enums)\n                : config;\n        // create Dataitems\n        //this.log.debug(JSON.stringify(tempConfig));\n        const tempItem: Partial<pages.cardAlarmDataItems> = await this.basePanel.statesControler.createDataItems(\n            tempConfig,\n            this,\n        );\n        this.items = tempItem as pages.cardAlarmDataItems;\n        // set card because we lose it\n        this.items.card = 'cardAlarm';\n\n        await super.init();\n        this.useStates = true;\n        this.alarmType = (this.items?.data?.alarmType && (await this.items.data.alarmType.getString())) ?? 'alarm';\n        /*if (this.alarmType === 'unlock' && this.items?.data?.setNavi) {\n            this.useStates = true;\n        } else */ {\n            await this.library.writedp(\n                `panels.${this.basePanel.name}.alarm`,\n                undefined,\n                genericStateObjects.panel.panels.alarm._channel,\n            );\n            await this.library.writedp(\n                `panels.${this.basePanel.name}.alarm.${this.name}`,\n                undefined,\n                genericStateObjects.panel.panels.alarm.cardAlarm._channel,\n            );\n        }\n        if (this.alarmType === 'alarm') {\n            const status = await this.getStatus();\n            if (status === 'pending') {\n                await this.setStatus('armed');\n            } else if (status === 'arming') {\n                await this.setStatus('disarmed');\n            } else {\n                await this.setStatus(this.status);\n            }\n        } else {\n            await this.setStatus('armed');\n        }\n        this.pin =\n            (this.items && this.items.data && this.items.data.pin && (await this.items.data.pin.getString())) ?? '';\n        if (this.pin == '-1') {\n            this.pin = this.adapter.config.pw1 ? this.adapter.config.pw1 : '';\n        }\n    }\n\n    /**\n     * Build the current message payload and send it to the panel.\n     *\n     * The message is assembled from the configured dataitems and the\n     * internal alarm status. If the page is not visible or incorrectly\n     * configured the update is skipped.\n     *\n     * @returns Promise that resolves after the message was sent (or skipped)\n     */\n    public async update(): Promise<void> {\n        if (!this.visibility) {\n            return;\n        }\n        const message: Partial<pages.PageAlarmMessage> = {};\n        const items = this.items;\n        if (!items || items.card !== 'cardAlarm') {\n            return;\n        }\n        const data = items.data;\n        await this.getStatus();\n        message.intNameEntity = this.id;\n        message.headline = (data.headline && (await data.headline.getTranslatedString())) ?? this.name;\n        message.navigation = this.getNavigation();\n        if (this.alarmType === 'alarm') {\n            if (this.status === 'armed' || this.status === 'triggered') {\n                message.button1 = this.library.getTranslation('disarm');\n                message.status1 = 'D1';\n                message.button2 = '';\n                message.status2 = '';\n                message.button3 = '';\n                message.status3 = '';\n                message.button4 = '';\n                message.status4 = '';\n            } else {\n                //const entity1 = await getValueEntryNumber(data.entity1);\n                message.button1 =\n                    (data.button1 && (await data.button1.getTranslatedString())) ??\n                    this.library.getTranslation('arm_away');\n                message.status1 = message.button1 ? 'A1' : '';\n                message.button2 =\n                    (data.button2 && (await data.button2.getTranslatedString())) ??\n                    this.library.getTranslation('arm_home');\n                message.status2 = message.button2 ? 'A2' : '';\n                message.button3 =\n                    (data.button3 && (await data.button3.getTranslatedString())) ??\n                    this.library.getTranslation('arm_night');\n                message.status3 = message.button3 ? 'A3' : '';\n                message.button4 =\n                    (data.button4 && (await data.button4.getTranslatedString())) ??\n                    this.library.getTranslation('arm_vacation');\n                message.status4 = message.button4 ? 'A4' : '';\n            }\n            if (this.status == 'armed') {\n                message.icon = Icons.GetIcon('shield-home'); //icon*~*\n                message.iconColor = '63488'; //iconcolor*~*\n                message.numpad = 'enable'; //numpadStatus*~*\n                message.flashing = 'disable'; //flashing*\n            } else if (this.status == 'disarmed') {\n                message.icon = Icons.GetIcon('shield-off'); //icon*~*\n                message.iconColor = String(Color.rgb_dec565(Color.Green)); //iconcolor*~*\n                message.numpad = 'enable'; //numpadStatus*~*\n                message.flashing = 'disable'; //flashing*\n            } else if (this.status == 'arming' || this.status == 'pending') {\n                message.icon = Icons.GetIcon('shield'); //icon*~*\n                message.iconColor = String(Color.rgb_dec565({ r: 243, g: 179, b: 0 })); //iconcolor*~*\n                message.numpad = 'disable'; //numpadStatus*~*\n                message.flashing = 'enable'; //flashing*\n            } else if (this.status == 'triggered') {\n                message.icon = Icons.GetIcon('bell-ring'); //icon*~*\n                message.iconColor = String(Color.rgb_dec565({ r: 223, g: 76, b: 30 })); //iconcolor*~*\n                message.numpad = 'enable'; //numpadStatus*~*\n                message.flashing = 'enable'; //flashing*\n            }\n        } else if (this.alarmType === 'unlock') {\n            if (this.status == 'triggered') {\n                message.button1 = this.library.getTranslation('locked');\n                message.status1 = '';\n                message.button2 = '';\n                message.status2 = '';\n                message.button3 = '';\n                message.status3 = '';\n                message.button4 = '';\n                message.status4 = '';\n                message.icon = Icons.GetIcon('lock-off'); //icon*~*\n                message.iconColor = String(Color.rgb_dec565({ r: 255, g: 0, b: 0 })); //iconcolor*~*\n                message.numpad = 'disable'; //numpadStatus*~*\n                message.flashing = 'enable'; //flashing*\n            } else {\n                message.button1 = this.library.getTranslation('unlock');\n                message.status1 = 'U1';\n                message.button2 = '';\n                message.status2 = '';\n                message.button3 = '';\n                message.status3 = '';\n                message.button4 = '';\n                message.status4 = '';\n                message.icon = Icons.GetIcon('lock-remove'); //icon*~*\n                message.iconColor = String(Color.rgb_dec565({ r: 223, g: 76, b: 30 })); //iconcolor*~*\n                message.numpad = 'enable'; //numpadStatus*~*\n                message.flashing = 'enable'; //flashing*\n            }\n        }\n        //message.icon = await getIconEntryValue(data.icon, true, 'shield-home');\n        //message.iconColor = await getIconEntryColor(data.icon, true, '');\n        //message.numpad = 'enable';\n        //message.flashing = 'enable';\n\n        this.sendToPanel(this.getMessage(message), false);\n    }\n\n    private getMessage(message: Partial<pages.PageAlarmMessage>): string {\n        let result: pages.PageAlarmMessage = PageAlarmMessageDefault;\n        result = { ...result, ...message } as pages.PageAlarmMessage;\n        return getPayload(\n            getPayloadRemoveTilde('entityUpd', result.headline),\n            result.navigation,\n            getPayloadRemoveTilde(\n                result.intNameEntity,\n                result.button1,\n                result.status1,\n                result.button2,\n                result.status2,\n                result.button3,\n                result.status3,\n                result.button4,\n                result.status4,\n                result.icon,\n                result.iconColor,\n                result.numpad,\n                result.flashing,\n            ),\n        );\n    }\n\n    protected async onStateTrigger(id: string): Promise<void> {\n        if (this.items && this.items.card === 'cardAlarm') {\n            const approved = this.items.data && this.items.data.approved;\n            if (approved && approved.options.type === 'triggered' && approved.options.dp === id) {\n                await this.getStatus();\n                const val = await approved.getBoolean();\n                if (val) {\n                    if (this.status === 'pending') {\n                        await this.setStatus('disarmed');\n                    } else if (this.status === 'arming') {\n                        await this.setStatus('armed');\n                    }\n                } else {\n                    if (this.status === 'pending') {\n                        await this.setStatus('armed');\n                    } else if (this.status === 'arming') {\n                        await this.setStatus('disarmed');\n                    }\n                }\n                if (this.unload || this.adapter.unload) {\n                    return;\n                }\n                this.adapter.setTimeout(() => this.update(), 50);\n            }\n        }\n    }\n    /**\n     * Handle a button event coming from the panel.\n     *\n     * The incoming event contains the action code (A1/A2/A3/A4/D1/U1/...) and\n     * an optional value (for example a numeric PIN). This method validates\n     * the PIN (when configured), updates the internal status machine and\n     * triggers the configured mode/state writes.\n     *\n     * @param _event - event payload from the touch panel\n     * @returns Promise that resolves after the event has been handled\n     */\n    async onButtonEvent(_event: IncomingEvent): Promise<void> {\n        const button = _event.action;\n        const value = _event.opt;\n        if (!this.items || this.items.card !== 'cardAlarm') {\n            return;\n        }\n        const approved = this.items.data && this.items.data.approved;\n\n        if (pages.isAlarmButtonEvent(button)) {\n            await this.getStatus();\n            if (this.status === 'triggered') {\n                return;\n            }\n\n            /*if (this.pin === 0) {\n                this.log.warn(`Pin is missing`);\n                return;\n            }*/\n            if (this.pin && this.pin != value) {\n                if (++this.failCount < 3) {\n                    this.log.warn(`Wrong pin entered. try ${this.failCount} of 3`);\n                } else {\n                    this.log.error('Wrong pin entered. locked!');\n                    await this.setStatus('triggered');\n                }\n                await this.update();\n                return;\n            }\n            this.log.debug(`Alarm event ${button} value: ${value}`);\n            switch (button) {\n                case 'A1':\n                case 'A2':\n                case 'A3':\n                case 'A4': {\n                    if (this.status === 'disarmed' && approved) {\n                        await this.setStatus('arming');\n                        await this.setMode(button);\n                        if (this.unload || this.adapter.unload) {\n                            return;\n                        }\n                        this.adapter.setTimeout(() => this.update(), 50);\n                    } else if (this.status === 'arming') {\n                        // nothing to do\n                    } else if (!approved) {\n                        await this.setStatus('armed');\n                        await this.setMode(button);\n                        if (this.unload || this.adapter.unload) {\n                            return;\n                        }\n                        this.adapter.setTimeout(() => this.update(), 50);\n                    }\n                    break;\n                }\n                case 'D1': {\n                    if (this.status === 'armed' && approved) {\n                        await this.setStatus('pending');\n                        await this.setMode(button);\n                        if (this.unload || this.adapter.unload) {\n                            return;\n                        }\n                        this.adapter.setTimeout(() => this.update(), 50);\n                    } else if (this.status === 'pending') {\n                        // nothing to do\n                    } else if (!approved) {\n                        await this.setStatus('disarmed');\n                        await this.setMode(button);\n                        if (this.unload || this.adapter.unload) {\n                            return;\n                        }\n                        this.adapter.setTimeout(() => this.update(), 50);\n                    }\n\n                    break;\n                }\n                case 'U1': {\n                    const entry = this.items;\n                    const item = entry.data;\n                    const value: any = (item.setNavi && (await item.setNavi.getString())) ?? null;\n                    if (value !== null) {\n                        await this.basePanel.navigation.setTargetPageByName(value);\n                        break;\n                    }\n                    await this.setStatus('disarmed');\n                    await this.setStatus('armed');\n                    break;\n                }\n            }\n        }\n        //if (event.page && event.id && this.pageItems) {\n        //    this.pageItems[event.id as any].setPopupAction(event.action, event.opt);\n        //}\n    }\n}\n"],
  "mappings": "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",
  "names": ["value"]
}
