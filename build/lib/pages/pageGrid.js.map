{
  "version": 3,
  "sources": ["../../../src/lib/pages/pageGrid.ts"],
  "sourcesContent": ["import type { PageInterface } from '../classes/PageInterface';\nimport type * as pages from '../types/pages';\nimport { PageMenu } from './pageMenu';\n\nconst PageGridMessageDefault: pages.PageGridMessage = {\n    event: 'entityUpd',\n    headline: 'Page Grid',\n    navigation: 'button~bSubPrev~~~~~button~bSubNext~~~~',\n    options: ['~~~~~', '~~~~~', '~~~~~', '~~~~~', '~~~~~', '~~~~~'],\n};\nconst PageGrid2MessageDefault: pages.PageGridMessage = {\n    event: 'entityUpd',\n    headline: 'Page Grid',\n    navigation: 'button~bSubPrev~~~~~button~bSubNext~~~~',\n    options: ['~~~~~', '~~~~~', '~~~~~', '~~~~~', '~~~~~', '~~~~~', '~~~~~', '~~~~~'],\n};\nexport class PageGrid extends PageMenu {\n    config: pages.cardGridDataItemOptions;\n    items: pages.PageBase['items'];\n\n    constructor(config: PageInterface, options: pages.PageBase) {\n        super(config, options);\n        if (\n            !(\n                options.config?.card === 'cardGrid' ||\n                options.config?.card === 'cardGrid2' ||\n                options.config?.card === 'cardGrid3'\n            )\n        ) {\n            throw new Error('PageGrid: invalid config card');\n        }\n        this.config = options.config;\n        this.iconLeftP = 'arrow-left-bold-outline';\n        this.iconLeft = 'arrow-up-bold';\n        this.iconRightP = 'arrow-right-bold-outline';\n        this.iconRight = 'arrow-down-bold';\n\n        if (\n            options.items &&\n            (options.items.card == 'cardGrid' || options.items.card == 'cardGrid2' || options.items.card == 'cardGrid3')\n        ) {\n            this.items = options.items;\n        }\n        this.minUpdateInterval = 800;\n    }\n\n    async init(): Promise<void> {\n        const config = structuredClone(this.config);\n        // search states for mode auto\n        const tempConfig: Partial<pages.cardGridDataItems> =\n            this.enums || this.dpInit\n                ? await this.basePanel.statesControler.getDataItemsFromAuto(this.dpInit, config, undefined, this.enums)\n                : config;\n        // create Dataitems\n        //this.log.debug(JSON.stringify(tempConfig));\n        const tempItem: Partial<pages.cardGridDataItems> = await this.basePanel.statesControler.createDataItems(\n            tempConfig,\n            this,\n        );\n        this.items = tempItem as pages.cardGridDataItems;\n        // set card because we lose it\n        this.items.card = this.card as 'cardGrid' | 'cardGrid2' | 'cardGrid3';\n        await super.init();\n    }\n\n    public async update(): Promise<void> {\n        if (!this.visibility) {\n            return;\n        }\n        const message: Partial<pages.PageGridMessage> = {};\n        message.options = [];\n        if (\n            !this.items ||\n            (this.items.card !== 'cardGrid' && this.items.card !== 'cardGrid2' && this.items.card !== 'cardGrid3')\n        ) {\n            return;\n        }\n        if (\n            !this.config ||\n            (this.config.card !== 'cardGrid' && this.config.card !== 'cardGrid2' && this.config.card !== 'cardGrid3')\n        ) {\n            return;\n        }\n        const arr = (await this.getOptions([])).slice(0, this.maxItems);\n        message.options = arr as typeof message.options;\n\n        message.headline = this.library.getTranslation(\n            (this.items && this.items.data.headline && (await this.items.data.headline.getString())) ?? '',\n        );\n        message.navigation = this.getNavigation();\n        const msg: pages.PageGridMessage = {\n            ...(this.card === 'cardGrid' ? PageGridMessageDefault : PageGrid2MessageDefault),\n            ...message,\n        };\n\n        this.sendToPanel(this.getMessage(msg), false);\n    }\n\n    protected async onStateTrigger(): Promise<void> {\n        await this.update();\n    }\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA,sBAAyB;AAEzB,MAAM,yBAAgD;AAAA,EAClD,OAAO;AAAA,EACP,UAAU;AAAA,EACV,YAAY;AAAA,EACZ,SAAS,CAAC,SAAS,SAAS,SAAS,SAAS,SAAS,OAAO;AAClE;AACA,MAAM,0BAAiD;AAAA,EACnD,OAAO;AAAA,EACP,UAAU;AAAA,EACV,YAAY;AAAA,EACZ,SAAS,CAAC,SAAS,SAAS,SAAS,SAAS,SAAS,SAAS,SAAS,OAAO;AACpF;AACO,MAAM,iBAAiB,yBAAS;AAAA,EACnC;AAAA,EACA;AAAA,EAEA,YAAY,QAAuB,SAAyB;AApBhE;AAqBQ,UAAM,QAAQ,OAAO;AACrB,QACI,IACI,aAAQ,WAAR,mBAAgB,UAAS,gBACzB,aAAQ,WAAR,mBAAgB,UAAS,iBACzB,aAAQ,WAAR,mBAAgB,UAAS,cAE/B;AACE,YAAM,IAAI,MAAM,+BAA+B;AAAA,IACnD;AACA,SAAK,SAAS,QAAQ;AACtB,SAAK,YAAY;AACjB,SAAK,WAAW;AAChB,SAAK,aAAa;AAClB,SAAK,YAAY;AAEjB,QACI,QAAQ,UACP,QAAQ,MAAM,QAAQ,cAAc,QAAQ,MAAM,QAAQ,eAAe,QAAQ,MAAM,QAAQ,cAClG;AACE,WAAK,QAAQ,QAAQ;AAAA,IACzB;AACA,SAAK,oBAAoB;AAAA,EAC7B;AAAA,EAEA,MAAM,OAAsB;AACxB,UAAM,SAAS,gBAAgB,KAAK,MAAM;AAE1C,UAAM,aACF,KAAK,SAAS,KAAK,SACb,MAAM,KAAK,UAAU,gBAAgB,qBAAqB,KAAK,QAAQ,QAAQ,QAAW,KAAK,KAAK,IACpG;AAGV,UAAM,WAA6C,MAAM,KAAK,UAAU,gBAAgB;AAAA,MACpF;AAAA,MACA;AAAA,IACJ;AACA,SAAK,QAAQ;AAEb,SAAK,MAAM,OAAO,KAAK;AACvB,UAAM,MAAM,KAAK;AAAA,EACrB;AAAA,EAEA,MAAa,SAAwB;AAjEzC;AAkEQ,QAAI,CAAC,KAAK,YAAY;AAClB;AAAA,IACJ;AACA,UAAM,UAA0C,CAAC;AACjD,YAAQ,UAAU,CAAC;AACnB,QACI,CAAC,KAAK,SACL,KAAK,MAAM,SAAS,cAAc,KAAK,MAAM,SAAS,eAAe,KAAK,MAAM,SAAS,aAC5F;AACE;AAAA,IACJ;AACA,QACI,CAAC,KAAK,UACL,KAAK,OAAO,SAAS,cAAc,KAAK,OAAO,SAAS,eAAe,KAAK,OAAO,SAAS,aAC/F;AACE;AAAA,IACJ;AACA,UAAM,OAAO,MAAM,KAAK,WAAW,CAAC,CAAC,GAAG,MAAM,GAAG,KAAK,QAAQ;AAC9D,YAAQ,UAAU;AAElB,YAAQ,WAAW,KAAK,QAAQ;AAAA,OAC3B,UAAK,SAAS,KAAK,MAAM,KAAK,YAAa,MAAM,KAAK,MAAM,KAAK,SAAS,UAAU,MAApF,YAA2F;AAAA,IAChG;AACA,YAAQ,aAAa,KAAK,cAAc;AACxC,UAAM,MAA6B;AAAA,MAC/B,GAAI,KAAK,SAAS,aAAa,yBAAyB;AAAA,MACxD,GAAG;AAAA,IACP;AAEA,SAAK,YAAY,KAAK,WAAW,GAAG,GAAG,KAAK;AAAA,EAChD;AAAA,EAEA,MAAgB,iBAAgC;AAC5C,UAAM,KAAK,OAAO;AAAA,EACtB;AACJ;",
  "names": []
}
